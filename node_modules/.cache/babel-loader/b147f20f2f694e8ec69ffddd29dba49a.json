{"ast":null,"code":"var _jsxFileName = \"/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/Invoice/App.js\";\nimport React, { Component } from 'react';\nimport InvoiceDetails from './invoiceDetails';\nimport InvoiceHeader from \"./invoiceHeader\";\nimport api from '../api/api';\nimport styles from './invoice.module.css';\nimport moment from 'moment';\nimport swal from 'sweetalert';\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.addNewItem = () => {\n      this.setState({\n        invoiceItems: [...this.state.invoiceItems, {\n          description: '',\n          quantity: 0,\n          price: 0\n        }]\n      });\n    };\n\n    this.deleteItem = ind => {\n      let item = [...this.state.invoiceItems];\n      this.state.invoiceItems.map((invoice, index) => {\n        if (index === ind) {\n          item.splice(ind, 1);\n        }\n      });\n      this.setState({\n        invoiceItems: [...item]\n      });\n    };\n\n    this.generatePdf = () => {\n      let data = [];\n      let tempList = {};\n      let tempList2 = [];\n      this.state.invoiceItems.map((item, index) => {\n        tempList2.push(Object.values(item));\n        tempList.entries = tempList2;\n      });\n      data.id = this.props.id;\n      data.tempList = tempList;\n      api.getPdf(data).then(res => {\n        this.state.pdfLink = res.data;\n        console.log(\"pdf loaded successfully\");\n        console.log(res);\n        swal({\n          title: \"Sent!\",\n          text: \"Invoice sent and a copy has been downloaded for you!\",\n          icon: \"success\",\n          button: \"OK\"\n        });\n        window.open(this.state.pdfLink, \"_blank\");\n      }).catch(err => console.log(err));\n    };\n\n    this.handleChange = (e, name) => {\n      if (name === 'invoice') {\n        this.setState({\n          invoiceNumber: e.target.value\n        });\n      }\n\n      if (name === 'date') {\n        this.setState({\n          date: e.target.value\n        });\n      }\n\n      if (name === 'dateDue') {\n        this.setState({\n          dateDue: e.target.value\n        });\n      }\n\n      if (name === 'bill') {\n        this.setState({\n          billInfo: e.target.value\n        });\n      }\n\n      if (name === 'billFrom') {\n        this.setState({\n          billInfoFrom: e.target.value\n        });\n      }\n    };\n\n    this.handleOnChange = (event, ind, Name) => {\n      let item = [...this.state.invoiceItems];\n      this.state.invoiceItems.map((invoicc, index) => {\n        if (index === ind) {\n          if (Name === \"name\") item[index].description = event.target.value;\n          if (Name === \"Quan\") item[index].quantity = event.target.value;\n          if (Name === \"Rate\") item[index].price = event.target.value;\n        }\n      });\n      this.setState({\n        invoiceItems: [...item]\n      });\n    };\n\n    const today = moment().format('YYYY-MM-DD');\n    this.state = {\n      invoiceNumber: '',\n      date: today,\n      dateDue: '00-00-0000',\n      billInfo: '',\n      billInfoFrom: '',\n      invoiceItems: [{\n        description: '',\n        price: 0,\n        quantity: 0\n      }],\n      pdfLink: ''\n    };\n    this.handleOnChange = this.handleOnChange.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container,\n      style: {\n        marginTop: '100px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(InvoiceHeader, {\n      handleChange: this.handleChange,\n      date: this.state.date,\n      billInfo: this.state.billInfo,\n      invoiceNo: this.state.invoiceNumber,\n      id: this.props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(InvoiceDetails, {\n      pdf: this.generatePdf,\n      items: this.state.invoiceItems,\n      event: this.addNewItem,\n      description: this.handledescription,\n      del: this.deleteItem,\n      onChangeHandler: this.handleOnChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/Invoice/App.js"],"names":["React","Component","InvoiceDetails","InvoiceHeader","api","styles","moment","swal","App","constructor","addNewItem","setState","invoiceItems","state","description","quantity","price","deleteItem","ind","item","map","invoice","index","splice","generatePdf","data","tempList","tempList2","push","Object","values","entries","id","props","getPdf","then","res","pdfLink","console","log","title","text","icon","button","window","open","catch","err","handleChange","e","name","invoiceNumber","target","value","date","dateDue","billInfo","billInfoFrom","handleOnChange","event","Name","invoicc","today","format","bind","render","container","marginTop","handledescription"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport InvoiceDetails from './invoiceDetails';\nimport InvoiceHeader from \"./invoiceHeader\";\nimport api from '../api/api';\nimport styles from './invoice.module.css';\nimport moment from 'moment';\nimport swal from 'sweetalert';\n\nclass App extends Component {\n  constructor(){\n    super();\n    const today=moment().format('YYYY-MM-DD')\n    this.state={\n      invoiceNumber:'',\n      date:today,\n      dateDue:'00-00-0000',\n      billInfo:'',\n      billInfoFrom:'',\n       invoiceItems:[{\n         description:'',\n         price:0,\n         quantity:0\n       }],\n      pdfLink:'',\n    };\n    this.handleOnChange=this.handleOnChange.bind(this);\n  }\n   addNewItem=()=>{\n    this.setState({\n      invoiceItems:[...this.state.invoiceItems,{description:'', quantity:0, price:0 }]\n    });\n  }\n  deleteItem=(ind)=>{\n    let item=[...this.state.invoiceItems];\n    this.state.invoiceItems.map((invoice, index)=>{\n      if(index===ind){\n        item.splice(ind, 1); \n      }\n    })\n    this.setState({\n      invoiceItems:[...item ]\n     }) \n  }\n  // convertPdf=()=>{\n  //   var pdfConverter = require('jspdf');\n  //   let totalAmount=0;\n  //   var doc = new pdfConverter();\n  //   doc.addImage(logo, 'JPEG', 130, 10, 70, 40);\n  //   doc.setFontSize(26);    \n  //   doc.setFontType('bold');\n  //   doc.text(10, 20, 'INVOICE');\n  //   doc.setFontSize(16);\n  //   doc.setFont('loto');\n  //   doc.setFontType('normal');\n  //   doc.setTextColor(0)   \n  //   doc.text(10,30,\"# \"+this.state.invoiceNumber);\n  //   doc.text(10,40,\"Bill to :\")\n  //   doc.setTextColor(80);  \n  //   doc.text(10,47,this.state.billInfo);\n  //   doc.setTextColor(0)   \n  //   doc.text(10,70,\"Bill from :\")\n  //   doc.setTextColor(80);  \n  //   doc.text(10,77,this.state.billInfoFrom);\n  //   doc.text(110,65,\"Date Issued : \"+this.state.date+\" (yyyy-mm-dd)\");\n  //   doc.text(110,77,\"Due Date : \"+this.state.dateDue+\" (yyyy-mm-dd)\");\n    \n  //   doc.setLineWidth(12);\n  //   doc.setDrawColor(43, 100, 210);\n  //   doc.line(210, 104, 0, 104);\n  //   doc.setTextColor(256)  \n  //   doc.text(10,106, \"Item\");\n  //   doc.text(95,106, \"Quantity\");\n  //   doc.text(135,106, \"Rate\");\n  //   doc.text(175,106, \"Amount\");\n  //   doc.setTextColor(0) \n  //   this.state.invoiceItems.map((item,index)=>{\n  //   totalAmount+=item.price*item.quantity;\n  //   doc.text(10,116 +index *8, item.description);\n  //   doc.text(95,116 +index *8, \"\"+item.quantity);\n  //   doc.text(135,116 +index *8, \"$\"+item.price);\n  //   doc.text(175,116 +index *8, \"$\"+item.price*item.quantity);\n  //   })\n    \n  //   doc.text(100,190, \"Subtotal:  \"+' $'+totalAmount);\n  //   doc.text(100,200, \"GST/HST (13%):  \"+' $'+totalAmount*13/100);\n  //   doc.text(100,210, \"Total:  \"+' $' +((totalAmount*13/100)+ totalAmount) );\n\n\n\n    \n  //   doc.save(\"test.pdf\");\n\n            \n  // }\n  generatePdf=()=>{\n    let data=[];\n    let tempList={};\n    let tempList2=[];\n    this.state.invoiceItems.map((item,index)=>{\n      tempList2.push(Object.values(item));\n      tempList.entries= tempList2\n    });\n    data.id=this.props.id;\n    data.tempList=tempList\n    api.getPdf(data).then(res => {\n        this.state.pdfLink = res.data\n        console.log(\"pdf loaded successfully\");\n        console.log(res);\n        swal({\n          title: \"Sent!\",\n          text: \"Invoice sent and a copy has been downloaded for you!\",\n          icon: \"success\",\n          button: \"OK\",\n      });\n        window.open(this.state.pdfLink, \"_blank\");\n    }).catch(err => console.log(err))\n  }\n\n  handleChange=(e,name)=>{\n    if(name==='invoice'){\n      this.setState({invoiceNumber:e.target.value})\n    }\n    if(name==='date'){\n      this.setState({date:e.target.value})\n    }\n    if(name==='dateDue'){\n      this.setState({dateDue:e.target.value})\n    }\n    if(name==='bill'){\n      this.setState({billInfo:e.target.value})\n    }\n    if(name==='billFrom'){\n      this.setState({billInfoFrom:e.target.value})\n    }\n  }\n\n\n  handleOnChange=(event , ind, Name)=>{\n    let item=[...this.state.invoiceItems];       \n    this.state.invoiceItems.map((invoicc , index)=>{\n            if(index===ind ){   \n              if(Name===\"name\")           \n               item[index].description=event.target.value;\n               if(Name===\"Quan\")           \n               item[index].quantity=event.target.value;\n               if(Name===\"Rate\")           \n               item[index].price=event.target.value;              \n            }\n          });     \n         this.setState({\n          invoiceItems:[...item ]\n         })         \n  }\n  render() {\n    return (\n      <div className={styles.container} style={{marginTop:'100px'}}>\n        <InvoiceHeader handleChange={this.handleChange} date={this.state.date} billInfo={this.state.billInfo} invoiceNo={this.state.invoiceNumber} id={this.props.id}/>\n        <InvoiceDetails pdf={this.generatePdf} items={this.state.invoiceItems} event={this.addNewItem} description={this.handledescription} del={this.deleteItem} onChangeHandler={this.handleOnChange}/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}