{"ast":null,"code":"import _toConsumableArray from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import InvoiceDetails from'./invoiceDetails';import InvoiceHeader from\"./invoiceHeader\";import api from'../api/api';import styles from'./invoice.module.css';import moment from'moment';import swal from'sweetalert';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.addNewItem=function(){_this.setState({invoiceItems:[].concat(_toConsumableArray(_this.state.invoiceItems),[{description:'',quantity:0,price:0}])});};_this.deleteItem=function(ind){var item=_toConsumableArray(_this.state.invoiceItems);_this.state.invoiceItems.map(function(invoice,index){if(index===ind){item.splice(ind,1);}});_this.setState({invoiceItems:_toConsumableArray(item)});};_this.generatePdf=function(){var data=[];var tempList={};var tempList2=[];_this.state.invoiceItems.map(function(item,index){tempList2.push(Object.values(item));tempList.entries=tempList2;});data.id=_this.props.id;data.tempList=tempList;api.getPdf(data).then(function(res){_this.state.pdfLink=res.data;console.log(\"pdf loaded successfully\");console.log(res);swal({title:\"Sent!\",text:\"Invoice sent and a copy has been downloaded for you!\",icon:\"success\",button:\"OK\"});window.open(_this.state.pdfLink,\"_blank\");}).catch(function(err){return console.log(err);});};_this.handleChange=function(e,name){if(name==='invoice'){_this.setState({invoiceNumber:e.target.value});}if(name==='date'){_this.setState({date:e.target.value});}if(name==='dateDue'){_this.setState({dateDue:e.target.value});}if(name==='bill'){_this.setState({billInfo:e.target.value});}if(name==='billFrom'){_this.setState({billInfoFrom:e.target.value});}};_this.handleOnChange=function(event,ind,Name){var item=_toConsumableArray(_this.state.invoiceItems);_this.state.invoiceItems.map(function(invoicc,index){if(index===ind){if(Name===\"name\")item[index].description=event.target.value;if(Name===\"Quan\")item[index].quantity=event.target.value;if(Name===\"Rate\")item[index].price=event.target.value;}});_this.setState({invoiceItems:_toConsumableArray(item)});};var today=moment().format('YYYY-MM-DD');_this.state={invoiceNumber:'',date:today,dateDue:'00-00-0000',billInfo:'',billInfoFrom:'',invoiceItems:[{description:'',price:0,quantity:0}],pdfLink:''};_this.handleOnChange=_this.handleOnChange.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:styles.container,style:{marginTop:'100px'}},/*#__PURE__*/React.createElement(InvoiceHeader,{handleChange:this.handleChange,date:this.state.date,billInfo:this.state.billInfo,invoiceNo:this.state.invoiceNumber,id:this.props.id}),/*#__PURE__*/React.createElement(InvoiceDetails,{pdf:this.generatePdf,items:this.state.invoiceItems,event:this.addNewItem,description:this.handledescription,del:this.deleteItem,onChangeHandler:this.handleOnChange}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/Invoice/App.js"],"names":["React","Component","InvoiceDetails","InvoiceHeader","api","styles","moment","swal","App","addNewItem","setState","invoiceItems","state","description","quantity","price","deleteItem","ind","item","map","invoice","index","splice","generatePdf","data","tempList","tempList2","push","Object","values","entries","id","props","getPdf","then","res","pdfLink","console","log","title","text","icon","button","window","open","catch","err","handleChange","e","name","invoiceNumber","target","value","date","dateDue","billInfo","billInfoFrom","handleOnChange","event","Name","invoicc","today","format","bind","container","marginTop","handledescription"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport InvoiceDetails from './invoiceDetails';\nimport InvoiceHeader from \"./invoiceHeader\";\nimport api from '../api/api';\nimport styles from './invoice.module.css';\nimport moment from 'moment';\nimport swal from 'sweetalert';\n\nclass App extends Component {\n  constructor(){\n    super();\n    const today=moment().format('YYYY-MM-DD')\n    this.state={\n      invoiceNumber:'',\n      date:today,\n      dateDue:'00-00-0000',\n      billInfo:'',\n      billInfoFrom:'',\n       invoiceItems:[{\n         description:'',\n         price:0,\n         quantity:0\n       }],\n      pdfLink:'',\n    };\n    this.handleOnChange=this.handleOnChange.bind(this);\n  }\n   addNewItem=()=>{\n    this.setState({\n      invoiceItems:[...this.state.invoiceItems,{description:'', quantity:0, price:0 }]\n    });\n  }\n  deleteItem=(ind)=>{\n    let item=[...this.state.invoiceItems];\n    this.state.invoiceItems.map((invoice, index)=>{\n      if(index===ind){\n        item.splice(ind, 1); \n      }\n    })\n    this.setState({\n      invoiceItems:[...item ]\n     }) \n  }\n  // convertPdf=()=>{\n  //   var pdfConverter = require('jspdf');\n  //   let totalAmount=0;\n  //   var doc = new pdfConverter();\n  //   doc.addImage(logo, 'JPEG', 130, 10, 70, 40);\n  //   doc.setFontSize(26);    \n  //   doc.setFontType('bold');\n  //   doc.text(10, 20, 'INVOICE');\n  //   doc.setFontSize(16);\n  //   doc.setFont('loto');\n  //   doc.setFontType('normal');\n  //   doc.setTextColor(0)   \n  //   doc.text(10,30,\"# \"+this.state.invoiceNumber);\n  //   doc.text(10,40,\"Bill to :\")\n  //   doc.setTextColor(80);  \n  //   doc.text(10,47,this.state.billInfo);\n  //   doc.setTextColor(0)   \n  //   doc.text(10,70,\"Bill from :\")\n  //   doc.setTextColor(80);  \n  //   doc.text(10,77,this.state.billInfoFrom);\n  //   doc.text(110,65,\"Date Issued : \"+this.state.date+\" (yyyy-mm-dd)\");\n  //   doc.text(110,77,\"Due Date : \"+this.state.dateDue+\" (yyyy-mm-dd)\");\n    \n  //   doc.setLineWidth(12);\n  //   doc.setDrawColor(43, 100, 210);\n  //   doc.line(210, 104, 0, 104);\n  //   doc.setTextColor(256)  \n  //   doc.text(10,106, \"Item\");\n  //   doc.text(95,106, \"Quantity\");\n  //   doc.text(135,106, \"Rate\");\n  //   doc.text(175,106, \"Amount\");\n  //   doc.setTextColor(0) \n  //   this.state.invoiceItems.map((item,index)=>{\n  //   totalAmount+=item.price*item.quantity;\n  //   doc.text(10,116 +index *8, item.description);\n  //   doc.text(95,116 +index *8, \"\"+item.quantity);\n  //   doc.text(135,116 +index *8, \"$\"+item.price);\n  //   doc.text(175,116 +index *8, \"$\"+item.price*item.quantity);\n  //   })\n    \n  //   doc.text(100,190, \"Subtotal:  \"+' $'+totalAmount);\n  //   doc.text(100,200, \"GST/HST (13%):  \"+' $'+totalAmount*13/100);\n  //   doc.text(100,210, \"Total:  \"+' $' +((totalAmount*13/100)+ totalAmount) );\n\n\n\n    \n  //   doc.save(\"test.pdf\");\n\n            \n  // }\n  generatePdf=()=>{\n    let data=[];\n    let tempList={};\n    let tempList2=[];\n    this.state.invoiceItems.map((item,index)=>{\n      tempList2.push(Object.values(item));\n      tempList.entries= tempList2\n    });\n    data.id=this.props.id;\n    data.tempList=tempList\n    api.getPdf(data).then(res => {\n        this.state.pdfLink = res.data\n        console.log(\"pdf loaded successfully\");\n        console.log(res);\n        swal({\n          title: \"Sent!\",\n          text: \"Invoice sent and a copy has been downloaded for you!\",\n          icon: \"success\",\n          button: \"OK\",\n      });\n        window.open(this.state.pdfLink, \"_blank\");\n    }).catch(err => console.log(err))\n  }\n\n  handleChange=(e,name)=>{\n    if(name==='invoice'){\n      this.setState({invoiceNumber:e.target.value})\n    }\n    if(name==='date'){\n      this.setState({date:e.target.value})\n    }\n    if(name==='dateDue'){\n      this.setState({dateDue:e.target.value})\n    }\n    if(name==='bill'){\n      this.setState({billInfo:e.target.value})\n    }\n    if(name==='billFrom'){\n      this.setState({billInfoFrom:e.target.value})\n    }\n  }\n\n\n  handleOnChange=(event , ind, Name)=>{\n    let item=[...this.state.invoiceItems];       \n    this.state.invoiceItems.map((invoicc , index)=>{\n            if(index===ind ){   \n              if(Name===\"name\")           \n               item[index].description=event.target.value;\n               if(Name===\"Quan\")           \n               item[index].quantity=event.target.value;\n               if(Name===\"Rate\")           \n               item[index].price=event.target.value;              \n            }\n          });     \n         this.setState({\n          invoiceItems:[...item ]\n         })         \n  }\n  render() {\n    return (\n      <div className={styles.container} style={{marginTop:'100px'}}>\n        <InvoiceHeader handleChange={this.handleChange} date={this.state.date} billInfo={this.state.billInfo} invoiceNo={this.state.invoiceNumber} id={this.props.id}/>\n        <InvoiceDetails pdf={this.generatePdf} items={this.state.invoiceItems} event={this.addNewItem} description={this.handledescription} del={this.deleteItem} onChangeHandler={this.handleOnChange}/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}