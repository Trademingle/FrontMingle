{"ast":null,"code":"var _jsxFileName = \"/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/Notifications/NotificationItem/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport styles from './notificationItem.module.css';\nimport api from '../../api/api';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Divider from '@material-ui/core/Divider';\nimport RecordIcon from '@material-ui/icons/FiberManualRecord';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    padding: '0px'\n  }\n}));\n\nconst NotificationItem = props => {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n\n  const handleClick = () => {\n    props.data.type = 'click';\n    api.patchNotification(props.data).then(res => {\n      console.log('success');\n    }).catch(err => console.log(err));\n    props.close();\n    onNotificationClick(props.data);\n  };\n\n  const handleSeen = () => {\n    props.data.type = 'seen';\n    api.patchNotification(props.data).then(res => {\n      console.log('success');\n    }).catch(err => console.log(err));\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem('usertype').toLowerCase() === \"contractor\" && !(props.data.status & 4) || localStorage.getItem('usertype').toLowerCase() === \"client\" && !(props.data.status & 2)) {\n      // This notification has not been seen \n      handleSeen();\n    }\n  }, []);\n\n  const onNotificationClick = data => {\n    switch (data.notificationType) {\n      case 1:\n        history.push({\n          pathname: '/completedposting/' + data.jobId\n        });\n        break;\n\n      case 2:\n        // code block\n        history.push({\n          pathname: '/activeposting/' + data.jobId\n        });\n        break;\n\n      case 3:\n        history.push({\n          pathname: '/ContractorActiveJobs/active'\n        });\n        break;\n\n      case 4:\n        history.push({\n          pathname: '/homeowneractivejobs/unassigned'\n        });\n        break;\n\n      case 5:\n        history.push({\n          pathname: '/completedposting/' + data.jobId\n        });\n        break;\n\n      default:\n        break;\n      // code block\n    }\n  };\n\n  const isContractor = localStorage.getItem('usertype') === 'Contractor';\n\n  const text_truncate = function (str) {\n    let length = 80;\n\n    if (str == null) {\n      str = '';\n    }\n\n    if (str.length > length) {\n      return str.substring(0, length) + \"...\";\n    } else {\n      return str;\n    }\n  };\n\n  let truncatedMessage = text_truncate(props.message);\n  return /*#__PURE__*/React.createElement(List, {\n    component: \"nav\",\n    className: classes.root,\n    \"aria-label\": \"mailbox folders\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ListItem, {\n    button: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: props.data.downloadUrl,\n    className: styles.userPic,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }), isContractor && props.data.status & 8 || !isContractor && props.data.status & 2 ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      width: '100%',\n      flexDirection: 'column'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.notiftext,\n    style: {\n      color: '#7c7c7c'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, truncatedMessage), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.date,\n    style: {\n      color: '#999999'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, props.date)) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      width: '100%',\n      flexDirection: 'column'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.notiftext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, truncatedMessage), /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.date,\n    style: {\n      color: '#2B64D2'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, props.date)), isContractor && props.data.status & 8 || !isContractor && props.data.status & 2 ? null : /*#__PURE__*/React.createElement(RecordIcon, {\n    style: {\n      color: '#2B64D2',\n      fontSize: '15px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }));\n};\n\n_s(NotificationItem, \"2WbZuFmguLMRIlNCinYFSsScN3A=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = NotificationItem;\nexport default NotificationItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"NotificationItem\");","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/Notifications/NotificationItem/index.js"],"names":["React","useEffect","useHistory","styles","api","makeStyles","List","ListItem","Divider","RecordIcon","useStyles","theme","root","width","maxWidth","padding","NotificationItem","props","classes","history","handleClick","data","type","patchNotification","then","res","console","log","catch","err","close","onNotificationClick","handleSeen","localStorage","getItem","toLowerCase","status","notificationType","push","pathname","jobId","isContractor","text_truncate","str","length","substring","truncatedMessage","message","downloadUrl","userPic","display","flexDirection","notiftext","color","date","fontSize"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,OAAOC,MAAP,MAAmB,+BAAnB;AACA,OAAOC,GAAP,MAAgB,eAAhB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,UAAP,MAAuB,sCAAvB;AAEA,MAAMC,SAAS,GAAGL,UAAU,CAAEM,KAAD,KAAY;AACvCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,KAAK,EAAE,MADH;AAEJC,IAAAA,QAAQ,EAAE,GAFN;AAGJC,IAAAA,OAAO,EAAC;AAHJ;AADiC,CAAZ,CAAD,CAA5B;;AAQA,MAAMC,gBAAgB,GAAIC,KAAD,IAAW;AAAA;;AAChC,QAAMC,OAAO,GAAGR,SAAS,EAAzB;AACA,QAAMS,OAAO,GAAGjB,UAAU,EAA1B;;AACA,QAAMkB,WAAW,GAAG,MAAM;AACxBH,IAAAA,KAAK,CAACI,IAAN,CAAWC,IAAX,GAAkB,OAAlB;AACAlB,IAAAA,GAAG,CAACmB,iBAAJ,CAAsBN,KAAK,CAACI,IAA5B,EAAkCG,IAAlC,CAAuCC,GAAG,IAAI;AAC5CC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACD,KAFD,EAEGC,KAFH,CAESC,GAAG,IAAIH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAFhB;AAGAZ,IAAAA,KAAK,CAACa,KAAN;AACAC,IAAAA,mBAAmB,CAACd,KAAK,CAACI,IAAP,CAAnB;AACD,GAPD;;AASA,QAAMW,UAAU,GAAG,MAAM;AACvBf,IAAAA,KAAK,CAACI,IAAN,CAAWC,IAAX,GAAkB,MAAlB;AACAlB,IAAAA,GAAG,CAACmB,iBAAJ,CAAsBN,KAAK,CAACI,IAA5B,EAAkCG,IAAlC,CAAuCC,GAAG,IAAI;AAC5CC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACD,KAFD,EAEGC,KAFH,CAESC,GAAG,IAAIH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAFhB;AAGD,GALD;;AAQA5B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAKgC,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,WAAjC,OAAiD,YAAjD,IAAiE,EAAElB,KAAK,CAACI,IAAN,CAAWe,MAAX,GAAkB,CAApB,CAAlE,IACAH,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,WAAjC,OAAiD,QAAjD,IAA6D,EAAElB,KAAK,CAACI,IAAN,CAAWe,MAAX,GAAkB,CAApB,CADjE,EACyF;AAAE;AACzFJ,MAAAA,UAAU;AACX;AACF,GALQ,EAKN,EALM,CAAT;;AAOA,QAAMD,mBAAmB,GAAIV,IAAD,IAAU;AACpC,YAAOA,IAAI,CAACgB,gBAAZ;AACE,WAAK,CAAL;AACElB,QAAAA,OAAO,CAACmB,IAAR,CAAa;AACXC,UAAAA,QAAQ,EAAE,uBAAqBlB,IAAI,CAACmB;AADzB,SAAb;AAGA;;AACF,WAAK,CAAL;AACE;AACArB,QAAAA,OAAO,CAACmB,IAAR,CAAa;AACXC,UAAAA,QAAQ,EAAE,oBAAkBlB,IAAI,CAACmB;AADtB,SAAb;AAGA;;AACF,WAAK,CAAL;AACErB,QAAAA,OAAO,CAACmB,IAAR,CAAa;AACXC,UAAAA,QAAQ,EAAE;AADC,SAAb;AAGA;;AACF,WAAK,CAAL;AACIpB,QAAAA,OAAO,CAACmB,IAAR,CAAa;AACXC,UAAAA,QAAQ,EAAE;AADC,SAAb;AAGA;;AACJ,WAAK,CAAL;AACIpB,QAAAA,OAAO,CAACmB,IAAR,CAAa;AACXC,UAAAA,QAAQ,EAAE,uBAAqBlB,IAAI,CAACmB;AADzB,SAAb;AAGA;;AACJ;AACE;AACA;AA7BJ;AA+BD,GAhCD;;AAiCA,QAAMC,YAAY,GAAGR,YAAY,CAACC,OAAb,CAAqB,UAArB,MAAqC,YAA1D;;AACA,QAAMQ,aAAa,GAAG,UAASC,GAAT,EAAc;AAClC,QAAIC,MAAM,GAAG,EAAb;;AACA,QAAID,GAAG,IAAI,IAAX,EAAiB;AACfA,MAAAA,GAAG,GAAG,EAAN;AACD;;AACD,QAAIA,GAAG,CAACC,MAAJ,GAAaA,MAAjB,EAAyB;AACvB,aAAOD,GAAG,CAACE,SAAJ,CAAc,CAAd,EAAiBD,MAAjB,IAA4B,KAAnC;AACD,KAFD,MAEO;AACL,aAAOD,GAAP;AACD;AACF,GAVD;;AAWA,MAAIG,gBAAgB,GAAGJ,aAAa,CAACzB,KAAK,CAAC8B,OAAP,CAApC;AACA,sBACE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,KAAhB;AAAsB,IAAA,SAAS,EAAE7B,OAAO,CAACN,IAAzC;AAA+C,kBAAW,iBAA1D;AAA4E,IAAA,OAAO,EAAEQ,WAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,MAAM,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAEH,KAAK,CAACI,IAAN,CAAW2B,WAArB;AAAkC,IAAA,SAAS,EAAE7C,MAAM,CAAC8C,OAApD;AAA6D,IAAA,GAAG,EAAC,EAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEMR,YAAY,IAAGxB,KAAK,CAACI,IAAN,CAAWe,MAAX,GAAkB,CAAlC,IAA0C,CAACK,YAAD,IAAgBxB,KAAK,CAACI,IAAN,CAAWe,MAAX,GAAkB,CAA5E,gBACC;AAAK,IAAA,KAAK,EAAE;AAACc,MAAAA,OAAO,EAAC,MAAT;AAAgBrC,MAAAA,KAAK,EAAC,MAAtB;AAA8BsC,MAAAA,aAAa,EAAC;AAA5C,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,SAAS,EAAEhD,MAAM,CAACiD,SAArB;AAAgC,IAAA,KAAK,EAAE;AAACC,MAAAA,KAAK,EAAC;AAAP,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA2DP,gBAA3D,CADF,eAEE;AAAG,IAAA,SAAS,EAAE3C,MAAM,CAACmD,IAArB;AAA2B,IAAA,KAAK,EAAE;AAACD,MAAAA,KAAK,EAAE;AAAR,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuDpC,KAAK,CAACqC,IAA7D,CAFF,CADD,gBAKE;AAAK,IAAA,KAAK,EAAE;AAACJ,MAAAA,OAAO,EAAC,MAAT;AAAgBrC,MAAAA,KAAK,EAAC,MAAtB;AAA8BsC,MAAAA,aAAa,EAAC;AAA5C,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAI,IAAA,SAAS,EAAEhD,MAAM,CAACiD,SAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkCN,gBAAlC,CADD,eAEC;AAAG,IAAA,SAAS,EAAE3C,MAAM,CAACmD,IAArB;AAA2B,IAAA,KAAK,EAAE;AAACD,MAAAA,KAAK,EAAC;AAAP,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAsDpC,KAAK,CAACqC,IAA5D,CAFD,CAPP,EAYOb,YAAY,IAAGxB,KAAK,CAACI,IAAN,CAAWe,MAAX,GAAkB,CAAlC,IAA0C,CAACK,YAAD,IAAgBxB,KAAK,CAACI,IAAN,CAAWe,MAAX,GAAkB,CAA5E,GACA,IADA,gBAEA,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAE;AAACiB,MAAAA,KAAK,EAAC,SAAP;AAAkBE,MAAAA,QAAQ,EAAC;AAA3B,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdN,CADF,eAkBE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlBF,CADF;AAsBD,CA/FH;;GAAMvC,gB;UACcN,S,EACAR,U;;;KAFdc,gB;AAkGN,eAAeA,gBAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport {useHistory} from 'react-router-dom';\nimport styles from './notificationItem.module.css';\nimport api from '../../api/api';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Divider from '@material-ui/core/Divider';\nimport RecordIcon from '@material-ui/icons/FiberManualRecord';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    padding:'0px',\n  },\n}));\n\nconst NotificationItem = (props) => {\n    const classes = useStyles();\n    const history = useHistory();\n    const handleClick = () => {\n      props.data.type = 'click'\n      api.patchNotification(props.data).then(res => {\n        console.log('success');\n      }).catch(err => console.log(err))\n      props.close() \n      onNotificationClick(props.data)\n    }\n\n    const handleSeen = () => {\n      props.data.type = 'seen'\n      api.patchNotification(props.data).then(res => {\n        console.log('success');\n      }).catch(err => console.log(err))\n    }\n\n\n    useEffect(() => {\n      if( (localStorage.getItem('usertype').toLowerCase()===\"contractor\" && !(props.data.status&4)) \n      || (localStorage.getItem('usertype').toLowerCase()===\"client\" && !(props.data.status&2))){ // This notification has not been seen \n        handleSeen();\n      }\n    }, []);\n\n    const onNotificationClick = (data) => {\n      switch(data.notificationType) {\n        case 1:\n          history.push({\n            pathname: '/completedposting/'+data.jobId\n          })\n          break;\n        case 2:\n          // code block\n          history.push({\n            pathname: '/activeposting/'+data.jobId\n          })\n          break;\n        case 3:\n          history.push({\n            pathname: '/ContractorActiveJobs/active'\n          })\n          break;\n        case 4:\n            history.push({\n              pathname: '/homeowneractivejobs/unassigned'\n            })\n            break;\n        case 5:\n            history.push({\n              pathname: '/completedposting/'+data.jobId\n            })\n            break;\n        default:\n          break;\n          // code block\n      }\n    }\n    const isContractor = localStorage.getItem('usertype') === 'Contractor'\n    const text_truncate = function(str) {\n      let length = 80;\n      if (str == null) {\n        str = '';\n      }\n      if (str.length > length) {\n        return str.substring(0, length ) + \"...\";\n      } else {\n        return str;\n      }\n    };\n    let truncatedMessage = text_truncate(props.message)\n    return (\n      <List component=\"nav\" className={classes.root} aria-label=\"mailbox folders\" onClick={handleClick}>\n        <ListItem button>\n          <img src={props.data.downloadUrl} className={styles.userPic} alt=\"\"/>\n            {(isContractor&&(props.data.status&8)) || (!isContractor&&(props.data.status&2)) ?\n              <div style={{display:'flex',width:'100%', flexDirection:'column'}}>\n                <p className={styles.notiftext} style={{color:'#7c7c7c'}}>{truncatedMessage}</p> \n                <p className={styles.date} style={{color: '#999999'}}>{props.date}</p>\n              </div>\n              :<div style={{display:'flex',width:'100%', flexDirection:'column'}}>\n                <p  className={styles.notiftext}>{truncatedMessage}</p> \n                <p className={styles.date} style={{color:'#2B64D2'}}>{props.date}</p>\n              </div>\n            }\n            { (isContractor&&(props.data.status&8)) || (!isContractor&&(props.data.status&2)) ?\n              null :\n              <RecordIcon style={{color:'#2B64D2', fontSize:'15px'}}/>\n            }\n        </ListItem>\n        <Divider />\n      </List>\n    );\n  };\n  \n  \nexport default NotificationItem;"]},"metadata":{},"sourceType":"module"}