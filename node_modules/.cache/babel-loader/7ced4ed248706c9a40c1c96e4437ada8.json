{"ast":null,"code":"import _slicedToArray from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import styles from'./profile.module.css';import StarIcon from'@material-ui/icons/Star';import Popup from\"reactjs-popup\";import CloseOutlinedIcon from'@material-ui/icons/CloseOutlined';import{withStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import api from'../api/api';import Hook from\"./searchHooks\";import swal from'sweetalert';import TextField from'@material-ui/core/TextField';import FormPasswordReset from'./passwordForm';import ProgressBar from'react-customizable-progressbar';import{useHistory}from'react-router-dom';import ArrowBackIcon from'@material-ui/icons/ArrowBack';function Profile(props){var history=useHistory();var handleOnClick=function handleOnClick(event){event.preventDefault();history.goBack();};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{className:styles.header},/*#__PURE__*/React.createElement(ArrowBackIcon,{style:{height:25,width:50,cursor:\"pointer\"},onClick:handleOnClick}),props.firstName,\" \",props.lastName),localStorage.getItem('usertype')==='Contractor'?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:props.avatar,className:styles.circle,style:{height:80,width:80},alt:\"\"}),/*#__PURE__*/React.createElement(\"p\",{className:styles.jobsdone},props.jobsdone),/*#__PURE__*/React.createElement(\"p\",{className:styles.rating},/*#__PURE__*/React.createElement(StarIcon,{className:styles.Vector}),props.rating),/*#__PURE__*/React.createElement(\"p\",{className:styles.jobsdone2},\"Jobs done\"),/*#__PURE__*/React.createElement(\"p\",{className:styles.rating2},\"Rating\")):/*#__PURE__*/React.createElement(\"img\",{src:props.avatar,className:styles.circle,style:{height:130,width:130},alt:\"\"}),/*#__PURE__*/React.createElement(Popup,{trigger:/*#__PURE__*/React.createElement(\"button\",{className:styles.editbutton},\" Edit Profile\"),modal:true,contentStyle:contentStyle2},function(close){return/*#__PURE__*/React.createElement(EditProfile,{props:props,close:close,onChange:props.onChange});}),/*#__PURE__*/React.createElement(\"p\",{className:styles.downloadAppText},\"Please download our app from here or browse from desktop to edit your profile and for better experience.\"));};function EditProfile(props){var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),clientId=_React$useState2[0],setClientId=_React$useState2[1];var _React$useState3=React.useState(props.props.avatar),_React$useState4=_slicedToArray(_React$useState3,2),imageSrc=_React$useState4[0],setImageSrc=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),videoSrc=_React$useState6[0],setVideoSrc=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),progressOn=_React$useState8[0],setProgressOn=_React$useState8[1];var _React$useState9=React.useState(0),_React$useState10=_slicedToArray(_React$useState9,2),progressVal=_React$useState10[0],setProgressVal=_React$useState10[1];var image;var video;var progressClose;var handleSubmit=function handleSubmit(){console.log(clientId);var jobCallback=function jobCallback(data){if(data.type==='SUCCESS'){{props.onChange();}swal({title:\"Updated!\",text:\"Profile has been successfully updated!\",icon:\"success\",button:\"OK\"});{props.close();}// window.location.reload(false);\n}else if(data.type==='PROGRESS'){console.log(\"PROGRESS: \"+data.value);setProgressOn(true);setProgressVal(100*data.value);}};api.patchEditProfile(clientId,jobCallback);};var handlePicChange=function handlePicChange(event){if(event.type===\"change\"){image=event.target.files[0];clientId['image']=image;setImageSrc(URL.createObjectURL(event.target.files[0]));}};var handleVidChange=function handleVidChange(event){console.log('VIDEO');if(event.type===\"change\"){video=event.target.files[0];clientId['video']=video;setVideoSrc(video);}};var Skillss=function Skillss(){if(localStorage.getItem(\"usertype\")===\"Contractor\"){return/*#__PURE__*/React.createElement(\"div\",{className:styles.editName},/*#__PURE__*/React.createElement(\"form\",{className:styles.editfName,noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(\"p\",null,\"Other info:\"),/*#__PURE__*/React.createElement(TextField,{id:\"insuranceNumber\",label:\"Insurance Number\",onKeyUp:keyPressed,variant:\"outlined\",defaultValue:props.props.insuranceNumber}),/*#__PURE__*/React.createElement(TextField,{id:\"workerNumber\",label:\"Worker Number\",onKeyUp:keyPressed,variant:\"outlined\",defaultValue:props.props.workerNumber})),/*#__PURE__*/React.createElement(\"div\",{className:styles.editfName},/*#__PURE__*/React.createElement(\"p\",null,\"Skills:\"),/*#__PURE__*/React.createElement(Hook,{information:clientId,type:\"serviceTypeList\",selected:props.props.services})));}else{return null;}};var Password=function Password(){return/*#__PURE__*/React.createElement(FormPasswordReset,null);};var keyPressed=function keyPressed(event){if(event.target.id==='firstName'&&event.target.value!==clientId.firstName){clientId.firstName=event.target.value;}if(event.target.id==='lastName'&&event.target.value!==clientId.lastName){clientId.lastName=event.target.value;}if(event.target.id==='insuranceNumber'&&event.target.value!==clientId.insuranceNumber){clientId.insuranceNumber=event.target.value;}if(event.target.id==='workerNumber'&&event.target.value!==clientId.workerNumber){clientId.workerNumber=event.target.value;}if(event.target.id==='password'&&event.target.value!==clientId.password){clientId.password=event.target.value;}if(event.target.id==='rePassword'&&event.target.value!==clientId.rePassword){clientId.rePassword=event.target.value;}};return/*#__PURE__*/React.createElement(\"box\",{className:styles.box},/*#__PURE__*/React.createElement(CloseOutlinedIcon,{style:{height:40,width:40},className:styles.cross,onClick:props.close}),/*#__PURE__*/React.createElement(\"h1\",{className:styles.editProfile},\"Edit Profile\"),/*#__PURE__*/React.createElement(\"div\",{className:styles.circle3,style:{height:150,width:150}},/*#__PURE__*/React.createElement(\"img\",{src:imageSrc,className:styles.circle2,style:{height:150,width:150}}),/*#__PURE__*/React.createElement(\"p\",{className:styles.circle3text},\"Change Profile Picture\"),/*#__PURE__*/React.createElement(\"input\",{className:styles.profile_pic_input,type:\"file\",onChange:handlePicChange,accept:\"image/*\"})),videoSrc==null?/*#__PURE__*/React.createElement(UploadVideoButton,{style:{alignSelf:\"center\"}},/*#__PURE__*/React.createElement(\"p\",{style:{position:\"absolute\"}},\"Click here to upload a new video\"),/*#__PURE__*/React.createElement(\"input\",{className:styles.video_upload_input,type:\"file\",onChange:handleVidChange,accept:\"video/*\"})):/*#__PURE__*/React.createElement(\"p\",{style:{order:2,alignSelf:\"center\"}},\"Video: \",videoSrc.name,\" \"),/*#__PURE__*/React.createElement(\"form\",{className:styles.editfName,noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(\"p\",null,\"Basic Info:\"),/*#__PURE__*/React.createElement(TextField,{id:\"firstName\",label:\"First Name\",onKeyUp:keyPressed,variant:\"outlined\",defaultValue:props.props.firstName}),/*#__PURE__*/React.createElement(TextField,{id:\"lastName\",label:\"Last Name\",onKeyUp:keyPressed,variant:\"outlined\",defaultValue:props.props.lastName})),/*#__PURE__*/React.createElement(\"form\",{className:styles.editfName,noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(\"p\",null,\"Change Password:\"),/*#__PURE__*/React.createElement(Popup,{trigger:/*#__PURE__*/React.createElement(FormButton,null,\"Click here to update your password\"),modal:true,contentStyle:contentStyle3},function(close){return/*#__PURE__*/React.createElement(FormPasswordReset,{close:close});})),/*#__PURE__*/React.createElement(Skillss,null),/*#__PURE__*/React.createElement(\"div\",{className:styles.editfName},/*#__PURE__*/React.createElement(\"p\",null,\"Languages:\"),/*#__PURE__*/React.createElement(Hook,{information:clientId,type:\"languageList\",selected:props.props.languages})),/*#__PURE__*/React.createElement(\"div\",{className:styles.buttons},/*#__PURE__*/React.createElement(BackButton,{className:styles.back,onClick:props.close},\"Cancel\"),/*#__PURE__*/React.createElement(CompleteButton,{className:styles.complete,onClick:handleSubmit},/*#__PURE__*/React.createElement(\"p\",{className:styles.completeText},\"Save\"))),/*#__PURE__*/React.createElement(Popup,{contentStyle:{width:\"inherit\",borderRadius:'50%'},open:progressOn,modal:true,closeOnDocumentClick:false},function(close){return/*#__PURE__*/React.createElement(ProgressBar,{radius:100,progress:progressVal,strokeWidth:18,strokeColor:\"#5d9cec\",strokeLinecap:\"square\",trackStrokeWidth:18},/*#__PURE__*/React.createElement(\"div\",{className:styles.indicator},/*#__PURE__*/React.createElement(\"div\",null,Math.round(progressVal),\"%\")));}));};var contentStyle2={width:'702px',height:'auto',background:'#fffFFF',borderRadius:'16px'};var contentStyle3={width:'700px',height:'auto',background:'#fffFFF',borderRadius:'16px'};var CompleteButton=withStyles(function(theme){return{root:{borderRadius:44,backgroundColor:'#2B64D2','&:hover':{backgroundColor:'#003ba0'},marginLeft:30}};})(Button);var BackButton=withStyles(function(theme){return{root:{borderRadius:44,backgroundColor:'white',border:'1px dotted','&:hover':{border:\"2px solid #2B64D2\"},marginLeft:80}};})(Button);var FormButton=withStyles(function(theme){return{root:{width:\"400px\",height:\"40px\",textAlign:\"center\",marginRight:\"80px\",marginTop:\"7px\",backgroundColor:\"white\",border:\"1px solid #2B64D2\",cursor:\"pointer\",borderRadius:\"5px\",'&:hover':{backgroundColor:\"#2B64D2\",color:\"white\"}}};})(Button);var UploadVideoButton=withStyles(function(theme){return{root:{width:\"400px\",height:\"40px\",textAlign:\"center\",order:2,// marginRight: \"80px\",\nmarginTop:\"7px\",marginBottom:\"7px\",padding:0,backgroundColor:\"white\",border:\"1px solid #2B64D2\",cursor:\"pointer\",borderRadius:\"5px\",'&:hover':{backgroundColor:\"#2B64D2\",color:\"white\"}}};})(Button);export default Profile;","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/MyProfile/profile.js"],"names":["React","styles","StarIcon","Popup","CloseOutlinedIcon","withStyles","Button","api","Hook","swal","TextField","FormPasswordReset","ProgressBar","useHistory","ArrowBackIcon","Profile","props","history","handleOnClick","event","preventDefault","goBack","header","height","width","cursor","firstName","lastName","localStorage","getItem","avatar","circle","jobsdone","rating","Vector","jobsdone2","rating2","editbutton","contentStyle2","close","onChange","downloadAppText","EditProfile","useState","clientId","setClientId","imageSrc","setImageSrc","videoSrc","setVideoSrc","progressOn","setProgressOn","progressVal","setProgressVal","image","video","progressClose","handleSubmit","console","log","jobCallback","data","type","title","text","icon","button","value","patchEditProfile","handlePicChange","target","files","URL","createObjectURL","handleVidChange","Skillss","editName","editfName","keyPressed","insuranceNumber","workerNumber","services","Password","id","password","rePassword","box","cross","editProfile","circle3","circle2","circle3text","profile_pic_input","alignSelf","position","video_upload_input","order","name","contentStyle3","languages","buttons","back","complete","completeText","borderRadius","indicator","Math","round","background","CompleteButton","theme","root","backgroundColor","marginLeft","BackButton","border","FormButton","textAlign","marginRight","marginTop","color","UploadVideoButton","marginBottom","padding"],"mappings":"yKAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,kCAA9B,CACA,OAASC,UAAT,KAA0B,0BAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,GAAP,KAAgB,YAAhB,CACA,MAAOC,CAAAA,IAAP,KAAiB,eAAjB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,gBAA9B,CACA,MAAOC,CAAAA,WAAP,KAAwB,gCAAxB,CACA,OAASC,UAAT,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,aAAP,KAA0B,8BAA1B,CAIA,QAASC,CAAAA,OAAT,CAAkBC,KAAlB,CAAyB,CACrB,GAAMC,CAAAA,OAAO,CAAGJ,UAAU,EAA1B,CACA,GAAMK,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,CAC7BA,KAAK,CAACC,cAAN,GACAH,OAAO,CAACI,MAAR,GACH,CAHD,CAIA,mBACI,4CACI,0BAAI,SAAS,CAAEpB,MAAM,CAACqB,MAAtB,eAA8B,oBAAC,aAAD,EAAgB,KAAK,CAAE,CAACC,MAAM,CAAC,EAAR,CAAYC,KAAK,CAAC,EAAlB,CAAsBC,MAAM,CAAC,SAA7B,CAAvB,CAAgE,OAAO,CAAEP,aAAzE,EAA9B,CAAwHF,KAAK,CAACU,SAA9H,KAA0IV,KAAK,CAACW,QAAhJ,CADJ,CAEKC,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAqC,YAArC,cACA,4CACG,2BAAK,GAAG,CAAEb,KAAK,CAACc,MAAhB,CAAwB,SAAS,CAAE7B,MAAM,CAAC8B,MAA1C,CAAkD,KAAK,CAAE,CAACR,MAAM,CAAC,EAAR,CAAWC,KAAK,CAAC,EAAjB,CAAzD,CAA+E,GAAG,CAAC,EAAnF,EADH,cAEG,yBAAG,SAAS,CAAEvB,MAAM,CAAC+B,QAArB,EAAgChB,KAAK,CAACgB,QAAtC,CAFH,cAGG,yBAAG,SAAS,CAAE/B,MAAM,CAACgC,MAArB,eAA6B,oBAAC,QAAD,EAAU,SAAS,CAAEhC,MAAM,CAACiC,MAA5B,EAA7B,CAAmElB,KAAK,CAACiB,MAAzE,CAHH,cAIG,yBAAG,SAAS,CAAEhC,MAAM,CAACkC,SAArB,cAJH,cAKG,yBAAG,SAAS,CAAElC,MAAM,CAACmC,OAArB,WALH,CADA,cAQA,2BAAK,GAAG,CAAEpB,KAAK,CAACc,MAAhB,CAAwB,SAAS,CAAE7B,MAAM,CAAC8B,MAA1C,CAAkD,KAAK,CAAE,CAACR,MAAM,CAAC,GAAR,CAAYC,KAAK,CAAC,GAAlB,CAAzD,CAAiF,GAAG,CAAC,EAArF,EAVL,cAYI,oBAAC,KAAD,EAAO,OAAO,cAAE,8BAAQ,SAAS,CAAEvB,MAAM,CAACoC,UAA1B,kBAAhB,CAA8E,KAAK,KAAnF,CAAoF,YAAY,CAAEC,aAAlG,EACK,SAAAC,KAAK,qBAAI,oBAAC,WAAD,EAAa,KAAK,CAAEvB,KAApB,CAA2B,KAAK,CAAEuB,KAAlC,CAAyC,QAAQ,CAAEvB,KAAK,CAACwB,QAAzD,EAAJ,EADV,CAZJ,cAeI,yBAAG,SAAS,CAAEvC,MAAM,CAACwC,eAArB,6GAfJ,CADJ,CAmBH,EAED,QAASC,CAAAA,WAAT,CAAqB1B,KAArB,CAA2B,CACvB,oBAA4BhB,KAAK,CAAC2C,QAAN,CAAe,EAAf,CAA5B,oDAAKC,QAAL,qBAAeC,WAAf,qBACA,qBAA8B7C,KAAK,CAAC2C,QAAN,CAAe3B,KAAK,CAACA,KAAN,CAAYc,MAA3B,CAA9B,qDAAKgB,QAAL,qBAAeC,WAAf,qBACA,qBAA8B/C,KAAK,CAAC2C,QAAN,CAAe,IAAf,CAA9B,qDAAKK,QAAL,qBAAeC,WAAf,qBACA,qBAAkCjD,KAAK,CAAC2C,QAAN,CAAe,KAAf,CAAlC,qDAAKO,UAAL,qBAAiBC,aAAjB,qBACA,qBAAoCnD,KAAK,CAAC2C,QAAN,CAAe,CAAf,CAApC,sDAAKS,WAAL,sBAAkBC,cAAlB,sBACA,GAAIC,CAAAA,KAAJ,CACA,GAAIC,CAAAA,KAAJ,CACA,GAAIC,CAAAA,aAAJ,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvBC,OAAO,CAACC,GAAR,CAAYf,QAAZ,EACA,GAAMgB,CAAAA,WAAW,CAAE,QAAbA,CAAAA,WAAa,CAACC,IAAD,CAAQ,CACvB,GAAIA,IAAI,CAACC,IAAL,GAAc,SAAlB,CAA4B,CACxB,CAAC9C,KAAK,CAACwB,QAAN,GAAiB,CAClB/B,IAAI,CAAC,CACDsD,KAAK,CAAE,UADN,CAEDC,IAAI,CAAE,wCAFL,CAGDC,IAAI,CAAE,SAHL,CAIDC,MAAM,CAAE,IAJP,CAAD,CAAJ,CAMA,CAAClD,KAAK,CAACuB,KAAN,GAAc,CACf;AACH,CAVD,IAUM,IAAIsB,IAAI,CAACC,IAAL,GAAc,UAAlB,CAA6B,CAC/BJ,OAAO,CAACC,GAAR,CAAY,aAAeE,IAAI,CAACM,KAAhC,EACAhB,aAAa,CAAC,IAAD,CAAb,CACAE,cAAc,CAAC,IAAIQ,IAAI,CAACM,KAAV,CAAd,CACH,CACF,CAhBH,CAiBA5D,GAAG,CAAC6D,gBAAJ,CAAqBxB,QAArB,CAA+BgB,WAA/B,EACH,CApBD,CAsBA,GAAMS,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAClD,KAAD,CAAW,CAC/B,GAAIA,KAAK,CAAC2C,IAAN,GAAe,QAAnB,CAA4B,CACxBR,KAAK,CAAGnC,KAAK,CAACmD,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAR,CACA3B,QAAQ,CAAC,OAAD,CAAR,CAAoBU,KAApB,CACAP,WAAW,CAACyB,GAAG,CAACC,eAAJ,CAAoBtD,KAAK,CAACmD,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAApB,CAAD,CAAX,CACH,CACJ,CAND,CAOA,GAAMG,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACvD,KAAD,CAAW,CAC/BuC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACA,GAAIxC,KAAK,CAAC2C,IAAN,GAAe,QAAnB,CAA4B,CACxBP,KAAK,CAAGpC,KAAK,CAACmD,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAR,CACA3B,QAAQ,CAAC,OAAD,CAAR,CAAoBW,KAApB,CACAN,WAAW,CAACM,KAAD,CAAX,CACH,CACJ,CAPD,CAQA,GAAMoB,CAAAA,OAAO,CAAE,QAATA,CAAAA,OAAS,EAAK,CAChB,GAAG/C,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAqC,YAAxC,CAAqD,CACjD,mBACI,2BAAK,SAAS,CAAE5B,MAAM,CAAC2E,QAAvB,eACI,4BAAM,SAAS,CAAE3E,MAAM,CAAC4E,SAAxB,CAAmC,UAAU,KAA7C,CAA8C,YAAY,CAAC,KAA3D,eACI,2CADJ,cAEI,oBAAC,SAAD,EAAW,EAAE,CAAC,iBAAd,CAAgC,KAAK,CAAC,kBAAtC,CAAyD,OAAO,CAAEC,UAAlE,CAA8E,OAAO,CAAC,UAAtF,CAAiG,YAAY,CAAE9D,KAAK,CAACA,KAAN,CAAY+D,eAA3H,EAFJ,cAGI,oBAAC,SAAD,EAAW,EAAE,CAAC,cAAd,CAA6B,KAAK,CAAC,eAAnC,CAAmD,OAAO,CAAED,UAA5D,CAAwE,OAAO,CAAC,UAAhF,CAA2F,YAAY,CAAE9D,KAAK,CAACA,KAAN,CAAYgE,YAArH,EAHJ,CADJ,cAMI,2BAAM,SAAS,CAAE/E,MAAM,CAAC4E,SAAxB,eACI,uCADJ,cAEI,oBAAC,IAAD,EAAM,WAAW,CAAEjC,QAAnB,CAA6B,IAAI,CAAC,iBAAlC,CAAoD,QAAQ,CAAE5B,KAAK,CAACA,KAAN,CAAYiE,QAA1E,EAFJ,CANJ,CADJ,CAaH,CAdD,IAeI,CACA,MAAO,KAAP,CACH,CACJ,CAnBD,CAoBA,GAAMC,CAAAA,QAAQ,CAAC,QAATA,CAAAA,QAAS,EAAI,CACf,mBACI,oBAAC,iBAAD,MADJ,CAGH,CAJD,CAKA,GAAMJ,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAC3D,KAAD,CAAW,CAC1B,GAAIA,KAAK,CAACmD,MAAN,CAAaa,EAAb,GAAoB,WAApB,EAAmChE,KAAK,CAACmD,MAAN,CAAaH,KAAb,GAAuBvB,QAAQ,CAAClB,SAAvE,CAAiF,CAC7EkB,QAAQ,CAAClB,SAAT,CAAqBP,KAAK,CAACmD,MAAN,CAAaH,KAAlC,CACH,CACD,GAAIhD,KAAK,CAACmD,MAAN,CAAaa,EAAb,GAAoB,UAApB,EAAkChE,KAAK,CAACmD,MAAN,CAAaH,KAAb,GAAuBvB,QAAQ,CAACjB,QAAtE,CAA+E,CAC3EiB,QAAQ,CAACjB,QAAT,CAAoBR,KAAK,CAACmD,MAAN,CAAaH,KAAjC,CACH,CACD,GAAIhD,KAAK,CAACmD,MAAN,CAAaa,EAAb,GAAoB,iBAApB,EAAyChE,KAAK,CAACmD,MAAN,CAAaH,KAAb,GAAuBvB,QAAQ,CAACmC,eAA7E,CAA6F,CACzFnC,QAAQ,CAACmC,eAAT,CAA2B5D,KAAK,CAACmD,MAAN,CAAaH,KAAxC,CACH,CACD,GAAIhD,KAAK,CAACmD,MAAN,CAAaa,EAAb,GAAoB,cAApB,EAAsChE,KAAK,CAACmD,MAAN,CAAaH,KAAb,GAAuBvB,QAAQ,CAACoC,YAA1E,CAAuF,CACnFpC,QAAQ,CAACoC,YAAT,CAAwB7D,KAAK,CAACmD,MAAN,CAAaH,KAArC,CACH,CACD,GAAIhD,KAAK,CAACmD,MAAN,CAAaa,EAAb,GAAoB,UAApB,EAAkChE,KAAK,CAACmD,MAAN,CAAaH,KAAb,GAAuBvB,QAAQ,CAACwC,QAAtE,CAA+E,CAC3ExC,QAAQ,CAACwC,QAAT,CAAoBjE,KAAK,CAACmD,MAAN,CAAaH,KAAjC,CACH,CACD,GAAIhD,KAAK,CAACmD,MAAN,CAAaa,EAAb,GAAoB,YAApB,EAAoChE,KAAK,CAACmD,MAAN,CAAaH,KAAb,GAAuBvB,QAAQ,CAACyC,UAAxE,CAAmF,CAC/EzC,QAAQ,CAACyC,UAAT,CAAsBlE,KAAK,CAACmD,MAAN,CAAaH,KAAnC,CACH,CACJ,CAnBD,CAoBA,mBACI,2BAAK,SAAS,CAAElE,MAAM,CAACqF,GAAvB,eACI,oBAAC,iBAAD,EAAmB,KAAK,CAAE,CAAE/D,MAAM,CAAE,EAAV,CAAcC,KAAK,CAAE,EAArB,CAA1B,CAAqD,SAAS,CAAEvB,MAAM,CAACsF,KAAvE,CAA8E,OAAO,CAAEvE,KAAK,CAACuB,KAA7F,EADJ,cAEI,0BAAI,SAAS,CAAEtC,MAAM,CAACuF,WAAtB,iBAFJ,cAGI,2BAAK,SAAS,CAAEvF,MAAM,CAACwF,OAAvB,CAAgC,KAAK,CAAE,CAAClE,MAAM,CAAC,GAAR,CAAYC,KAAK,CAAC,GAAlB,CAAvC,eACI,2BAAK,GAAG,CAAEsB,QAAV,CAAoB,SAAS,CAAE7C,MAAM,CAACyF,OAAtC,CAA+C,KAAK,CAAE,CAACnE,MAAM,CAAC,GAAR,CAAYC,KAAK,CAAC,GAAlB,CAAtD,EADJ,cAEI,yBAAG,SAAS,CAAEvB,MAAM,CAAC0F,WAArB,2BAFJ,cAGI,6BAAO,SAAS,CAAE1F,MAAM,CAAC2F,iBAAzB,CAA4C,IAAI,CAAC,MAAjD,CAAwD,QAAQ,CAAEvB,eAAlE,CAAoF,MAAM,CAAC,SAA3F,EAHJ,CAHJ,CASMrB,QAAQ,EAAI,IAAZ,cACF,oBAAC,iBAAD,EAAmB,KAAK,CAAE,CAAC6C,SAAS,CAAE,QAAZ,CAA1B,eACI,yBAAG,KAAK,CAAE,CAACC,QAAQ,CAAC,UAAV,CAAV,qCADJ,cAEI,6BAAQ,SAAS,CAAE7F,MAAM,CAAC8F,kBAA1B,CAA8C,IAAI,CAAC,MAAnD,CAA0D,QAAQ,CAAErB,eAApE,CAAsF,MAAM,CAAC,SAA7F,EAFJ,CADE,cAKA,yBAAG,KAAK,CAAE,CAACsB,KAAK,CAAC,CAAP,CAAUH,SAAS,CAAE,QAArB,CAAV,YAAmD7C,QAAQ,CAACiD,IAA5D,KAdN,cAgBI,4BAAM,SAAS,CAAEhG,MAAM,CAAC4E,SAAxB,CAAmC,UAAU,KAA7C,CAA8C,YAAY,CAAC,KAA3D,eACI,2CADJ,cAEI,oBAAC,SAAD,EAAW,EAAE,CAAC,WAAd,CAA0B,KAAK,CAAC,YAAhC,CAA6C,OAAO,CAAEC,UAAtD,CAAkE,OAAO,CAAC,UAA1E,CAAqF,YAAY,CAAE9D,KAAK,CAACA,KAAN,CAAYU,SAA/G,EAFJ,cAGI,oBAAC,SAAD,EAAW,EAAE,CAAC,UAAd,CAAyB,KAAK,CAAC,WAA/B,CAA2C,OAAO,CAAEoD,UAApD,CAAgE,OAAO,CAAC,UAAxE,CAAmF,YAAY,CAAE9D,KAAK,CAACA,KAAN,CAAYW,QAA7G,EAHJ,CAhBJ,cAqBI,4BAAM,SAAS,CAAE1B,MAAM,CAAC4E,SAAxB,CAAmC,UAAU,KAA7C,CAA8C,YAAY,CAAC,KAA3D,eACI,gDADJ,cAEI,oBAAC,KAAD,EAAO,OAAO,cAAE,oBAAC,UAAD,2CAAhB,CAA6E,KAAK,KAAlF,CAAmF,YAAY,CAAEqB,aAAjG,EACK,SAAA3D,KAAK,qBAAG,oBAAC,iBAAD,EAAmB,KAAK,CAAEA,KAA1B,EAAH,EADV,CAFJ,CArBJ,cA2BI,oBAAC,OAAD,MA3BJ,cA4BI,2BAAM,SAAS,CAAEtC,MAAM,CAAC4E,SAAxB,eACI,0CADJ,cAEI,oBAAC,IAAD,EAAM,WAAW,CAAEjC,QAAnB,CAA6B,IAAI,CAAC,cAAlC,CAAiD,QAAQ,CAAE5B,KAAK,CAACA,KAAN,CAAYmF,SAAvE,EAFJ,CA5BJ,cAgCI,2BAAK,SAAS,CAAElG,MAAM,CAACmG,OAAvB,eACI,oBAAC,UAAD,EAAY,SAAS,CAAEnG,MAAM,CAACoG,IAA9B,CAAoC,OAAO,CAAErF,KAAK,CAACuB,KAAnD,WADJ,cAII,oBAAC,cAAD,EAAgB,SAAS,CAAEtC,MAAM,CAACqG,QAAlC,CAA4C,OAAO,CAAE7C,YAArD,eACI,yBAAG,SAAS,CAAExD,MAAM,CAACsG,YAArB,SADJ,CAJJ,CAhCJ,cAwCI,oBAAC,KAAD,EAAO,YAAY,CAAE,CAAC/E,KAAK,CAAC,SAAP,CAAkBgF,YAAY,CAAC,KAA/B,CAArB,CAA6D,IAAI,CAAEtD,UAAnE,CAA+E,KAAK,KAApF,CAAqF,oBAAoB,CAAE,KAA3G,EACK,SAAAX,KAAK,CAAI,CACN,mBACI,oBAAC,WAAD,EACI,MAAM,CAAE,GADZ,CAEI,QAAQ,CAAEa,WAFd,CAGI,WAAW,CAAE,EAHjB,CAII,WAAW,CAAC,SAJhB,CAKI,aAAa,CAAC,QALlB,CAMI,gBAAgB,CAAE,EANtB,eAQI,2BAAK,SAAS,CAAEnD,MAAM,CAACwG,SAAvB,eACI,+BAAMC,IAAI,CAACC,KAAL,CAAWvD,WAAX,CAAN,KADJ,CARJ,CADJ,CAcH,CAhBL,CAxCJ,CADJ,CA6DH,EAED,GAAMd,CAAAA,aAAa,CAAG,CAClBd,KAAK,CAAE,OADW,CAElBD,MAAM,CAAE,MAFU,CAGlBqF,UAAU,CAAE,SAHM,CAIlBJ,YAAY,CAAE,MAJI,CAAtB,CAMA,GAAMN,CAAAA,aAAa,CAAG,CAClB1E,KAAK,CAAE,OADW,CAElBD,MAAM,CAAE,MAFU,CAGlBqF,UAAU,CAAE,SAHM,CAIlBJ,YAAY,CAAE,MAJI,CAAtB,CAMA,GAAMK,CAAAA,cAAc,CAAGxG,UAAU,CAAC,SAACyG,KAAD,QAAY,CAC1CC,IAAI,CAAE,CACFP,YAAY,CAAC,EADX,CAEFQ,eAAe,CAAE,SAFf,CAGF,UAAW,CACXA,eAAe,CAAE,SADN,CAHT,CAMFC,UAAU,CAAE,EANV,CADoC,CAAZ,EAAD,CAAV,CASnB3G,MATmB,CAAvB,CAWA,GAAM4G,CAAAA,UAAU,CAAG7G,UAAU,CAAC,SAACyG,KAAD,QAAY,CACtCC,IAAI,CAAE,CACJP,YAAY,CAAC,EADT,CAEJQ,eAAe,CAAE,OAFb,CAGJG,MAAM,CAAE,YAHJ,CAIJ,UAAW,CACTA,MAAM,CAAE,mBADC,CAJP,CAOJF,UAAU,CAAE,EAPR,CADgC,CAAZ,EAAD,CAAV,CAUf3G,MAVe,CAAnB,CAYA,GAAM8G,CAAAA,UAAU,CAAG/G,UAAU,CAAC,SAACyG,KAAD,QAAY,CACtCC,IAAI,CAAE,CACFvF,KAAK,CAAC,OADJ,CAEFD,MAAM,CAAC,MAFL,CAGF8F,SAAS,CAAE,QAHT,CAIFC,WAAW,CAAE,MAJX,CAKFC,SAAS,CAAE,KALT,CAMFP,eAAe,CAAC,OANd,CAOFG,MAAM,CAAC,mBAPL,CAQF1F,MAAM,CAAE,SARN,CASF+E,YAAY,CAAE,KATZ,CAUF,UAAW,CACXQ,eAAe,CAAE,SADN,CAEXQ,KAAK,CAAC,OAFK,CAVT,CADgC,CAAZ,EAAD,CAAV,CAgBflH,MAhBe,CAAnB,CAkBA,GAAMmH,CAAAA,iBAAiB,CAAGpH,UAAU,CAAC,SAACyG,KAAD,QAAY,CAC7CC,IAAI,CAAE,CACFvF,KAAK,CAAC,OADJ,CAEFD,MAAM,CAAC,MAFL,CAGF8F,SAAS,CAAE,QAHT,CAIFrB,KAAK,CAAC,CAJJ,CAKF;AACAuB,SAAS,CAAE,KANT,CAOFG,YAAY,CAAE,KAPZ,CAQFC,OAAO,CAAE,CARP,CASFX,eAAe,CAAC,OATd,CAUFG,MAAM,CAAC,mBAVL,CAWF1F,MAAM,CAAE,SAXN,CAYF+E,YAAY,CAAE,KAZZ,CAaF,UAAW,CACXQ,eAAe,CAAE,SADN,CAEXQ,KAAK,CAAC,OAFK,CAbT,CADuC,CAAZ,EAAD,CAAV,CAmBtBlH,MAnBsB,CAA1B,CAoBA,cAAeS,CAAAA,OAAf","sourcesContent":["import React from 'react';\nimport styles from './profile.module.css';\nimport StarIcon from '@material-ui/icons/Star'; \nimport Popup from \"reactjs-popup\";\nimport CloseOutlinedIcon from '@material-ui/icons/CloseOutlined';\nimport { withStyles} from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport api from '../api/api';\nimport Hook from \"./searchHooks\";\nimport swal from 'sweetalert';\nimport TextField from '@material-ui/core/TextField';\nimport FormPasswordReset from './passwordForm';\nimport ProgressBar from 'react-customizable-progressbar'\nimport { useHistory} from 'react-router-dom';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\n\n\n\nfunction Profile (props) {\n    const history = useHistory();\n    const handleOnClick = (event) => {\n        event.preventDefault();\n        history.goBack()\n    }\n    return(\n        <div >\n            <h1 className={styles.header}><ArrowBackIcon  style={{height:25, width:50, cursor:\"pointer\"}} onClick={handleOnClick}/>{props.firstName} {props.lastName}</h1>\n            {localStorage.getItem('usertype') === 'Contractor' \n            ?<div>\n                <img src={props.avatar} className={styles.circle} style={{height:80,width:80}} alt=\"\"/>\n                <p className={styles.jobsdone}>{props.jobsdone}</p>\n                <p className={styles.rating}><StarIcon className={styles.Vector}/>{props.rating}</p>\n                <p className={styles.jobsdone2}>Jobs done</p>\n                <p className={styles.rating2}>Rating</p>\n            </div>\n            :<img src={props.avatar} className={styles.circle} style={{height:130,width:130}} alt=\"\"/>\n            }\n            <Popup trigger={<button className={styles.editbutton}> Edit Profile</button>} modal contentStyle={contentStyle2} >\n                {close => <EditProfile props={props} close={close} onChange={props.onChange}/>}\n            </Popup>\n            <p className={styles.downloadAppText}>Please download our app from here or browse from desktop to edit your profile and for better experience.</p>\n        </div>\n    )\n};\n\nfunction EditProfile(props){\n    let [clientId, setClientId]=React.useState({})\n    let [imageSrc, setImageSrc] = React.useState(props.props.avatar);\n    let [videoSrc, setVideoSrc] = React.useState(null);\n    let [progressOn, setProgressOn] = React.useState(false);\n    let [progressVal, setProgressVal] = React.useState(0);\n    let image;\n    let video;\n    let progressClose;\n\n    const handleSubmit = () => {\n        console.log(clientId)\n        const jobCallback= (data)=>{\n            if (data.type === 'SUCCESS'){\n                {props.onChange()}\n                swal({\n                    title: \"Updated!\",\n                    text: \"Profile has been successfully updated!\",\n                    icon: \"success\",\n                    button: \"OK\",\n                });\n                {props.close()}\n                // window.location.reload(false);\n            }else if (data.type === 'PROGRESS'){\n                console.log(\"PROGRESS: \" + data.value)\n                setProgressOn(true);\n                setProgressVal(100*data.value);\n            }\n          }\n        api.patchEditProfile(clientId, jobCallback)\n    }\n\n    const handlePicChange = (event) => {\n        if (event.type === \"change\"){\n            image = event.target.files[0];\n            clientId['image'] = image\n            setImageSrc(URL.createObjectURL(event.target.files[0]));\n        }\n    }\n    const handleVidChange = (event) => {\n        console.log('VIDEO')\n        if (event.type === \"change\"){\n            video = event.target.files[0];\n            clientId['video'] = video\n            setVideoSrc(video);\n        }\n    }\n    const Skillss= () =>{\n        if(localStorage.getItem(\"usertype\") === \"Contractor\"){\n            return(\n                <div className={styles.editName}>\n                    <form className={styles.editfName} noValidate autoComplete=\"off\">\n                        <p>Other info:</p>\n                        <TextField id=\"insuranceNumber\" label=\"Insurance Number\" onKeyUp={keyPressed} variant=\"outlined\" defaultValue={props.props.insuranceNumber}/>\n                        <TextField id=\"workerNumber\" label=\"Worker Number\" onKeyUp={keyPressed} variant=\"outlined\" defaultValue={props.props.workerNumber}/>\n                    </form>\n                    <div  className={styles.editfName}>\n                        <p>Skills:</p>\n                        <Hook information={clientId} type='serviceTypeList' selected={props.props.services}/> \n                    </div>\n                </div>\n            )\n        }\n        else{\n            return(null)\n        }\n    }\n    const Password=()=>{\n        return(\n            <FormPasswordReset />\n        )\n    }\n    const keyPressed = (event) => {\n        if (event.target.id === 'firstName' && event.target.value !== clientId.firstName){\n            clientId.firstName = event.target.value;\n        }\n        if (event.target.id === 'lastName' && event.target.value !== clientId.lastName){\n            clientId.lastName = event.target.value;\n        }\n        if (event.target.id === 'insuranceNumber' && event.target.value !== clientId.insuranceNumber){\n            clientId.insuranceNumber = event.target.value;\n        }\n        if (event.target.id === 'workerNumber' && event.target.value !== clientId.workerNumber){\n            clientId.workerNumber = event.target.value;\n        }\n        if (event.target.id === 'password' && event.target.value !== clientId.password){\n            clientId.password = event.target.value;\n        }\n        if (event.target.id === 'rePassword' && event.target.value !== clientId.rePassword){\n            clientId.rePassword = event.target.value;\n        }\n    }\n    return(\n        <box className={styles.box}>\n            <CloseOutlinedIcon style={{ height: 40, width: 40 }} className={styles.cross} onClick={props.close}/>\n            <h1 className={styles.editProfile}>Edit Profile</h1> \n            <div className={styles.circle3} style={{height:150,width:150}} >\n                <img src={imageSrc} className={styles.circle2} style={{height:150,width:150}}/>\n                <p className={styles.circle3text}>Change Profile Picture</p>\n                <input className={styles.profile_pic_input} type=\"file\" onChange={handlePicChange}  accept=\"image/*\" ></input>\n            </div>\n\n            { videoSrc == null ?\n            <UploadVideoButton style={{alignSelf: \"center\"}}>\n                <p style={{position:\"absolute\"}}>Click here to upload a new video</p>\n                <input  className={styles.video_upload_input} type=\"file\" onChange={handleVidChange}  accept=\"video/*\" />\n            </UploadVideoButton>\n            : <p style={{order:2, alignSelf: \"center\"}} >Video: {videoSrc.name} </p>\n            }\n            <form className={styles.editfName} noValidate autoComplete=\"off\">\n                <p>Basic Info:</p>\n                <TextField id=\"firstName\" label=\"First Name\" onKeyUp={keyPressed} variant=\"outlined\" defaultValue={props.props.firstName}/>\n                <TextField id=\"lastName\" label=\"Last Name\" onKeyUp={keyPressed} variant=\"outlined\" defaultValue={props.props.lastName}/>\n            </form>\n            <form className={styles.editfName} noValidate autoComplete=\"off\">\n                <p>Change Password:</p>\n                <Popup trigger={<FormButton>Click here to update your password</FormButton>} modal contentStyle={contentStyle3} >\n                    {close =><FormPasswordReset close={close}/>}\n                </Popup>\n            </form>\n            <Skillss/>\n            <div  className={styles.editfName}>\n                <p>Languages:</p>\n                <Hook information={clientId} type='languageList' selected={props.props.languages}/> \n            </div>\n            <div className={styles.buttons}>\n                <BackButton className={styles.back} onClick={props.close}> \n                    Cancel\n                </BackButton>\n                <CompleteButton className={styles.complete} onClick={handleSubmit} > \n                    <p className={styles.completeText}>Save</p>\n                </CompleteButton>\n            </div>\n            <Popup contentStyle={{width:\"inherit\", borderRadius:'50%' }} open={progressOn} modal closeOnDocumentClick={false} >\n                {close => {\n                    return(\n                        <ProgressBar\n                            radius={100}\n                            progress={progressVal}\n                            strokeWidth={18}\n                            strokeColor=\"#5d9cec\"\n                            strokeLinecap=\"square\"\n                            trackStrokeWidth={18}\n                        >\n                            <div className={styles.indicator}>\n                                <div>{Math.round(progressVal)}%</div>\n                            </div>\n                        </ProgressBar>\n                    )\n                }}\n            </Popup>\n        </box>\n    )\n};\n\nconst contentStyle2 = {\n    width: '702px',\n    height: 'auto',\n    background: '#fffFFF',\n    borderRadius: '16px', \n};\nconst contentStyle3 = {\n    width: '700px',\n    height: 'auto',\n    background: '#fffFFF',\n    borderRadius: '16px', \n};\nconst CompleteButton = withStyles((theme) => ({\n    root: {\n        borderRadius:44,\n        backgroundColor: '#2B64D2',\n        '&:hover': {\n        backgroundColor: '#003ba0',\n        },\n        marginLeft: 30,\n    },\n}))(Button);\n  \nconst BackButton = withStyles((theme) => ({\n    root: {\n      borderRadius:44,\n      backgroundColor: 'white',\n      border: '1px dotted',\n      '&:hover': {\n        border: \"2px solid #2B64D2\",\n      },\n      marginLeft: 80, \n    },\n}))(Button);\n\nconst FormButton = withStyles((theme) => ({\n    root: {\n        width:\"400px\",\n        height:\"40px\",\n        textAlign: \"center\",\n        marginRight: \"80px\",\n        marginTop: \"7px\",\n        backgroundColor:\"white\",\n        border:\"1px solid #2B64D2\",\n        cursor: \"pointer\",\n        borderRadius: \"5px\",\n        '&:hover': {\n        backgroundColor: \"#2B64D2\",\n        color:\"white\",\n      },\n    },\n}))(Button);\n\nconst UploadVideoButton = withStyles((theme) => ({\n    root: {\n        width:\"400px\",\n        height:\"40px\",\n        textAlign: \"center\",\n        order:2,\n        // marginRight: \"80px\",\n        marginTop: \"7px\",\n        marginBottom: \"7px\",\n        padding: 0,\n        backgroundColor:\"white\",\n        border:\"1px solid #2B64D2\",\n        cursor: \"pointer\",\n        borderRadius: \"5px\",\n        '&:hover': {\n        backgroundColor: \"#2B64D2\",\n        color:\"white\",\n      },\n    },\n}))(Button);\nexport default Profile;"]},"metadata":{},"sourceType":"module"}