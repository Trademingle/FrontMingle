{"ast":null,"code":"import React,{useEffect}from\"react\";import{useHistory}from'react-router-dom';import styles from'./notificationItem.module.css';import api from'../../api/api';import{makeStyles}from'@material-ui/core/styles';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import Divider from'@material-ui/core/Divider';import RecordIcon from'@material-ui/icons/FiberManualRecord';var useStyles=makeStyles(function(theme){return{root:{width:'100%',maxWidth:360,padding:'0px'}};});var NotificationItem=function NotificationItem(props){var classes=useStyles();var history=useHistory();var handleClick=function handleClick(){props.data.type='click';api.patchNotification(props.data).then(function(res){console.log('success');}).catch(function(err){return console.log(err);});props.close();onNotificationClick(props.data);};var handleSeen=function handleSeen(){props.data.type='seen';api.patchNotification(props.data).then(function(res){console.log('success');}).catch(function(err){return console.log(err);});};useEffect(function(){if(localStorage.getItem('usertype').toLowerCase()===\"contractor\"&&!(props.data.status&4)||localStorage.getItem('usertype').toLowerCase()===\"client\"&&!(props.data.status&2)){// This notification has not been seen \nhandleSeen();}},[]);var onNotificationClick=function onNotificationClick(data){switch(data.notificationType){case 1:history.push({pathname:'/completedposting/'+data.jobId});break;case 2:// code block\nhistory.push({pathname:'/activeposting/'+data.jobId});break;case 3:history.push({pathname:'/ContractorActiveJobs/active'});break;case 4:history.push({pathname:'/homeowneractivejobs/unassigned'});break;case 5:history.push({pathname:'/completedposting/'+data.jobId});break;default:break;// code block\n}};var isContractor=localStorage.getItem('usertype')==='Contractor';var text_truncate=function text_truncate(str){var length=80;if(str==null){str='';}if(str.length>length){return str.substring(0,length)+\"...\";}else{return str;}};var truncatedMessage=text_truncate(props.message);return/*#__PURE__*/React.createElement(List,{component:\"nav\",className:classes.root,\"aria-label\":\"mailbox folders\",onClick:handleClick},/*#__PURE__*/React.createElement(ListItem,{button:true},/*#__PURE__*/React.createElement(\"img\",{src:props.data.downloadUrl,className:styles.userPic,alt:\"\"}),isContractor&&props.data.status&8||!isContractor&&props.data.status&2?/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',width:'100%',flexDirection:'column'}},/*#__PURE__*/React.createElement(\"p\",{className:styles.notiftext,style:{color:'#7c7c7c'}},truncatedMessage),/*#__PURE__*/React.createElement(\"p\",{className:styles.date,style:{color:'#999999'}},props.date)):/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',width:'100%',flexDirection:'column'}},/*#__PURE__*/React.createElement(\"p\",{className:styles.notiftext},truncatedMessage),/*#__PURE__*/React.createElement(\"p\",{className:styles.date,style:{color:'#2B64D2'}},props.date)),isContractor&&props.data.status&8||!isContractor&&props.data.status&2?null:/*#__PURE__*/React.createElement(RecordIcon,{style:{color:'#2B64D2',fontSize:'15px'}})),/*#__PURE__*/React.createElement(Divider,null));};export default NotificationItem;","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/Notifications/NotificationItem/index.js"],"names":["React","useEffect","useHistory","styles","api","makeStyles","List","ListItem","Divider","RecordIcon","useStyles","theme","root","width","maxWidth","padding","NotificationItem","props","classes","history","handleClick","data","type","patchNotification","then","res","console","log","catch","err","close","onNotificationClick","handleSeen","localStorage","getItem","toLowerCase","status","notificationType","push","pathname","jobId","isContractor","text_truncate","str","length","substring","truncatedMessage","message","downloadUrl","userPic","display","flexDirection","notiftext","color","date","fontSize"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport {useHistory} from 'react-router-dom';\nimport styles from './notificationItem.module.css';\nimport api from '../../api/api';\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Divider from '@material-ui/core/Divider';\nimport RecordIcon from '@material-ui/icons/FiberManualRecord';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    padding:'0px',\n  },\n}));\n\nconst NotificationItem = (props) => {\n    const classes = useStyles();\n    const history = useHistory();\n    const handleClick = () => {\n      props.data.type = 'click'\n      api.patchNotification(props.data).then(res => {\n        console.log('success');\n      }).catch(err => console.log(err))\n      props.close() \n      onNotificationClick(props.data)\n    }\n\n    const handleSeen = () => {\n      props.data.type = 'seen'\n      api.patchNotification(props.data).then(res => {\n        console.log('success');\n      }).catch(err => console.log(err))\n    }\n\n\n    useEffect(() => {\n      if( (localStorage.getItem('usertype').toLowerCase()===\"contractor\" && !(props.data.status&4)) \n      || (localStorage.getItem('usertype').toLowerCase()===\"client\" && !(props.data.status&2))){ // This notification has not been seen \n        handleSeen();\n      }\n    }, []);\n\n    const onNotificationClick = (data) => {\n      switch(data.notificationType) {\n        case 1:\n          history.push({\n            pathname: '/completedposting/'+data.jobId\n          })\n          break;\n        case 2:\n          // code block\n          history.push({\n            pathname: '/activeposting/'+data.jobId\n          })\n          break;\n        case 3:\n          history.push({\n            pathname: '/ContractorActiveJobs/active'\n          })\n          break;\n        case 4:\n            history.push({\n              pathname: '/homeowneractivejobs/unassigned'\n            })\n            break;\n        case 5:\n            history.push({\n              pathname: '/completedposting/'+data.jobId\n            })\n            break;\n        default:\n          break;\n          // code block\n      }\n    }\n    const isContractor = localStorage.getItem('usertype') === 'Contractor'\n    const text_truncate = function(str) {\n      let length = 80;\n      if (str == null) {\n        str = '';\n      }\n      if (str.length > length) {\n        return str.substring(0, length ) + \"...\";\n      } else {\n        return str;\n      }\n    };\n    let truncatedMessage = text_truncate(props.message)\n    return (\n      <List component=\"nav\" className={classes.root} aria-label=\"mailbox folders\" onClick={handleClick}>\n        <ListItem button>\n          <img src={props.data.downloadUrl} className={styles.userPic} alt=\"\"/>\n            {(isContractor&&(props.data.status&8)) || (!isContractor&&(props.data.status&2)) ?\n              <div style={{display:'flex',width:'100%', flexDirection:'column'}}>\n                <p className={styles.notiftext} style={{color:'#7c7c7c'}}>{truncatedMessage}</p> \n                <p className={styles.date} style={{color: '#999999'}}>{props.date}</p>\n              </div>\n              :<div style={{display:'flex',width:'100%', flexDirection:'column'}}>\n                <p  className={styles.notiftext}>{truncatedMessage}</p> \n                <p className={styles.date} style={{color:'#2B64D2'}}>{props.date}</p>\n              </div>\n            }\n            { (isContractor&&(props.data.status&8)) || (!isContractor&&(props.data.status&2)) ?\n              null :\n              <RecordIcon style={{color:'#2B64D2', fontSize:'15px'}}/>\n            }\n        </ListItem>\n        <Divider />\n      </List>\n    );\n  };\n  \n  \nexport default NotificationItem;"]},"metadata":{},"sourceType":"module"}