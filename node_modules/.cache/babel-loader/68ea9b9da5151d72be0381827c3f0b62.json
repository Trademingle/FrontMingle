{"ast":null,"code":"import _slicedToArray from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import api from'../api/api';import styles from'../MyProfile/profile.module.css';import StarIcon from'@material-ui/icons/Star';import{makeStyles}from'@material-ui/core/styles';import InputLabel from'@material-ui/core/InputLabel';import MenuItem from'@material-ui/core/MenuItem';import FormHelperText from'@material-ui/core/FormHelperText';import FormControl from'@material-ui/core/FormControl';import Select from'@material-ui/core/Select';import swal from'sweetalert';import MessageButton from'../ResuableComponents/messageButton';import{useHistory}from'react-router-dom';import ArrowBackIcon from'@material-ui/icons/ArrowBack';var useStyles=makeStyles(function(theme){return{formControl:{margin:theme.spacing(1),minWidth:160,maxWidth:160},selectEmpty:{marginTop:theme.spacing(2)},buttonForm:{position:'absolute',margin:'20px 180px',cursor:'pointer',borderRadius:'2px',border:'1px solid #2b64d2','&:hover':{background:\"#2b64d2\",color:'white'}}};});function ProfileFormat(props){var history=useHistory();var handleOnClick=function handleOnClick(event){event.preventDefault();history.goBack();};var classes=useStyles();var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),jobsId=_React$useState2[0],setjobsId=_React$useState2[1];//for the assign form\nvar handleChange=function handleChange(event){setjobsId(event.target.value);};console.log(jobsId);//sending job id to backend\nvar data={};var handleOnSubmit=function handleOnSubmit(event){data.contractorId=props.id;data.id=jobsId;api.assignUnassignedJobs(data).then(function(res){swal({title:\"Assigned!\",text:\"Job has been assigned, please wait for contractor to accept!\",icon:\"success\",button:\"OK\"});}).catch(function(err){return console.log(err);});};//getting the unassigned jobs list\nvar userId=[];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),unassignedJobs=_useState2[0],setAllUnassignedJobs=_useState2[1];var getAllUnassignedJobs=function getAllUnassignedJobs(){api.getAllUnassignedJobs(userId).then(function(res){console.log(res);setAllUnassignedJobs(res.data);}).catch(function(err){return console.log(err);});};useEffect(function(){getAllUnassignedJobs();},[]);var renderUnassignedJobs=function renderUnassignedJobs(){var i=0;var unassignedJobCount=unassignedJobs.length;var tempJobs=[];while(i<unassignedJobCount){var unassignedJob=unassignedJobs[i];var jobTitle=unassignedJob.title;var jobId=unassignedJob.id;tempJobs.push(/*#__PURE__*/React.createElement(MenuItem,{value:jobId},jobTitle));i+=1;}return tempJobs;};//\nreturn/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{className:styles.header},/*#__PURE__*/React.createElement(ArrowBackIcon,{style:{height:25,width:50,cursor:\"pointer\"},onClick:handleOnClick}),props.name),/*#__PURE__*/React.createElement(\"div\",{style:{height:180}},/*#__PURE__*/React.createElement(\"img\",{src:props.avatar,className:styles.circle,style:{height:100,width:100}}),/*#__PURE__*/React.createElement(\"p\",{className:styles.jobsdone},props.jobsdone),/*#__PURE__*/React.createElement(\"p\",{className:styles.rating},/*#__PURE__*/React.createElement(StarIcon,{className:styles.Vector}),props.rating),/*#__PURE__*/React.createElement(\"p\",{className:styles.jobsdone2},\"Jobs done\"),/*#__PURE__*/React.createElement(\"p\",{className:styles.rating2},\"Rating\")),/*#__PURE__*/React.createElement(\"div\",{style:{height:80}},localStorage.getItem('usertype')==='Client'&&localStorage.getItem('access-token')?/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"inputLabel\"},\"Select Job\"),/*#__PURE__*/React.createElement(Select,{labelId:\"selectLabel\",id:\"assignForm\",value:jobsId,onChange:handleChange},/*#__PURE__*/React.createElement(MenuItem,{value:\"\"},/*#__PURE__*/React.createElement(\"em\",null,\"None\")),renderUnassignedJobs()),/*#__PURE__*/React.createElement(FormHelperText,null,\"Assign Job to this Contractor\"),/*#__PURE__*/React.createElement(\"button\",{onClick:handleOnSubmit,className:classes.buttonForm,style:{height:30,width:120}},\"Assign\")):null),/*#__PURE__*/React.createElement(\"div\",{className:styles.message},/*#__PURE__*/React.createElement(MessageButton,{name:props.name,contractorId:props.id})));};// function AssignForm() {\n//     return(\n//     )\n// }\n// console.log(AssignForm)\nexport default ProfileFormat;","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/ProfileView/profile.js"],"names":["React","useEffect","useState","api","styles","StarIcon","makeStyles","InputLabel","MenuItem","FormHelperText","FormControl","Select","swal","MessageButton","useHistory","ArrowBackIcon","useStyles","theme","formControl","margin","spacing","minWidth","maxWidth","selectEmpty","marginTop","buttonForm","position","cursor","borderRadius","border","background","color","ProfileFormat","props","history","handleOnClick","event","preventDefault","goBack","classes","jobsId","setjobsId","handleChange","target","value","console","log","data","handleOnSubmit","contractorId","id","assignUnassignedJobs","then","res","title","text","icon","button","catch","err","userId","unassignedJobs","setAllUnassignedJobs","getAllUnassignedJobs","renderUnassignedJobs","i","unassignedJobCount","length","tempJobs","unassignedJob","jobTitle","jobId","push","header","height","width","name","avatar","circle","jobsdone","rating","Vector","jobsdone2","rating2","localStorage","getItem","message"],"mappings":"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","sourcesContent":["import React, { useEffect, useState} from 'react';\nimport api from '../api/api';\nimport styles from '../MyProfile/profile.module.css';\nimport StarIcon from '@material-ui/icons/Star'; \nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport swal from 'sweetalert';\nimport MessageButton from '../ResuableComponents/messageButton';\nimport { useHistory} from 'react-router-dom';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\n\nconst useStyles = makeStyles((theme) => ({\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 160,\n      maxWidth:160,\n    },\n    selectEmpty: {\n      marginTop: theme.spacing(2),\n    },\n    buttonForm:{\n        position:'absolute',\n        margin: '20px 180px',\n        cursor:'pointer',\n        borderRadius:'2px',\n        border: '1px solid #2b64d2',\n        '&:hover': {\n            background: \"#2b64d2\",\n            color: 'white',\n        },\n    },\n\n  }));\nfunction ProfileFormat (props) {\n    const history = useHistory();\n    const handleOnClick = (event) => {\n        event.preventDefault();\n        history.goBack()\n    }\n    const classes = useStyles();\n    const [jobsId, setjobsId] = React.useState('');\n    //for the assign form\n    const handleChange = (event) => {\n        setjobsId(event.target.value);\n    };\n    console.log(jobsId)\n    //sending job id to backend\n    var data={}\n    const handleOnSubmit = (event) =>{\n        data.contractorId= props.id\n        data.id= jobsId\n        api.assignUnassignedJobs(data).then(res => {\n            swal({\n                title: \"Assigned!\",\n                text: \"Job has been assigned, please wait for contractor to accept!\",\n                icon: \"success\",\n                button: \"OK\",\n              });\n        }).catch(err => console.log(err))\n    }\n\n    //getting the unassigned jobs list\n    let userId=[]\n    const [unassignedJobs, setAllUnassignedJobs] = useState({});\n    const getAllUnassignedJobs = () => {\n        api.getAllUnassignedJobs(userId).then(res => {\n            console.log(res)\n            setAllUnassignedJobs(res.data);\n        }).catch(err => console.log(err))\n    }\n    useEffect(() => {\n        getAllUnassignedJobs();\n    },[]);\n    const renderUnassignedJobs = () => {\n        let i = 0;\n        let unassignedJobCount = unassignedJobs.length;\n        let tempJobs = [];\n        while (i < unassignedJobCount) {\n            let unassignedJob = unassignedJobs[i]\n            let jobTitle = unassignedJob.title\n            let jobId = unassignedJob.id\n            tempJobs.push(\n                <MenuItem value={jobId}>{jobTitle}</MenuItem>\n            );\n\n            i += 1;\n        }\n        return tempJobs;\n    };\n    //\n    return(\n        <div>\n            <h1 className={styles.header}><ArrowBackIcon style={{height:25, width:50, cursor:\"pointer\"}} onClick={handleOnClick}/>{props.name}</h1>\n            <div style={{height:180}}>\n                <img src={props.avatar} className={styles.circle} style={{height:100,width:100}}/>\n                <p className={styles.jobsdone}>{props.jobsdone}</p>\n                <p className={styles.rating}><StarIcon className={styles.Vector}/>{props.rating}</p>\n                <p className={styles.jobsdone2}>Jobs done</p>\n                <p className={styles.rating2}>Rating</p>\n            </div>\n            <div style={{ height:80}}>\n                {localStorage.getItem('usertype') === 'Client' && localStorage.getItem('access-token')?\n                <FormControl className={classes.formControl}>\n                    <InputLabel id=\"inputLabel\">Select Job</InputLabel>\n                    <Select\n                        labelId=\"selectLabel\"\n                        id=\"assignForm\"\n                        value={jobsId}\n                        onChange={handleChange}\n                        >\n                        <MenuItem value=\"\">\n                            <em>None</em>\n                        </MenuItem>\n                        {renderUnassignedJobs()}\n                        {/* <MenuItem value={10}>Ten</MenuItem>*/}\n                    </Select>\n                    <FormHelperText>Assign Job to this Contractor</FormHelperText>\n                    <button onClick={handleOnSubmit} className={classes.buttonForm} style={{height:30, width:120}}>Assign</button>\n                </FormControl>\n                :null}\n            </div>\n            <div className={styles.message}><MessageButton name={props.name} contractorId={props.id}/></div>\n        </div>\n    )\n};\n\n// function AssignForm() {\n\n//     return(\n\n//     )\n// }\n// console.log(AssignForm)\n\nexport default ProfileFormat;"]},"metadata":{},"sourceType":"module"}