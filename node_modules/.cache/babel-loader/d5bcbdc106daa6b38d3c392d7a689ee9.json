{"ast":null,"code":"import _slicedToArray from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link,useHistory}from'react-router-dom';import styles from'./nav.module.css';import Popup from\"reactjs-popup\";import SignUpPage from'../SignUp';import SignIn from'../Login';import api from'../api/api';import SupervisorAccountIcon from'@material-ui/icons/SupervisorAccount';import MailOutlineIcon from'@material-ui/icons/MailOutline';import SearchIcon from'@material-ui/icons/Search';import NotificationsIcon from'@material-ui/icons/Notifications';import AccountBoxIcon from'@material-ui/icons/AccountBox';import ExitToAppIcon from'@material-ui/icons/ExitToApp';import Badge from'@material-ui/core/Badge';import NotificationMenu from'../Notifications/NotificationMenu';// import { SwitchVideo } from '@material-ui/icons';\nimport LoadingView from'../ResuableComponents/loadingView';export default function NavBar(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),open1=_useState6[0],setOpen1=_useState6[1];var history=useHistory();var handleOnSubmit=function handleOnSubmit(event){setLoading(true);api.signOut();setLoading(false);history.replace({pathname:'/landing'});window.location.reload(false);};var profileId={};profileId['id']=localStorage.getItem('user_id');var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),profiles=_useState8[0],setProfiles=_useState8[1];var getProfiles=function getProfiles(){api.getProfiles(profileId).then(function(res){setProfiles(res.data);var tempList=res.data.savedJobList;localStorage.setItem('savedJobList',tempList);localStorage.setItem('defaultLanguageList',res.data.languageList);}).catch(function(err){return console.log(err);});};var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),notifications=_useState10[0],setNotifications=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),badgeContent=_useState12[0],setBadgeContent=_useState12[1];var getNotification=function getNotification(){api.getNotification().then(function(res){setNotifications(res.data['notifications']);console.log(\"Notification loaded successfully\");console.log(res);for(var idx in res.data['notifications']){if((res.data['notifications'][idx].status&5)==0){setBadgeContent(1);}}}).catch(function(err){return console.log(err);});};useEffect(function(){getProfiles();if(localStorage.getItem('access-token')){getNotification();}},[]);// let rating = profiles.averageRating\n// let jobsDone = profiles.jobsCompleted\nvar text_truncate=function text_truncate(str){var length=12;if(str==null){str='';}if(str.length>length){return str.substring(0,length)+\"...\";}else{return str;}};var contractorName=text_truncate(profiles.firstName);if(loading){return/*#__PURE__*/React.createElement(LoadingView,null);}return/*#__PURE__*/React.createElement(\"nav\",{className:styles.navbar},/*#__PURE__*/React.createElement(\"div\",null,localStorage.getItem('access-token')&&localStorage.getItem('usertype')==='Contractor'?/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(Link,{to:\"/contractorexplore\",className:styles.booktrades},\"Trademingle\"),/*#__PURE__*/React.createElement(\"div\",{className:styles.frame},/*#__PURE__*/React.createElement(Popup,{trigger:/*#__PURE__*/React.createElement(Badge,{className:styles.notificationsBadge,badgeContent:badgeContent,color:\"secondary\",overlap:\"circle\",variant:\"dot\"},/*#__PURE__*/React.createElement(NotificationsIcon,{className:styles.notificationsIcon,style:{fontSize:30},color:\"primary\"})),modal:true,contentStyle:contentStyle3,onClose:function onClose(){setBadgeContent(0);}},function(close){return/*#__PURE__*/React.createElement(NotificationMenu,{notifications:notifications,close:close});}),/*#__PURE__*/React.createElement(\"box\",{className:styles.boxTwo},/*#__PURE__*/React.createElement(\"div\",{className:styles.dropdown},/*#__PURE__*/React.createElement(Link,{className:styles.dropbtn,to:\"/myprofile\"},/*#__PURE__*/React.createElement(\"img\",{src:profiles.downloadurl,className:styles.profileImg,alt:\"\"}),/*#__PURE__*/React.createElement(\"p\",{className:styles.dropbtntext},contractorName)),/*#__PURE__*/React.createElement(\"div\",{className:styles.dropdownContent},/*#__PURE__*/React.createElement(Link,{className:styles.dropButton,to:\"/myprofile\"},/*#__PURE__*/React.createElement(AccountBoxIcon,{className:styles.accountBoxIcon,style:{fontSize:25}}),\"My Profile\"),/*#__PURE__*/React.createElement(Link,{className:styles.dropButton,href:\"/Landing\",onClick:handleOnSubmit},/*#__PURE__*/React.createElement(ExitToAppIcon,{className:styles.accountBoxIcon,style:{fontSize:25}}),\"Sign Out\")))),/*#__PURE__*/React.createElement(Link,{to:\"/contractorexplore\",className:styles.boxOne},/*#__PURE__*/React.createElement(\"p\",{className:styles.iconText},\"Find Jobs\"),/*#__PURE__*/React.createElement(SearchIcon,{className:styles.searchIcon,style:{fontSize:20}})),/*#__PURE__*/React.createElement(Link,{to:\"/InboxPage\",className:styles.boxOne},/*#__PURE__*/React.createElement(\"p\",{className:styles.iconText},\"Inbox\"),/*#__PURE__*/React.createElement(MailOutlineIcon,{className:styles.searchIcon,style:{fontSize:20}})),/*#__PURE__*/React.createElement(Link,{to:\"/contractoractivejobs\",className:styles.boxOne},/*#__PURE__*/React.createElement(\"p\",{className:styles.iconText},\" Jobs\"),/*#__PURE__*/React.createElement(SupervisorAccountIcon,{className:styles.searchIcon,style:{fontSize:20}})))):localStorage.getItem('access-token')&&localStorage.getItem('usertype')==='Client'?/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(Link,{to:\"/homeownerexplore\",className:styles.booktrades},\"Trademingle\"),/*#__PURE__*/React.createElement(\"div\",{className:styles.frame},/*#__PURE__*/React.createElement(Popup,{trigger:/*#__PURE__*/React.createElement(Badge,{className:styles.notificationsBadge,badgeContent:badgeContent,color:\"secondary\",overlap:\"circle\",variant:\"dot\"},/*#__PURE__*/React.createElement(NotificationsIcon,{className:styles.notificationsIcon,style:{fontSize:30},color:\"primary\"})),modal:true,contentStyle:contentStyle3,onClose:function onClose(){setBadgeContent(0);}},function(close){return/*#__PURE__*/React.createElement(NotificationMenu,{notifications:notifications,close:close});}),/*#__PURE__*/React.createElement(\"box\",{className:styles.boxTwo},/*#__PURE__*/React.createElement(\"div\",{className:styles.dropdown},/*#__PURE__*/React.createElement(Link,{className:styles.dropbtn,to:\"/myprofile\"},/*#__PURE__*/React.createElement(\"img\",{src:profiles.downloadurl,className:styles.profileImg,alt:\"\"}),/*#__PURE__*/React.createElement(\"p\",{className:styles.dropbtntext},contractorName)),/*#__PURE__*/React.createElement(\"div\",{className:styles.dropdownContent},/*#__PURE__*/React.createElement(Link,{to:\"/myprofile\"},/*#__PURE__*/React.createElement(AccountBoxIcon,{className:styles.accountBoxIcon}),\"My Profile\"),/*#__PURE__*/React.createElement(Link,{className:styles.dropButton,to:\"/Landing\",onClick:handleOnSubmit},/*#__PURE__*/React.createElement(ExitToAppIcon,{className:styles.accountBoxIcon}),\"Sign Out\")))),/*#__PURE__*/React.createElement(Link,{to:\"/homeownerexplore\",className:styles.boxOne},/*#__PURE__*/React.createElement(\"p\",{className:styles.iconText},\"Find Contractors\"),/*#__PURE__*/React.createElement(SearchIcon,{className:styles.searchIcon,style:{fontSize:20}})),/*#__PURE__*/React.createElement(Link,{to:\"/InboxPage\",className:styles.boxOne},/*#__PURE__*/React.createElement(\"p\",{className:styles.iconText},\"Inbox\"),/*#__PURE__*/React.createElement(MailOutlineIcon,{className:styles.searchIcon,style:{fontSize:20}})),/*#__PURE__*/React.createElement(Link,{to:\"/homeowneractivejobs\",className:styles.boxOne},/*#__PURE__*/React.createElement(\"p\",{className:styles.iconText},\"Jobs\"),/*#__PURE__*/React.createElement(SupervisorAccountIcon,{className:styles.searchIcon,style:{fontSize:20}})))):/*#__PURE__*/React.createElement(\"nav\",{className:styles.navbar},/*#__PURE__*/React.createElement(Link,{to:\"/landing\",className:styles.booktrades},\"Trademingle\"),/*#__PURE__*/React.createElement(\"div\",{className:styles.frame}))));}var contentStyle3={width:'400px',height:'680px',background:'#FFFFFF',borderRadius:'16px'};","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/Navigation/index.js"],"names":["React","useEffect","useState","Link","useHistory","styles","Popup","SignUpPage","SignIn","api","SupervisorAccountIcon","MailOutlineIcon","SearchIcon","NotificationsIcon","AccountBoxIcon","ExitToAppIcon","Badge","NotificationMenu","LoadingView","NavBar","loading","setLoading","open","setOpen","open1","setOpen1","history","handleOnSubmit","event","signOut","replace","pathname","window","location","reload","profileId","localStorage","getItem","profiles","setProfiles","getProfiles","then","res","data","tempList","savedJobList","setItem","languageList","catch","err","console","log","notifications","setNotifications","badgeContent","setBadgeContent","getNotification","idx","status","text_truncate","str","length","substring","contractorName","firstName","navbar","booktrades","frame","notificationsBadge","notificationsIcon","fontSize","contentStyle3","close","boxTwo","dropdown","dropbtn","downloadurl","profileImg","dropbtntext","dropdownContent","dropButton","accountBoxIcon","boxOne","iconText","searchIcon","width","height","background","borderRadius"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { Link , useHistory} from 'react-router-dom';\nimport styles from './nav.module.css';\nimport Popup from \"reactjs-popup\";\nimport SignUpPage from '../SignUp';\nimport SignIn from '../Login'; \nimport api from '../api/api';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport MailOutlineIcon from '@material-ui/icons/MailOutline';\nimport SearchIcon from '@material-ui/icons/Search';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport AccountBoxIcon from '@material-ui/icons/AccountBox';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport Badge from '@material-ui/core/Badge';\nimport NotificationMenu from '../Notifications/NotificationMenu';\n// import { SwitchVideo } from '@material-ui/icons';\nimport LoadingView from '../ResuableComponents/loadingView';\n\nexport default function NavBar() {\n  const [loading, setLoading] = useState(false);\n  const [open, setOpen] = useState(false);\n  const [open1, setOpen1] = useState(false);\n  const history = useHistory();\n  const handleOnSubmit = (event) => {\n    setLoading(true)\n    api.signOut()\n    setLoading(false)\n    history.replace({\n      pathname: '/landing',\n    });\n    window.location.reload(false)\n    };\n\n    var profileId = {};\n    profileId['id'] = localStorage.getItem('user_id');\n    const [profiles, setProfiles] = useState([]);\n    const getProfiles = () => {\n        api.getProfiles(profileId).then(res => {\n            setProfiles(res.data);\n            let tempList = res.data.savedJobList\n            localStorage.setItem('savedJobList', tempList);\n            localStorage.setItem('defaultLanguageList', res.data.languageList);\n        }).catch(err => console.log(err))\n    }\n\n    const [notifications, setNotifications] = useState([]);\n    const [badgeContent, setBadgeContent] = useState(0);\n\n    const getNotification = () => {\n      api.getNotification().then(res => {\n        setNotifications(res.data['notifications']); \n        console.log(\"Notification loaded successfully\");\n        console.log(res)\n        for (const idx in res.data['notifications']){\n          if((res.data['notifications'][idx].status&5) == 0){\n            setBadgeContent(1)\n          }\n        }\n      }).catch(err => console.log(err))\n    }\n\n    \n    useEffect(() => {\n        getProfiles();\n        if ( localStorage.getItem('access-token') ){\n          getNotification();\n        }\n    },[]);\n\n      // let rating = profiles.averageRating\n      // let jobsDone = profiles.jobsCompleted\n    const text_truncate = function(str) {\n      let length = 12;\n      if (str == null) {\n        str = '';\n      }\n      if (str.length > length) {\n        return str.substring(0, length ) + \"...\";\n      } else {\n        return str;\n      }\n    };\n    let contractorName = text_truncate(profiles.firstName)\n\n    if (loading) {\n      return <LoadingView/>;\n    }\n      \n    return (\n      <nav className={styles.navbar}>\n        <div>\n          {localStorage.getItem('access-token') && localStorage.getItem('usertype') === 'Contractor' \n          ? <nav>\n          <Link to='/contractorexplore' className={styles.booktrades}>Trademingle</Link>\n          <div className={styles.frame}>\n            <Popup \n            trigger={\n                    <Badge className={styles.notificationsBadge}  badgeContent={badgeContent} color=\"secondary\" overlap=\"circle\" variant=\"dot\">\n                      < NotificationsIcon className={styles.notificationsIcon} style={{ fontSize: 30 }} color=\"primary\" />\n                    </Badge>\n                    } \n            modal \n            contentStyle={contentStyle3}\n            onClose={()=>{\n              setBadgeContent(0);\n            }}>\n                {close => <NotificationMenu notifications={notifications} close={close} />}\n            </Popup>\n            <box  className={styles.boxTwo}>\n              <div className={styles.dropdown}>\n                <Link className={styles.dropbtn} to=\"/myprofile\">\n                  <img src={profiles.downloadurl} className={styles.profileImg} alt=\"\"/> \n                  <p className={styles.dropbtntext}>{contractorName}</p>\n                </Link> \n                <div className={styles.dropdownContent}>\n                  <Link className={styles.dropButton} to=\"/myprofile\"> \n                    <AccountBoxIcon className={styles.accountBoxIcon} style={{ fontSize: 25}}/>\n                    My Profile\n                  </Link>\n                  <Link className={styles.dropButton} href='/Landing' onClick={handleOnSubmit}>\n                    <ExitToAppIcon className={styles.accountBoxIcon} style={{ fontSize: 25}}/>\n                    Sign Out</Link>\n                </div>\n              </div>\n            </box>\n            <Link to='/contractorexplore' className={styles.boxOne}>\n            <p className={styles.iconText}>Find Jobs</p>\n            < SearchIcon className={styles.searchIcon} style={{ fontSize: 20 }} />\n            </Link>\n            <Link to='/InboxPage' className={styles.boxOne}>\n            <p className={styles.iconText}>Inbox</p>\n            < MailOutlineIcon className={styles.searchIcon} style={{ fontSize: 20 }} />\n            </Link>\n            <Link to='/contractoractivejobs' className={styles.boxOne}>\n            <p className={styles.iconText}> Jobs</p>\n            < SupervisorAccountIcon className={styles.searchIcon} style={{ fontSize: 20 }} />\n            </Link>\n            {/* <Link to='/' className={styles.boxOne}>\n              Calendar \n            </Link>\n            <CalendarTodayIcon className={styles.calendarIcon} style={{ fontSize: 20 }} />\n            <Link to='/' className={styles.boxOne} >\n              Bulletin Board\n            </Link>\n            <AppsIcon className={styles.boardIcon} style={{ fontSize: 20 }} />            */}\n        </div>\n      </nav>\n      : localStorage.getItem('access-token') && localStorage.getItem('usertype') === 'Client'\n      ? <nav>\n        <Link to='/homeownerexplore' className={styles.booktrades}>Trademingle</Link>\n        <div className={styles.frame}>\n            <Popup \n              trigger={\n                      <Badge className={styles.notificationsBadge}  badgeContent={badgeContent} color=\"secondary\" overlap=\"circle\" variant=\"dot\">\n                        < NotificationsIcon className={styles.notificationsIcon} style={{ fontSize: 30 }} color=\"primary\" />\n                      </Badge>\n                      } \n              modal \n              contentStyle={contentStyle3}\n              onClose={()=>{\n                setBadgeContent(0);\n              }}>\n                  {close => <NotificationMenu notifications={notifications} close={close} />}\n            </Popup>\n          <box className={styles.boxTwo} > \n            <div className={styles.dropdown}>\n                <Link className={styles.dropbtn} to=\"/myprofile\">\n                  <img src={profiles.downloadurl} className={styles.profileImg} alt=\"\"/> \n                  <p className={styles.dropbtntext}>{contractorName}</p>\n                </Link> \n              <div className={styles.dropdownContent}>\n                <Link to=\"/myprofile\"><AccountBoxIcon className={styles.accountBoxIcon}/>My Profile</Link>\n                {/* <hr className={styles.dropLine}/> */}\n                <Link className={styles.dropButton} to='/Landing' onClick={handleOnSubmit}>< ExitToAppIcon className={styles.accountBoxIcon}/>Sign Out</Link>\n              </div>\n            </div>\n          </box>\n          <Link to='/homeownerexplore' className={styles.boxOne}>\n            <p className={styles.iconText}>Find Contractors</p>\n            < SearchIcon className={styles.searchIcon} style={{ fontSize: 20 }} />\n          </Link>\n          <Link to='/InboxPage' className={styles.boxOne}>\n          <p className={styles.iconText}>Inbox</p>\n            < MailOutlineIcon className={styles.searchIcon} style={{ fontSize: 20 }} />\n          </Link>\n          <Link to='/homeowneractivejobs' className={styles.boxOne}>\n          <p className={styles.iconText}>Jobs</p>\n            < SupervisorAccountIcon className={styles.searchIcon} style={{ fontSize: 20 }} />\n          </Link>\n          {/* <Link to='/' className={styles.boxOne}>\n            Calendar \n          </Link>\n          <CalendarTodayIcon className={styles.calendarIcon} style={{ fontSize: 20 }} />\n          <Link to='/' className={styles.boxOne} >\n            Bulletin Board\n          </Link>\n          <AppsIcon className={styles.boardIcon} style={{ fontSize: 20 }} />    */}       \n        </div>\n    </nav>\n        : <nav className={styles.navbar}>\n          <Link to='/landing' className={styles.booktrades}>Trademingle</Link>\n          <div className={styles.frame}>\n              {/* <p className={styles.boxThree} onClick={()=>setOpen1(true)}> Sign up</p>\n              <p className={styles.boxOne} onClick={()=>setOpen(true)}> Log in</p> */}\n          </div>\n          </nav> } \n          {/* <SignIn setOpen={setOpen} open={open}/>\n          <SignUpPage setOpen={setOpen1} open={open1}/> */}\n      </div>\n    </nav>\n  );\n}\n\nconst contentStyle3 = {\n  width: '400px',\n  height: '680px',\n  background: '#FFFFFF',\n  borderRadius: '16px', \n};\n\n"]},"metadata":{},"sourceType":"module"}