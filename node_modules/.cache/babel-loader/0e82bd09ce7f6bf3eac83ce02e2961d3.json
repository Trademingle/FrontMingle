{"ast":null,"code":"import _slicedToArray from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import styles from'./profile.module.css';import VerifiedUserIcon from'@material-ui/icons/VerifiedUser';import styles2 from'../ContractorActiveJobsPage/styles.module.css';import{Grid}from'@material-ui/core';import ReviewCard from'../ProfileView/reviews';import api from'../api/api';import Profile from'./profile.js';import LoadingView from'../ResuableComponents/loadingView';var Cprofile=function Cprofile(props){function onChange(){getProfiles();}var profileId={};profileId['id']=localStorage.getItem('user_id');var _useState=useState({serviceTypeList:[],languageList:[]}),_useState2=_slicedToArray(_useState,2),profiles=_useState2[0],setProfiles=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var getProfiles=function getProfiles(){api.getProfiles(profileId).then(function(res){console.log(\"Profile loaded successfully\");console.log(res);setProfiles(res.data);setLoading(false);}).catch(function(err){console.log(err);setLoading(false);});};useEffect(function(){setLoading(true);getProfiles();},[]);var renderTags=function renderTags(){if(localStorage.getItem(\"usertype\")===\"Client\"){return null;}else{var i=0;var services=profiles.serviceTypeList;var tagsCount=services.length;var tempTags=[];while(i<tagsCount){tempTags.push(/*#__PURE__*/React.createElement(Tags,{className:styles2.tag,tagname:services[i]}));i+=1;};return tempTags;}};var renderSkills=function renderSkills(){if(localStorage.getItem(\"usertype\")===\"Client\"){return null;}else{return\"Skills\";}};var renderProfiles=function renderProfiles(){var firstName=profiles.firstName;var lastName=profiles.lastName;var rating=profiles.averageRating;var jobsDone=profiles.jobsCompleted;var services=profiles.serviceTypeList;var languages=profiles.languageList;return/*#__PURE__*/React.createElement(Profile,{onChange:onChange,avatar:profiles.downloadurl,firstName:firstName,lastName:lastName,rating:rating,jobsdone:jobsDone,insuranceNumber:profiles.insuranceNumber,isInsuranceNumberVerified:profiles.isInsuranceNumberVerified,isWorkerNumberVerified:profiles.isWorkerNumberVerified,workerNumber:profiles.workerNumber,services:services,languages:languages});};var languages=profiles.languageList.join(', ');//Contractor reviews endpoit connect below\nvar _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),contractorReview=_useState6[0],setContractorReview=_useState6[1];var getContractorReview=function getContractorReview(){api.getContractorReview(profileId).then(function(res){console.log(\"Review loaded successfully\");console.log(res);setContractorReview(res.data);}).catch(function(err){return console.log(err);});};useEffect(function(){getContractorReview();},[]);var renderReviews=function renderReviews(){var i=0;var reviewsCount=contractorReview.length;var tempJobs=[];while(i<reviewsCount){var review=contractorReview[i];var title=review.clientFirstName+\" \"+review.clientLastName;var reviewDate=review.reviewDate;var reviewBody=review.reviewContent;var reviewTitle=review.reviewTitle;var reviewRating=review.reviewRating;tempJobs.push(/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:4},/*#__PURE__*/React.createElement(ReviewCard,{reviewRating:reviewRating,clientId:review.clientId,greviewTitle:reviewTitle,title:title,subheader:reviewDate,body:reviewBody})));i+=1;}return tempJobs;};if(loading){return/*#__PURE__*/React.createElement(LoadingView,null);}return/*#__PURE__*/React.createElement(\"div\",{className:styles.biggyBox},/*#__PURE__*/React.createElement(\"div\",{className:styles.secondBigBox},/*#__PURE__*/React.createElement(\"div\",{className:styles.profilebox},renderProfiles()),/*#__PURE__*/React.createElement(\"div\",{className:styles.mustHide},profiles.isInsuranceNumberVerified===true&&localStorage.getItem('usertype')==='Contractor'?/*#__PURE__*/React.createElement(\"p\",{className:styles.liability},/*#__PURE__*/React.createElement(VerifiedUserIcon,{className:styles.Vector,style:{height:20}}),\"Liability insurance no: \",profiles.insuranceNumber):profiles.isInsuranceNumberVerified===false&&localStorage.getItem('usertype')==='Contractor'?/*#__PURE__*/React.createElement(\"p\",{className:styles.liability},\"Liability insurance no: \",profiles.insuranceNumber):null,profiles.isWorkerNumberVerified===true&&localStorage.getItem('usertype')==='Contractor'?/*#__PURE__*/React.createElement(\"p\",{className:styles.workercompensation},/*#__PURE__*/React.createElement(VerifiedUserIcon,{className:styles.Vector,style:{height:20}}),\"Worker compensation insurance no: \",profiles.workerNumber):profiles.isWorkerNumberVerified===false&&localStorage.getItem('usertype')==='Contractor'?/*#__PURE__*/React.createElement(\"p\",{className:styles.workercompensation},\"Worker compensation insurance no: \",profiles.workerNumber):null)),/*#__PURE__*/React.createElement(\"hr\",{className:styles.hr1}),/*#__PURE__*/React.createElement(\"div\",{className:styles.SecondBox},/*#__PURE__*/React.createElement(\"div\",{className:styles.skillsbox},/*#__PURE__*/React.createElement(\"h1\",{className:styles.skills},renderSkills()),/*#__PURE__*/React.createElement(\"box\",{className:styles2.servicetagbox},renderTags())),profiles.isInsuranceNumberVerified===true&&localStorage.getItem('usertype')==='Contractor'?/*#__PURE__*/React.createElement(\"div\",{className:styles.languagebox},/*#__PURE__*/React.createElement(\"h1\",{className:styles.planguages},\"Preferred languages\"),/*#__PURE__*/React.createElement(\"p\",{className:styles.languages},languages)):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{className:styles.planguages},\"Preferred languages\"),/*#__PURE__*/React.createElement(\"p\",{className:styles.languages},languages))),/*#__PURE__*/React.createElement(\"hr\",{className:styles.hr1}),localStorage.getItem('usertype')==='Contractor'?/*#__PURE__*/React.createElement(\"div\",{className:styles.ThirdBox},/*#__PURE__*/React.createElement(\"h1\",{className:styles.skills},\"About\"),/*#__PURE__*/React.createElement(\"video\",{src:profiles.profile_video,controls:true,height:\"400px\",width:\"auto\"}),/*#__PURE__*/React.createElement(\"hr\",{className:styles.hr2})):null,localStorage.getItem('usertype')==='Contractor'?/*#__PURE__*/React.createElement(\"div\",{className:styles.ThirdBox},/*#__PURE__*/React.createElement(\"h1\",{className:styles.skills},\"Reviews\"),contractorReview.length>0?/*#__PURE__*/React.createElement(Grid,{container:true,spacing:4,className:styles.gridContainer,justify:\"center\"},renderReviews()):/*#__PURE__*/React.createElement(\"p\",null,\"It seems like you don't have any reviews\")):null);};function Tags(props){if(!props.tagname)return null;return/*#__PURE__*/React.createElement(\"box\",{className:styles2.tag},/*#__PURE__*/React.createElement(\"p\",{className:styles2.tagfont},props.tagname));};export default Cprofile;","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/MyProfile/index.js"],"names":["React","useEffect","useState","styles","VerifiedUserIcon","styles2","Grid","ReviewCard","api","Profile","LoadingView","Cprofile","props","onChange","getProfiles","profileId","localStorage","getItem","serviceTypeList","languageList","profiles","setProfiles","loading","setLoading","then","res","console","log","data","catch","err","renderTags","i","services","tagsCount","length","tempTags","push","tag","renderSkills","renderProfiles","firstName","lastName","rating","averageRating","jobsDone","jobsCompleted","languages","downloadurl","insuranceNumber","isInsuranceNumberVerified","isWorkerNumberVerified","workerNumber","join","contractorReview","setContractorReview","getContractorReview","renderReviews","reviewsCount","tempJobs","review","title","clientFirstName","clientLastName","reviewDate","reviewBody","reviewContent","reviewTitle","reviewRating","clientId","biggyBox","secondBigBox","profilebox","mustHide","liability","Vector","height","workercompensation","hr1","SecondBox","skillsbox","skills","servicetagbox","languagebox","planguages","ThirdBox","profile_video","hr2","gridContainer","Tags","tagname","tagfont"],"mappings":"yKAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,iCAA7B,CACA,MAAOC,CAAAA,OAAP,KAAoB,+CAApB,CACA,OAASC,IAAT,KAAqB,mBAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,wBAAvB,CACA,MAAOC,CAAAA,GAAP,KAAgB,YAAhB,CACA,MAAOC,CAAAA,OAAP,KAAoB,cAApB,CACA,MAAOC,CAAAA,WAAP,KAAwB,mCAAxB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CACxB,QAASC,CAAAA,QAAT,EAAmB,CACfC,WAAW,GACd,CACD,GAAIC,CAAAA,SAAS,CAAG,EAAhB,CACAA,SAAS,CAAC,IAAD,CAAT,CAAkBC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAlB,CACA,cAAgCf,QAAQ,CAAC,CAACgB,eAAe,CAAC,EAAjB,CAAoBC,YAAY,CAAC,EAAjC,CAAD,CAAxC,wCAAOC,QAAP,eAAiBC,WAAjB,eACA,eAA8BnB,QAAQ,CAAC,KAAD,CAAtC,yCAAOoB,OAAP,eAAgBC,UAAhB,eACA,GAAMT,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBN,GAAG,CAACM,WAAJ,CAAgBC,SAAhB,EAA2BS,IAA3B,CAAgC,SAAAC,GAAG,CAAI,CACnCC,OAAO,CAACC,GAAR,CAAY,6BAAZ,EACAD,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAJ,WAAW,CAACI,GAAG,CAACG,IAAL,CAAX,CACAL,UAAU,CAAC,KAAD,CAAV,CACH,CALD,EAKGM,KALH,CAKS,SAAAC,GAAG,CAAI,CAACJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,EAAiBP,UAAU,CAAC,KAAD,CAAV,CAAmB,CALrD,EAMH,CAPD,CASAtB,SAAS,CAAC,UAAM,CACZsB,UAAU,CAAC,IAAD,CAAV,CACAT,WAAW,GACZ,CAHM,CAGL,EAHK,CAAT,CAIA,GAAMiB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,GAAGf,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAqC,QAAxC,CAAiD,CAC7C,MAAO,KAAP,CAAa,CADjB,IAEI,CACA,GAAIe,CAAAA,CAAC,CAAG,CAAR,CACA,GAAIC,CAAAA,QAAQ,CAAGb,QAAQ,CAACF,eAAxB,CACA,GAAIgB,CAAAA,SAAS,CAAGD,QAAQ,CAACE,MAAzB,CACA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA,MAAOJ,CAAC,CAAGE,SAAX,CAAsB,CAClBE,QAAQ,CAACC,IAAT,cAAc,oBAAC,IAAD,EAAM,SAAS,CAAEhC,OAAO,CAACiC,GAAzB,CAA8B,OAAO,CAAEL,QAAQ,CAACD,CAAD,CAA/C,EAAd,EACAA,CAAC,EAAI,CAAL,CACH,EACD,MAAOI,CAAAA,QAAP,CAAiB,CACpB,CAbL,CAcA,GAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB,GAAGvB,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAqC,QAAxC,CAAiD,CAC7C,MAAO,KAAP,CAAa,CADjB,IAEI,CACA,MAAQ,QAAR,CAAkB,CACrB,CALL,CAMA,GAAMuB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACvB,GAAIC,CAAAA,SAAS,CAAGrB,QAAQ,CAACqB,SAAzB,CACA,GAAIC,CAAAA,QAAQ,CAAGtB,QAAQ,CAACsB,QAAxB,CACA,GAAIC,CAAAA,MAAM,CAAGvB,QAAQ,CAACwB,aAAtB,CACA,GAAIC,CAAAA,QAAQ,CAAGzB,QAAQ,CAAC0B,aAAxB,CACA,GAAIb,CAAAA,QAAQ,CAAGb,QAAQ,CAACF,eAAxB,CACA,GAAI6B,CAAAA,SAAS,CAAG3B,QAAQ,CAACD,YAAzB,CACF,mBACI,oBAAC,OAAD,EACI,QAAQ,CAAEN,QADd,CAEI,MAAM,CAAEO,QAAQ,CAAC4B,WAFrB,CAGI,SAAS,CAAEP,SAHf,CAII,QAAQ,CAAEC,QAJd,CAKI,MAAM,CAAEC,MALZ,CAMI,QAAQ,CAAEE,QANd,CAOI,eAAe,CAAEzB,QAAQ,CAAC6B,eAP9B,CAQI,yBAAyB,CAAE7B,QAAQ,CAAC8B,yBARxC,CASI,sBAAsB,CAAE9B,QAAQ,CAAC+B,sBATrC,CAUI,YAAY,CAAE/B,QAAQ,CAACgC,YAV3B,CAWI,QAAQ,CAAEnB,QAXd,CAYI,SAAS,CAAEc,SAZf,EADJ,CAgBC,CAvBL,CAwBA,GAAIA,CAAAA,SAAS,CAAG3B,QAAQ,CAACD,YAAT,CAAsBkC,IAAtB,CAA2B,IAA3B,CAAhB,CACA;AACA,eAAgDnD,QAAQ,CAAC,EAAD,CAAxD,yCAAOoD,gBAAP,eAAyBC,mBAAzB,eACA,GAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CAC9BhD,GAAG,CAACgD,mBAAJ,CAAwBzC,SAAxB,EAAmCS,IAAnC,CAAwC,SAAAC,GAAG,CAAI,CAC3CC,OAAO,CAACC,GAAR,CAAY,4BAAZ,EACAD,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA8B,mBAAmB,CAAC9B,GAAG,CAACG,IAAL,CAAnB,CACH,CAJD,EAIGC,KAJH,CAIS,SAAAC,GAAG,QAAIJ,CAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ,CAAJ,EAJZ,EAKH,CAND,CAQA7B,SAAS,CAAC,UAAM,CACZuD,mBAAmB,GACpB,CAFM,CAEL,EAFK,CAAT,CAIA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC5B,GAAIzB,CAAAA,CAAC,CAAG,CAAR,CACA,GAAI0B,CAAAA,YAAY,CAAGJ,gBAAgB,CAACnB,MAApC,CACA,GAAIwB,CAAAA,QAAQ,CAAG,EAAf,CACA,MAAO3B,CAAC,CAAG0B,YAAX,CAAyB,CACrB,GAAIE,CAAAA,MAAM,CAAGN,gBAAgB,CAACtB,CAAD,CAA7B,CACA,GAAI6B,CAAAA,KAAK,CAAGD,MAAM,CAACE,eAAP,CAAyB,GAAzB,CAA+BF,MAAM,CAACG,cAAlD,CACA,GAAIC,CAAAA,UAAU,CAAGJ,MAAM,CAACI,UAAxB,CACA,GAAIC,CAAAA,UAAU,CAAGL,MAAM,CAACM,aAAxB,CACA,GAAIC,CAAAA,WAAW,CAAGP,MAAM,CAACO,WAAzB,CACA,GAAIC,CAAAA,YAAY,CAAGR,MAAM,CAACQ,YAA1B,CAEAT,QAAQ,CAACtB,IAAT,cACA,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,EAAE,CAAE,CAAvB,CAA0B,EAAE,CAAE,CAA9B,eACI,oBAAC,UAAD,EAAY,YAAY,CAAE+B,YAA1B,CAAwC,QAAQ,CAAER,MAAM,CAACS,QAAzD,CAAmE,YAAY,CAAEF,WAAjF,CAA8F,KAAK,CAAEN,KAArG,CAA4G,SAAS,CAAEG,UAAvH,CAAmI,IAAI,CAAEC,UAAzI,EADJ,CADA,EAKAjC,CAAC,EAAI,CAAL,CACH,CACD,MAAO2B,CAAAA,QAAP,CACC,CApBD,CAqBA,GAAIrC,OAAJ,CAAa,CACT,mBAAO,oBAAC,WAAD,MAAP,CACC,CACL,mBACI,2BAAK,SAAS,CAAEnB,MAAM,CAACmE,QAAvB,eACI,2BAAK,SAAS,CAAEnE,MAAM,CAACoE,YAAvB,eACI,2BAAK,SAAS,CAAEpE,MAAM,CAACqE,UAAvB,EACKhC,cAAc,EADnB,CADJ,cAII,2BAAK,SAAS,CAAErC,MAAM,CAACsE,QAAvB,EACKrD,QAAQ,CAAC8B,yBAAT,GAAuC,IAAvC,EAA+ClC,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAqC,YAApF,cACA,yBAAG,SAAS,CAAEd,MAAM,CAACuE,SAArB,eACG,oBAAC,gBAAD,EAAkB,SAAS,CAAEvE,MAAM,CAACwE,MAApC,CAA4C,KAAK,CAAE,CAACC,MAAM,CAAC,EAAR,CAAnD,EADH,4BAC6FxD,QAAQ,CAAC6B,eADtG,CADA,CAIA7B,QAAQ,CAAC8B,yBAAT,GAAuC,KAAvC,EAAgDlC,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAqC,YAArF,cACA,yBAAG,SAAS,CAAEd,MAAM,CAACuE,SAArB,6BAC4BtD,QAAQ,CAAC6B,eADrC,CADA,CAIA,IATL,CAWK7B,QAAQ,CAAC+B,sBAAT,GAAoC,IAApC,EAA4CnC,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAqC,YAAjF,cACA,yBAAG,SAAS,CAAEd,MAAM,CAAC0E,kBAArB,eACG,oBAAC,gBAAD,EAAkB,SAAS,CAAE1E,MAAM,CAACwE,MAApC,CAA4C,KAAK,CAAE,CAACC,MAAM,CAAC,EAAR,CAAnD,EADH,sCACuGxD,QAAQ,CAACgC,YADhH,CADA,CAIAhC,QAAQ,CAAC+B,sBAAT,GAAoC,KAApC,EAA6CnC,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAqC,YAAlF,cACA,yBAAG,SAAS,CAAEd,MAAM,CAAC0E,kBAArB,uCACsCzD,QAAQ,CAACgC,YAD/C,CADA,CAIA,IAnBL,CAJJ,CADJ,cA4BI,0BAAI,SAAS,CAAEjD,MAAM,CAAC2E,GAAtB,EA5BJ,cA6BI,2BAAK,SAAS,CAAE3E,MAAM,CAAC4E,SAAvB,eACI,2BAAK,SAAS,CAAE5E,MAAM,CAAC6E,SAAvB,eACI,0BAAI,SAAS,CAAE7E,MAAM,CAAC8E,MAAtB,EAA+B1C,YAAY,EAA3C,CADJ,cAEI,2BAAK,SAAS,CAAElC,OAAO,CAAC6E,aAAxB,EACKnD,UAAU,EADf,CAFJ,CADJ,CAOKX,QAAQ,CAAC8B,yBAAT,GAAuC,IAAvC,EAA+ClC,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAqC,YAApF,cACA,2BAAK,SAAS,CAAEd,MAAM,CAACgF,WAAvB,eACG,0BAAI,SAAS,CAAEhF,MAAM,CAACiF,UAAtB,wBADH,cAEG,yBAAG,SAAS,CAAEjF,MAAM,CAAC4C,SAArB,EAAiCA,SAAjC,CAFH,CADA,cAKA,4CACG,0BAAI,SAAS,CAAE5C,MAAM,CAACiF,UAAtB,wBADH,cAEG,yBAAG,SAAS,CAAEjF,MAAM,CAAC4C,SAArB,EAAiCA,SAAjC,CAFH,CAZL,CA7BJ,cAgDI,0BAAI,SAAS,CAAE5C,MAAM,CAAC2E,GAAtB,EAhDJ,CAiDK9D,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAqC,YAArC,cACA,2BAAK,SAAS,CAAEd,MAAM,CAACkF,QAAvB,eACG,0BAAI,SAAS,CAAElF,MAAM,CAAC8E,MAAtB,UADH,cAEG,6BAAO,GAAG,CAAE7D,QAAQ,CAACkE,aAArB,CAAoC,QAAQ,KAA5C,CAA6C,MAAM,CAAC,OAApD,CAA4D,KAAK,CAAC,MAAlE,EAFH,cAGG,0BAAI,SAAS,CAAEnF,MAAM,CAACoF,GAAtB,EAHH,CADA,CAKM,IAtDX,CAuDKvE,YAAY,CAACC,OAAb,CAAqB,UAArB,IAAqC,YAArC,cACA,2BAAK,SAAS,CAAEd,MAAM,CAACkF,QAAvB,eACG,0BAAI,SAAS,CAAElF,MAAM,CAAC8E,MAAtB,YADH,CAII3B,gBAAgB,CAACnB,MAAjB,CAAwB,CAAxB,cACD,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,CAA4B,SAAS,CAAEhC,MAAM,CAACqF,aAA9C,CAA6D,OAAO,CAAC,QAArE,EACK/B,aAAa,EADlB,CADC,cAIC,wEARL,CADA,CAUM,IAjEX,CADJ,CAqEH,CA7KD,CAgLA,QAASgC,CAAAA,IAAT,CAAc7E,KAAd,CAAqB,CACjB,GAAI,CAACA,KAAK,CAAC8E,OAAX,CAAoB,MAAO,KAAP,CACpB,mBACI,2BAAK,SAAS,CAAErF,OAAO,CAACiC,GAAxB,eACI,yBAAG,SAAS,CAAEjC,OAAO,CAACsF,OAAtB,EAAgC/E,KAAK,CAAC8E,OAAtC,CADJ,CADJ,CAKH,EAGD,cAAe/E,CAAAA,QAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport styles from './profile.module.css'; \nimport VerifiedUserIcon from '@material-ui/icons/VerifiedUser';\nimport styles2 from '../ContractorActiveJobsPage/styles.module.css';\nimport { Grid } from '@material-ui/core';\nimport ReviewCard from '../ProfileView/reviews';\nimport api from '../api/api';\nimport Profile from './profile.js';\nimport LoadingView from '../ResuableComponents/loadingView';\n\nconst Cprofile = (props) => {\n    function onChange(){\n        getProfiles()\n    }\n    var profileId = {};\n    profileId['id'] = localStorage.getItem('user_id');\n    const [profiles, setProfiles] = useState({serviceTypeList:[],languageList:[]});\n    const [loading, setLoading] = useState(false);\n    const getProfiles = () => {\n        api.getProfiles(profileId).then(res => {\n            console.log(\"Profile loaded successfully\");\n            console.log(res);\n            setProfiles(res.data);\n            setLoading(false);\n        }).catch(err => {console.log(err);setLoading(false);})\n    }\n\n    useEffect(() => {\n        setLoading(true);\n        getProfiles();\n      },[]);\n    const renderTags = () => {\n        if(localStorage.getItem(\"usertype\") === \"Client\"){\n            return(null)}\n        else{\n            let i = 0;\n            let services = profiles.serviceTypeList;\n            let tagsCount = services.length;\n            let tempTags = [];\n            while (i < tagsCount) {\n                tempTags.push(<Tags className={styles2.tag} tagname={services[i]} />);\n                i += 1;\n            };\n            return tempTags;}\n        };\n    const renderSkills = () => {\n        if(localStorage.getItem(\"usertype\") === \"Client\"){\n            return(null)}\n        else{\n            return (\"Skills\")}\n        };\n    const renderProfiles = () => {\n          let firstName = profiles.firstName\n          let lastName = profiles.lastName\n          let rating = profiles.averageRating;\n          let jobsDone = profiles.jobsCompleted;\n          let services = profiles.serviceTypeList;\n          let languages = profiles.languageList\n        return(\n            <Profile \n                onChange={onChange} \n                avatar={profiles.downloadurl} \n                firstName={firstName} \n                lastName={lastName} \n                rating={rating} \n                jobsdone={jobsDone}\n                insuranceNumber={profiles.insuranceNumber}\n                isInsuranceNumberVerified={profiles.isInsuranceNumberVerified}\n                isWorkerNumberVerified={profiles.isWorkerNumberVerified}\n                workerNumber={profiles.workerNumber}\n                services={services}\n                languages={languages}\n            />\n          );\n        };   \n    let languages = profiles.languageList.join(', ')\n    //Contractor reviews endpoit connect below\n    const [contractorReview, setContractorReview] = useState([]);\n    const getContractorReview = () => {\n        api.getContractorReview(profileId).then(res => {\n            console.log(\"Review loaded successfully\");\n            console.log(res);\n            setContractorReview(res.data);\n        }).catch(err => console.log(err))\n    }\n\n    useEffect(() => {\n        getContractorReview();\n      },[]);\n\n    const renderReviews = () => {\n    let i = 0;\n    let reviewsCount = contractorReview.length;\n    let tempJobs = [];\n    while (i < reviewsCount) {\n        let review = contractorReview[i]\n        let title = review.clientFirstName + \" \" + review.clientLastName\n        let reviewDate = review.reviewDate\n        let reviewBody = review.reviewContent\n        let reviewTitle = review.reviewTitle\n        let reviewRating = review.reviewRating\n\n        tempJobs.push(\n        <Grid item xs={12} sm={6} md={4} >\n            <ReviewCard reviewRating={reviewRating} clientId={review.clientId} greviewTitle={reviewTitle} title={title} subheader={reviewDate} body={reviewBody} />\n        </Grid>\n        );\n        i += 1;\n    }\n    return tempJobs;\n    }; \n    if (loading) {\n        return <LoadingView/>;\n        }\n    return(\n        <div className={styles.biggyBox}>\n            <div className={styles.secondBigBox}>\n                <div className={styles.profilebox}>\n                    {renderProfiles()}\n                </div>  \n                <div className={styles.mustHide}>\n                    {profiles.isInsuranceNumberVerified === true && localStorage.getItem('usertype') === 'Contractor' \n                    ?<p className={styles.liability}>\n                        <VerifiedUserIcon className={styles.Vector} style={{height:20}}/>Liability insurance no: {profiles.insuranceNumber}\n                    </p>\n                    :profiles.isInsuranceNumberVerified === false && localStorage.getItem('usertype') === 'Contractor' \n                    ?<p className={styles.liability}>\n                        Liability insurance no: {profiles.insuranceNumber}\n                    </p>\n                    :null\n                    }\n                    {profiles.isWorkerNumberVerified === true && localStorage.getItem('usertype') === 'Contractor' \n                    ?<p className={styles.workercompensation}>\n                        <VerifiedUserIcon className={styles.Vector} style={{height:20}}/>Worker compensation insurance no: {profiles.workerNumber}\n                    </p>\n                    :profiles.isWorkerNumberVerified === false && localStorage.getItem('usertype') === 'Contractor' \n                    ?<p className={styles.workercompensation}>\n                        Worker compensation insurance no: {profiles.workerNumber}\n                    </p>\n                    :null\n                    }\n                </div>\n            </div>\n            <hr className={styles.hr1}/>   \n            <div className={styles.SecondBox}>\n                <div className={styles.skillsbox}>\n                    <h1 className={styles.skills}>{renderSkills()}</h1>\n                    <box className={styles2.servicetagbox}>\n                        {renderTags()}\n                    </box>       \n                </div>\n                {profiles.isInsuranceNumberVerified === true && localStorage.getItem('usertype') === 'Contractor' \n                ?<div className={styles.languagebox}>\n                    <h1 className={styles.planguages}>Preferred languages</h1>\n                    <p className={styles.languages}>{languages}</p>\n                </div>\n                :<div>\n                    <h1 className={styles.planguages}>Preferred languages</h1>\n                    <p className={styles.languages}>{languages}</p>\n                    </div>\n                }\n\n            </div> \n            <hr className={styles.hr1}/>\n            {localStorage.getItem('usertype') === 'Contractor' \n            ?<div className={styles.ThirdBox}>\n                <h1 className={styles.skills}>About</h1>\n                <video src={profiles.profile_video} controls height=\"400px\" width='auto'/>\n                <hr className={styles.hr2}/>\n            </div>:null}\n            {localStorage.getItem('usertype') === 'Contractor' \n            ?<div className={styles.ThirdBox}>\n                <h1 className={styles.skills}>\n                    Reviews\n                </h1>\n                {contractorReview.length>0?\n                <Grid container spacing={4} className={styles.gridContainer} justify=\"center\">\n                    {renderReviews()}\n                </Grid>\n                : <p>It seems like you don't have any reviews</p>}\n            </div>:null}\n        </div> \n    )\n};\n\n\nfunction Tags(props) {\n    if (!props.tagname) return null;\n    return (\n        <box className={styles2.tag}>\n            <p className={styles2.tagfont}>{props.tagname}</p>\n        </box>\n    )\n};\n\n\nexport default Cprofile;\n \n\n"]},"metadata":{},"sourceType":"module"}