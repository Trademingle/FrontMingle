{"ast":null,"code":"import _slicedToArray from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import styles from'../PostingPage/posting.module.css';import ArrowBackIcon from'@material-ui/icons/ArrowBack';import{useHistory}from'react-router-dom';// import { makeStyles , useTheme} from '@material-ui/core/styles';\nimport api from'../api/api';import ImageViewer from'../ImageViewer';import swal from'sweetalert';import SimpleMenu from'./dropDown';import styles2 from'../ContractorActiveJobsPage/styles.module.css';import moment from'moment';import MessageButton from'../ResuableComponents/messageButton';import NotFound from'../ResuableComponents/404';import LoadingView from'../ResuableComponents/loadingView';export default function ActiveBody(props){var history=useHistory();var handleOnClick=function handleOnClick(event){event.preventDefault();history.goBack();};var _useState=useState({downloadurl:[],serviceTypeList:[],languageList:[]}),_useState2=_slicedToArray(_useState,2),singleActiveJob=_useState2[0],setSingleActiveJob=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var jobId={};// debugger\njobId[\"id\"]=props.id;var getSingleActiveJob=function getSingleActiveJob(){api.getSingleActiveJob(jobId).then(function(res){// debugger\nconsole.log(\"Job loaded successfully\");console.log(res);setSingleActiveJob(res.data);setLoading(false);}).catch(function(err){console.log(err);setLoading(false);setOpen(true);});};useEffect(function(){setLoading(true);getSingleActiveJob();},[]);var jobDetails=singleActiveJob.jobDetails;var imagesList=singleActiveJob.downloadurl;var handleLink=function handleLink(event){event.preventDefault();if(localStorage.getItem('usertype')==='Contractor'){history.push({pathname:'/ClientProfile/'+singleActiveJob.clientId.toString()});}else{history.push({pathname:'/profile/'+singleActiveJob.contractorId.toString()});};};var ts=moment(singleActiveJob.dateAccepted);var timeVal;if(moment().diff(ts,'minutes')<60){timeVal=String(moment().diff(ts,'minutes'))+'m';}else if(moment().diff(ts,'hours')<24){timeVal=String(moment().diff(ts,'hours'))+'h';}else if(moment().diff(ts,'days')<24){timeVal=String(moment().diff(ts,'days'))+'d';}else{timeVal=String(moment().diff(ts,'weeks'))+'w';}var renderTitle=function renderTitle(){var jobTitle=singleActiveJob.title;var locationDetail=singleActiveJob.locationDetail;var name=\"\";var userID=\"\";if(localStorage.getItem('usertype')=='Contractor'){name=singleActiveJob.clientFirstName+\" \"+singleActiveJob.clientLastName;userID=singleActiveJob.clientId;}else{name=singleActiveJob.contractorFirstName+\" \"+singleActiveJob.contractorLastName;userID=singleActiveJob.contractorId;}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:styles.headerDiv},/*#__PURE__*/React.createElement(ArrowBackIcon,{style:{height:25,cursor:\"pointer\"},onClick:handleOnClick}),/*#__PURE__*/React.createElement(\"h1\",{className:styles.header1},\" \",jobTitle,\" \"),/*#__PURE__*/React.createElement(SimpleMenu,{id:props.id,contractorId:userID,name:name})),/*#__PURE__*/React.createElement(\"box\",{className:styles.frame},/*#__PURE__*/React.createElement(\"p\",{className:styles.name,onClick:handleLink},name),/*#__PURE__*/React.createElement(\"p\",{className:styles.location},/*#__PURE__*/React.createElement(\"span\",null,\"\\u2022\"),\" \",locationDetail)),/*#__PURE__*/React.createElement(\"box\",{className:styles.frame},/*#__PURE__*/React.createElement(\"p\",{className:styles.location},\"Accepted \",timeVal,\" ago\")));};//returns the length of the array and item inside them\nvar userId={};var handleOnSubmit=function handleOnSubmit(event){userId.id=props.id;api.editJob(userId).then(function(res){swal({title:\"Unassigned!\",text:\"Job has been unassigned!\",icon:\"success\",button:\"OK\"});}).catch(function(err){return console.log(err);});};function Tags(props){if(!props.tagname)return null;return/*#__PURE__*/React.createElement(\"box\",{className:styles2.tag},/*#__PURE__*/React.createElement(\"p\",{className:styles2.tagfont},props.tagname));};var renderTags=function renderTags(){var i=0;var services=singleActiveJob.serviceTypeList;var tagsCount=services.length;var tempTags=[];while(i<tagsCount){tempTags.push(/*#__PURE__*/React.createElement(Tags,{className:styles2.tag,tagname:services[i]}));i+=1;};return tempTags;};var renderLTags=function renderLTags(){var i=0;var lang=singleActiveJob.languageList;for(var j=0;j<lang.length;j++){var temp=lang[j].toLowerCase();lang[j]=temp.charAt(0).toUpperCase()+temp.substr(1);}var tagsCount=lang.length;var tempTags=[];while(i<tagsCount){tempTags.push(/*#__PURE__*/React.createElement(Tags,{className:styles2.tag,tagname:lang[i]}));i+=1;};return tempTags;};if(loading){return/*#__PURE__*/React.createElement(LoadingView,null);}return/*#__PURE__*/React.createElement(\"div\",{className:styles.posting},/*#__PURE__*/React.createElement(\"box\",{className:styles.postingbox},renderTitle(),/*#__PURE__*/React.createElement(\"div\",{className:styles.row},/*#__PURE__*/React.createElement(ImageViewer,{imagesList:imagesList})),localStorage.getItem('access-token')&&localStorage.getItem('usertype')==='Contractor'?/*#__PURE__*/React.createElement(\"div\",{className:styles.message},/*#__PURE__*/React.createElement(MessageButton,{name:singleActiveJob.clientFirstName,contractorId:singleActiveJob.clientId})):localStorage.getItem('access-token')&&localStorage.getItem('usertype')==='Client'?/*#__PURE__*/React.createElement(\"div\",{className:styles.message},/*#__PURE__*/React.createElement(MessageButton,{name:singleActiveJob.contractorFirstName,contractorId:singleActiveJob.contractorId})):null,/*#__PURE__*/React.createElement(\"div\",{className:styles.paragraph},/*#__PURE__*/React.createElement(\"hr\",{className:styles.hr1}),/*#__PURE__*/React.createElement(\"h2\",{className:styles.header2},\"About the job\"),/*#__PURE__*/React.createElement(\"p\",{className:styles.about},jobDetails),/*#__PURE__*/React.createElement(\"hr\",{className:styles.hr2}),/*#__PURE__*/React.createElement(\"div\",{className:styles.skillsbox},/*#__PURE__*/React.createElement(\"h1\",{className:styles.header2},\"Required Skills\"),/*#__PURE__*/React.createElement(\"box\",{className:styles2.servicetagbox},renderTags()),/*#__PURE__*/React.createElement(\"h1\",{className:styles.header2},\"Required Languages\"),/*#__PURE__*/React.createElement(\"box\",{className:styles2.servicetagbox},renderLTags())))),/*#__PURE__*/React.createElement(NotFound,{setOpen:setOpen,open:open}));}","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/PostingPage_Active/body.js"],"names":["React","useEffect","useState","styles","ArrowBackIcon","useHistory","api","ImageViewer","swal","SimpleMenu","styles2","moment","MessageButton","NotFound","LoadingView","ActiveBody","props","history","handleOnClick","event","preventDefault","goBack","downloadurl","serviceTypeList","languageList","singleActiveJob","setSingleActiveJob","open","setOpen","loading","setLoading","jobId","id","getSingleActiveJob","then","res","console","log","data","catch","err","jobDetails","imagesList","handleLink","localStorage","getItem","push","pathname","clientId","toString","contractorId","ts","dateAccepted","timeVal","diff","String","renderTitle","jobTitle","title","locationDetail","name","userID","clientFirstName","clientLastName","contractorFirstName","contractorLastName","headerDiv","height","cursor","header1","frame","location","userId","handleOnSubmit","editJob","text","icon","button","Tags","tagname","tag","tagfont","renderTags","i","services","tagsCount","length","tempTags","renderLTags","lang","j","temp","toLowerCase","charAt","toUpperCase","substr","posting","postingbox","row","message","paragraph","hr1","header2","about","hr2","skillsbox","servicetagbox"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styles from '../PostingPage/posting.module.css'; \nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { useHistory} from 'react-router-dom';\n// import { makeStyles , useTheme} from '@material-ui/core/styles';\nimport api from '../api/api';\nimport ImageViewer from '../ImageViewer';\nimport swal from 'sweetalert';\nimport SimpleMenu from './dropDown';\nimport styles2 from '../ContractorActiveJobsPage/styles.module.css';\nimport moment from 'moment';\nimport MessageButton from '../ResuableComponents/messageButton';\nimport NotFound from '../ResuableComponents/404';\nimport LoadingView from '../ResuableComponents/loadingView';\n\nexport default function  ActiveBody(props) {\n    const history = useHistory();\n    const handleOnClick = (event) => {\n        event.preventDefault();\n        history.goBack()\n    }\n\n    const [singleActiveJob, setSingleActiveJob] = useState({downloadurl:[],serviceTypeList:[],languageList:[]});\n    const [open, setOpen] = useState(false);\n    const [loading, setLoading] = useState(false);\n    var jobId= {};\n    // debugger\n    jobId[\"id\"] = props.id;\n    const getSingleActiveJob = () => {\n        api.getSingleActiveJob(jobId).then(res => {\n            // debugger\n            console.log(\"Job loaded successfully\");\n            console.log(res);\n            setSingleActiveJob(res.data); \n            setLoading(false);\n        }).catch(err => {console.log(err); setLoading(false); setOpen(true)})\n        }\n    useEffect(() => {\n        setLoading(true);\n        getSingleActiveJob();\n      },[]);\n      let jobDetails = singleActiveJob.jobDetails\n      let imagesList = singleActiveJob.downloadurl\n      const handleLink = (event) =>{\n        event.preventDefault();\n        if (localStorage.getItem('usertype') === 'Contractor'){\n            history.push({\n                pathname: '/ClientProfile/' + singleActiveJob.clientId.toString(),\n                });\n            }\n            else{\n            history.push({\n                pathname: '/profile/' + singleActiveJob.contractorId.toString(),\n                })};\n        }\n        const ts = moment(singleActiveJob.dateAccepted);\n        let timeVal;\n        if (moment().diff(ts, 'minutes')<60){\n            timeVal = String(moment().diff(ts, 'minutes')) + 'm' \n        }else if(moment().diff(ts, 'hours')<24){\n            timeVal = String(moment().diff(ts, 'hours')) + 'h' \n        }else if(moment().diff(ts, 'days')<24){\n            timeVal = String(moment().diff(ts, 'days')) + 'd' \n        }else{\n            timeVal = String(moment().diff(ts, 'weeks')) + 'w' \n        }\n      const renderTitle = () => {\n            let jobTitle = singleActiveJob.title\n            let locationDetail = singleActiveJob.locationDetail\n            let name = \"\"\n            let userID=\"\"\n            if (localStorage.getItem('usertype') == 'Contractor'){\n                name = singleActiveJob.clientFirstName + \" \" + singleActiveJob.clientLastName\n                userID=singleActiveJob.clientId\n              }\n              else{\n                name = singleActiveJob.contractorFirstName + \" \" + singleActiveJob.contractorLastName\n                userID=singleActiveJob.contractorId\n              }\n            return(\n                <div>\n                    <div className={styles.headerDiv}>\n                        <ArrowBackIcon  style={{height:25, cursor:\"pointer\"}} onClick={handleOnClick}/>\n                        <h1 className={styles.header1}> {jobTitle} </h1>\n                        <SimpleMenu id={props.id} contractorId={userID} name={name}/>\n                    </div>\n                    <box className={styles.frame}>\n                        <p className={styles.name} onClick={handleLink}>{name}</p>\n                        <p className={styles.location}><span>&#8226;</span> {locationDetail}</p>\n                    </box> \n                    <box className={styles.frame}>\n                        <p className={styles.location}>Accepted {timeVal} ago</p>\n                    </box>\n                </div>\n            )\n          };\n        //returns the length of the array and item inside them\n    var userId={}\n    const handleOnSubmit = (event) =>{\n        userId.id= props.id\n        api.editJob(userId).then(res => {\n            swal({\n                title: \"Unassigned!\",\n                text: \"Job has been unassigned!\",\n                icon: \"success\",\n                button: \"OK\",\n              });\n        }).catch(err => console.log(err))\n    }\n    function Tags(props) {\n        if (!props.tagname) return null;\n        return (\n            <box className={styles2.tag}>\n                <p className={styles2.tagfont}>{props.tagname}</p>\n            </box>\n        )\n    };\n    const renderTags = () => {\n        let i = 0;\n        let services = singleActiveJob.serviceTypeList;\n        let tagsCount = services.length;\n        let tempTags = [];\n        while (i < tagsCount) {\n            tempTags.push(<Tags className={styles2.tag} tagname={services[i]} />);\n            i += 1;\n        };\n        return tempTags;\n    };\n    const renderLTags = () => {\n        let i = 0;\n        let lang = singleActiveJob.languageList;\n        for(var j = 0 ; j < lang.length ; j++){\n            let temp= lang[j].toLowerCase()\n            lang[j] = temp.charAt(0).toUpperCase() + temp.substr(1);\n        }\n        let tagsCount = lang.length;\n        let tempTags = [];\n        while (i < tagsCount) {\n            tempTags.push(<Tags className={styles2.tag} tagname={lang[i]} />);\n            i += 1;\n        };\n        return tempTags;\n    };\n    if (loading) {\n        return <LoadingView/>;\n        }\n    return (   \n        <div className={styles.posting}>\n            <box className={styles.postingbox}>\n                    {renderTitle()}\n                <div className={styles.row}>\n                    <ImageViewer imagesList={imagesList}/>\n                </div>\n                {localStorage.getItem('access-token') && localStorage.getItem('usertype') === 'Contractor' \n                ?<div className={styles.message}><MessageButton name={singleActiveJob.clientFirstName} contractorId={singleActiveJob.clientId}/></div>\n                : localStorage.getItem('access-token') && localStorage.getItem('usertype') === 'Client'\n                ?<div className={styles.message}><MessageButton name={singleActiveJob.contractorFirstName} contractorId={singleActiveJob.contractorId}/></div>\n                :null\n                }\n                <div className={styles.paragraph}>\n                    <hr className={styles.hr1}/>  \n                    <h2 className={styles.header2}>About the job</h2>\n                    <p className={styles.about}>{jobDetails}</p>\n                    <hr className={styles.hr2}/>\n                    <div className={styles.skillsbox}>\n                        <h1 className={styles.header2}>Required Skills</h1>\n                        <box className={styles2.servicetagbox}>\n                            {renderTags()}\n                        </box>     \n                        <h1 className={styles.header2}>Required Languages</h1>\n                        <box className={styles2.servicetagbox}>\n                            {renderLTags()}\n                        </box>    \n                    </div>\n                </div> \n            </box>\n            <NotFound setOpen={setOpen} open={open}/>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}