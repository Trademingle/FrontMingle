{"ast":null,"code":"import _slicedToArray from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import styles from'./search.module.css';import ExploreCard from'../HomeOwnerExplorePage/ExploreCard';import{default as JobCard}from'../ContractorExplorePage/ExploreCard copy';import api from'../api/api';import LoadingView from'../ResuableComponents/loadingView';export default function SearchBody(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),Contractors=_useState2[0],setContractors=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var loadContractors=function loadContractors(){console.log(\"body\",props.information);api.getNearByCProfiles(props.information).then(function(res){setContractors(res.data['nearby contractors']);setLoading(false);}).catch(function(err){return console.log(err);});};var loadJobs=function loadJobs(){console.log(\"body\",props.information);api.getUnassignedJobs(props.information).then(function(res){setContractors(res.data['nearby jobs']);setLoading(false);}).catch(function(err){return console.log(err);});};useEffect(function(){setLoading(true);if(localStorage.getItem('usertype')===\"Contractor\"){loadJobs();}else{loadContractors();}},[props.information]);if(loading){return/*#__PURE__*/React.createElement(LoadingView,null);}function renderFeaturedContrators(){var i=0;var contractorCount=Contractors.length;var tempContractors=[];while(i<contractorCount){var data=Contractors[i];if(localStorage.getItem('usertype')===\"Contractor\"){var unassignedJob=data;var jobId=unassignedJob.id;var jobTitle=unassignedJob.title;var contractorName=unassignedJob.clientFirstName;var location=unassignedJob.locationDetail;var serviceTypeList=unassignedJob.serviceTypeList;var avatar=unassignedJob.downloadurl[0];var clientId=unassignedJob.clientId;tempContractors.push(/*#__PURE__*/React.createElement(JobCard,{name:jobTitle,id:jobId,Cname:contractorName,location:location,clientId:clientId,avatarPic:avatar,serviceList:serviceTypeList},\" \"));}else{tempContractors.push(/*#__PURE__*/React.createElement(ExploreCard,{avatar:data.downloadurl,className:styles.ContractorCard,contractorId:data.id,name:data.firstName+\" \"+data.lastName,rating:data.averageRating,review:data.numberOfReviews,serviceList:data.serviceTypeList}));}i+=1;}return tempContractors;};return/*#__PURE__*/React.createElement(\"div\",{className:styles.sBody},Contractors.length===0?/*#__PURE__*/React.createElement(\"h1\",{className:styles.header},Contractors.length,\" results\"):/*#__PURE__*/React.createElement(\"h1\",{className:styles.header},Contractors.length,\" Results\"),/*#__PURE__*/React.createElement(\"box\",{className:styles.explorebox},renderFeaturedContrators()));};","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/SearchResults/body.js"],"names":["React","useEffect","useState","styles","ExploreCard","default","JobCard","api","LoadingView","SearchBody","props","Contractors","setContractors","loading","setLoading","loadContractors","console","log","information","getNearByCProfiles","then","res","data","catch","err","loadJobs","getUnassignedJobs","localStorage","getItem","renderFeaturedContrators","i","contractorCount","length","tempContractors","unassignedJob","jobId","id","jobTitle","title","contractorName","clientFirstName","location","locationDetail","serviceTypeList","avatar","downloadurl","clientId","push","ContractorCard","firstName","lastName","averageRating","numberOfReviews","sBody","header","explorebox"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styles from './search.module.css';\nimport ExploreCard from '../HomeOwnerExplorePage/ExploreCard';\nimport {default as JobCard} from '../ContractorExplorePage/ExploreCard copy';\nimport api from '../api/api';\nimport LoadingView from '../ResuableComponents/loadingView';\n\nexport default function SearchBody(props){\n    let [Contractors, setContractors] = useState({});\n    const [loading, setLoading] = useState(false);\n    const loadContractors = () => {\n        console.log(\"body\", props.information);\n        api.getNearByCProfiles(props.information).then(res => {\n          setContractors(res.data['nearby contractors']);\n          setLoading(false);\n        }).catch(err => console.log(err))\n    }\n\n    const loadJobs = () => {\n        console.log(\"body\", props.information);\n        api.getUnassignedJobs(props.information).then(res => {\n          setContractors(res.data['nearby jobs']);\n          setLoading(false);\n        }).catch(err => console.log(err))\n    }\n    useEffect(() => {\n        setLoading(true);\n        if (localStorage.getItem('usertype')=== \"Contractor\"){\n            loadJobs();\n        }else{\n            loadContractors();\n        }\n    },[props.information]);\n\n    if (loading) {\n    return (        \n        <LoadingView/>)\n    }\n    function renderFeaturedContrators() {\n        let i = 0;\n        let contractorCount = Contractors.length;\n        let tempContractors = [];\n        while (i < contractorCount) {\n            let data = Contractors[i];\n            if (localStorage.getItem('usertype')=== \"Contractor\"){\n                let unassignedJob = data\n                let jobId = unassignedJob.id\n                let jobTitle = unassignedJob.title\n                let contractorName = unassignedJob.clientFirstName\n                let location = unassignedJob.locationDetail\n                var serviceTypeList = unassignedJob.serviceTypeList;\n                let avatar = unassignedJob.downloadurl[0]\n                let clientId = unassignedJob.clientId\n                tempContractors.push(\n                    <JobCard name={jobTitle} id={jobId} Cname={contractorName} location={location} clientId ={clientId} \n                    avatarPic={avatar} \n                    serviceList={serviceTypeList}> </JobCard>\n                );\n            }else{\n                tempContractors.push(\n                    <ExploreCard avatar={data.downloadurl} className={styles.ContractorCard} contractorId={data.id} name={data.firstName + \" \" + data.lastName} rating={data.averageRating} review={data.numberOfReviews} serviceList={data.serviceTypeList} />\n                );\n            }\n            i += 1;\n        }\n        return tempContractors;\n    };\n    return (\n        <div className={styles.sBody}>\n            {Contractors.length === 0\n                ?<h1 className={styles.header}>{Contractors.length} results</h1>\n                :<h1 className={styles.header}>{Contractors.length} Results</h1>\n            }\n            <box className={styles.explorebox}>\n                {renderFeaturedContrators()}\n            </box>\n        </div>\n    )\n};\n\n"]},"metadata":{},"sourceType":"module"}