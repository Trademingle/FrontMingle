{"ast":null,"code":"import _slicedToArray from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import styles from'../PostingPage/posting.module.css';import ArrowBackIcon from'@material-ui/icons/ArrowBack';// import { makeStyles , useTheme} from '@material-ui/core/styles';\nimport api from'../api/api';import{useHistory}from'react-router-dom';import ImageViewer from'../ImageViewer';import SimpleMenu from'./dropDown';import styles2 from'../ContractorActiveJobsPage/styles.module.css';import swal from'sweetalert';import moment from'moment';import{makeStyles}from'@material-ui/core/styles';import InputLabel from'@material-ui/core/InputLabel';import MenuItem from'@material-ui/core/MenuItem';import FormHelperText from'@material-ui/core/FormHelperText';import FormControl from'@material-ui/core/FormControl';import Select from'@material-ui/core/Select';import NotFound from'../ResuableComponents/404';import LoadingView from'../ResuableComponents/loadingView';var useStyles=makeStyles(function(theme){return{formControl:{margin:theme.spacing(1),minWidth:160,maxWidth:160},selectEmpty:{marginTop:theme.spacing(2)},buttonForm:{position:'absolute',margin:'20px 180px',cursor:'pointer',borderRadius:'2px',border:'1px solid #2b64d2','&:hover':{background:\"#2b64d2\",color:'white'}}};});export default function ClientReview(props){var classes=useStyles();var history=useHistory();var handleOnClick=function handleOnClick(event){event.preventDefault();history.goBack();};//code to implement assign job in posting page\nvar _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),jobsId=_React$useState2[0],setjobsId=_React$useState2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var handleChange=function handleChange(event){setjobsId(event.target.value);};var data={};var handleOnSubmit=function handleOnSubmit(event){data.contractorId=jobsId;data.id=props.id;api.assignUnassignedJobs(data).then(function(res){swal({title:\"Assigned!\",text:\"Job has been assigned, please wait for contractor to accept!\",icon:\"success\",button:\"OK\"});}).catch(function(err){return console.log(err);});};var _useState5=useState({downloadurl:[],serviceTypeList:[],languageList:[]}),_useState6=_slicedToArray(_useState5,2),unassignedJob=_useState6[0],setUnassignedJob=_useState6[1];var contractorID={};contractorID[\"id\"]=props.id;var getUnassignedJob=function getUnassignedJob(){api.unassignedJob(contractorID).then(function(res){console.log(\"Job loaded successfully\");console.log(res);setUnassignedJob(res.data);setLoading(false);}).catch(function(err){console.log(err);setLoading(false);setOpen(true);});};useEffect(function(){getUnassignedJob();},[]);var ts=moment(unassignedJob.datePosted);var timeVal;if(moment().diff(ts,'minutes')<60){timeVal=String(moment().diff(ts,'minutes'))+'m';}else if(moment().diff(ts,'hours')<24){timeVal=String(moment().diff(ts,'hours'))+'h';}else if(moment().diff(ts,'days')<24){timeVal=String(moment().diff(ts,'days'))+'d';}else{timeVal=String(moment().diff(ts,'weeks'))+'w';}//getting the recently contacted contractors list\nvar _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),contractorList=_useState8[0],setContractorList=_useState8[1];var getContractorList=function getContractorList(){api.getChats().then(function(res){console.log(\"Chats loaded successfully\");console.log(res);setContractorList(res.data);}).catch(function(err){return console.log(err);});};useEffect(function(){setLoading(true);getContractorList();},[]);var rendercontractorList=function rendercontractorList(){var i=0;var contractorListCount=contractorList.length;var tempJobs=[];while(i<contractorListCount){var contractor=contractorList[i];var name=contractor.firstName+' '+contractor.lastName;var contractorId=contractor.id;tempJobs.push(/*#__PURE__*/React.createElement(MenuItem,{value:contractorId},name));i+=1;}return tempJobs;};//\nvar renderTitle=function renderTitle(){var jobTitle=unassignedJob.title;var name=unassignedJob.clientFirstName;var jobDetails=unassignedJob.jobDetails;var locationDetail=unassignedJob.locationDetail;var imagesList=unassignedJob.downloadurl;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:styles.headerDiv},/*#__PURE__*/React.createElement(ArrowBackIcon,{style:{height:25,cursor:\"pointer\"},onClick:handleOnClick}),/*#__PURE__*/React.createElement(\"h1\",{className:styles.header1},\" \",jobTitle,\" \"),/*#__PURE__*/React.createElement(SimpleMenu,{id:props.id,jobDetails:jobDetails,languages:unassignedJob.languageList,services:unassignedJob.serviceTypeList,jobTitle:jobTitle,location:locationDetail,className:styles.simpleMenu})),/*#__PURE__*/React.createElement(\"box\",{className:styles.frame},/*#__PURE__*/React.createElement(\"p\",{className:styles.name},name),/*#__PURE__*/React.createElement(\"p\",{className:styles.location},/*#__PURE__*/React.createElement(\"span\",null,\"\\u2022\"),\" \",locationDetail)),/*#__PURE__*/React.createElement(\"box\",{className:styles.frame},/*#__PURE__*/React.createElement(\"p\",{className:styles.location},\"Posted \",timeVal,\" ago\")),/*#__PURE__*/React.createElement(\"div\",{className:styles.row},/*#__PURE__*/React.createElement(ImageViewer,{imagesList:imagesList})),/*#__PURE__*/React.createElement(\"div\",{className:styles.paragraph},/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"inputLabel\"},\"Select Contractor\"),/*#__PURE__*/React.createElement(Select,{labelId:\"selectLabel\",id:\"assignForm\",value:jobsId,onChange:handleChange},/*#__PURE__*/React.createElement(MenuItem,{value:\"\"},/*#__PURE__*/React.createElement(\"em\",null,\"None\")),rendercontractorList()),/*#__PURE__*/React.createElement(FormHelperText,null,\"Assign Job to a Contractor\"),/*#__PURE__*/React.createElement(\"button\",{onClick:handleOnSubmit,className:classes.buttonForm,style:{height:30,width:120}},\"Assign\")),/*#__PURE__*/React.createElement(\"hr\",{className:styles.hr1}),/*#__PURE__*/React.createElement(\"h2\",{className:styles.header2},\"About the job\"),/*#__PURE__*/React.createElement(\"p\",{className:styles.about},jobDetails),/*#__PURE__*/React.createElement(\"hr\",{className:styles.hr2})));};function Tags(props){if(!props.tagname)return null;return/*#__PURE__*/React.createElement(\"box\",{className:styles2.tag},/*#__PURE__*/React.createElement(\"p\",{className:styles2.tagfont},props.tagname));};var renderSTags=function renderSTags(){var i=0;var services=unassignedJob.serviceTypeList;var tagsCount=services.length;var tempTags=[];while(i<tagsCount){tempTags.push(/*#__PURE__*/React.createElement(Tags,{className:styles2.tag,tagname:services[i]}));i+=1;};return tempTags;};var renderLTags=function renderLTags(){var i=0;var lang=unassignedJob.languageList;for(var j=0;j<lang.length;j++){var temp=lang[j].toLowerCase();lang[j]=temp.charAt(0).toUpperCase()+temp.substr(1);}var tagsCount=lang.length;var tempTags=[];while(i<tagsCount){tempTags.push(/*#__PURE__*/React.createElement(Tags,{className:styles2.tag,tagname:lang[i]}));i+=1;};return tempTags;};if(loading){return/*#__PURE__*/React.createElement(LoadingView,null);}return/*#__PURE__*/React.createElement(\"div\",{className:styles.posting},/*#__PURE__*/React.createElement(\"box\",{className:styles.postingbox},renderTitle(),/*#__PURE__*/React.createElement(\"div\",{className:styles.skillsbox},/*#__PURE__*/React.createElement(\"h1\",{className:styles.header2},\"Required Skills\"),/*#__PURE__*/React.createElement(\"box\",{className:styles2.servicetagbox},renderSTags()),/*#__PURE__*/React.createElement(\"h1\",{className:styles.header2},\"Required Languages\"),/*#__PURE__*/React.createElement(\"box\",{className:styles2.servicetagbox},renderLTags()))),/*#__PURE__*/React.createElement(NotFound,{setOpen:setOpen,open:open}));}","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/PostingPage_Unassigned/body.js"],"names":["React","useEffect","useState","styles","ArrowBackIcon","api","useHistory","ImageViewer","SimpleMenu","styles2","swal","moment","makeStyles","InputLabel","MenuItem","FormHelperText","FormControl","Select","NotFound","LoadingView","useStyles","theme","formControl","margin","spacing","minWidth","maxWidth","selectEmpty","marginTop","buttonForm","position","cursor","borderRadius","border","background","color","ClientReview","props","classes","history","handleOnClick","event","preventDefault","goBack","jobsId","setjobsId","open","setOpen","loading","setLoading","handleChange","target","value","data","handleOnSubmit","contractorId","id","assignUnassignedJobs","then","res","title","text","icon","button","catch","err","console","log","downloadurl","serviceTypeList","languageList","unassignedJob","setUnassignedJob","contractorID","getUnassignedJob","ts","datePosted","timeVal","diff","String","contractorList","setContractorList","getContractorList","getChats","rendercontractorList","i","contractorListCount","length","tempJobs","contractor","name","firstName","lastName","push","renderTitle","jobTitle","clientFirstName","jobDetails","locationDetail","imagesList","headerDiv","height","header1","simpleMenu","frame","location","row","paragraph","width","hr1","header2","about","hr2","Tags","tagname","tag","tagfont","renderSTags","services","tagsCount","tempTags","renderLTags","lang","j","temp","toLowerCase","charAt","toUpperCase","substr","posting","postingbox","skillsbox","servicetagbox"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styles from '../PostingPage/posting.module.css'; \nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\n// import { makeStyles , useTheme} from '@material-ui/core/styles';\nimport api from '../api/api';\nimport { useHistory} from 'react-router-dom';\nimport ImageViewer from '../ImageViewer';\nimport SimpleMenu from './dropDown';\nimport styles2 from '../ContractorActiveJobsPage/styles.module.css';\nimport swal from 'sweetalert';\nimport moment from 'moment';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport NotFound from '../ResuableComponents/404';\nimport LoadingView from '../ResuableComponents/loadingView';\n\nconst useStyles = makeStyles((theme) => ({\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 160,\n      maxWidth:160,\n    },\n    selectEmpty: {\n      marginTop: theme.spacing(2),\n    },\n    buttonForm:{\n        position:'absolute',\n        margin: '20px 180px',\n        cursor:'pointer',\n        borderRadius:'2px',\n        border: '1px solid #2b64d2',\n        '&:hover': {\n            background: \"#2b64d2\",\n            color: 'white',\n        },\n    },\n\n  }));\n\nexport default function  ClientReview(props) {\n    const classes = useStyles();\n    const history = useHistory();\n    const handleOnClick = (event) => {\n        event.preventDefault();\n        history.goBack()\n    }\n    //code to implement assign job in posting page\n    const [jobsId, setjobsId] = React.useState('');\n    const [open, setOpen] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const handleChange = (event) => {\n        setjobsId(event.target.value);\n    };\n    var data={}\n    const handleOnSubmit = (event) =>{\n        data.contractorId= jobsId\n        data.id= props.id\n        api.assignUnassignedJobs(data).then(res => {\n            swal({\n                title: \"Assigned!\",\n                text: \"Job has been assigned, please wait for contractor to accept!\",\n                icon: \"success\",\n                button: \"OK\",\n              });\n        }).catch(err => console.log(err))\n    }\n    const [unassignedJob, setUnassignedJob] = useState({downloadurl:[],serviceTypeList:[],languageList:[]});\n    var contractorID= {};\n    contractorID[\"id\"] = props.id;\n\n    const getUnassignedJob = () => {\n        api.unassignedJob(contractorID).then(res => {\n            console.log(\"Job loaded successfully\");\n            console.log(res);\n            setUnassignedJob(res.data); \n            setLoading(false);\n        }).catch(err => {console.log(err); setLoading(false); setOpen(true)})\n    }\n\n    useEffect(() => {\n        getUnassignedJob();\n      },[]);\n\n    const ts = moment(unassignedJob.datePosted);\n    let timeVal;\n    if (moment().diff(ts, 'minutes')<60){\n        timeVal = String(moment().diff(ts, 'minutes')) + 'm' \n    }else if(moment().diff(ts, 'hours')<24){\n        timeVal = String(moment().diff(ts, 'hours')) + 'h' \n    }else if(moment().diff(ts, 'days')<24){\n        timeVal = String(moment().diff(ts, 'days')) + 'd' \n    }else{\n        timeVal = String(moment().diff(ts, 'weeks')) + 'w' \n    }\n    //getting the recently contacted contractors list\n    const [contractorList, setContractorList] = useState({});\n    const getContractorList = () => {\n        api.getChats().then(res => {\n            console.log(\"Chats loaded successfully\");\n            console.log(res);\n            setContractorList(res.data);\n          }).catch(err => console.log(err))\n    }\n    useEffect(() => {\n        setLoading(true);\n        getContractorList();\n    },[]);\n    const rendercontractorList = () => {\n        let i = 0;\n        let contractorListCount = contractorList.length;\n        let tempJobs = [];\n        while (i < contractorListCount) {\n            let contractor = contractorList[i]\n            let name = contractor.firstName + ' ' + contractor.lastName\n            let contractorId = contractor.id\n            tempJobs.push(\n                <MenuItem value={contractorId}>{name}</MenuItem>\n            );\n\n            i += 1;\n        }\n        return tempJobs;\n    };\n    //\n    const renderTitle = () => {\n        let jobTitle = unassignedJob.title\n        let name = unassignedJob.clientFirstName\n        let jobDetails = unassignedJob.jobDetails\n        let locationDetail = unassignedJob.locationDetail\n        let imagesList = unassignedJob.downloadurl\n        return(\n            <div>\n                <div className={styles.headerDiv}>\n                    <ArrowBackIcon  style={{height:25, cursor:\"pointer\"}} onClick={handleOnClick}/>\n                    <h1 className={styles.header1}> {jobTitle} </h1>\n                    <SimpleMenu \n                        id={props.id} \n                        jobDetails={jobDetails} \n                        languages={unassignedJob.languageList} \n                        services={unassignedJob.serviceTypeList}\n                        jobTitle={jobTitle}\n                        location={locationDetail}\n                        className={styles.simpleMenu}\n                    />\n                </div>\n                <box className={styles.frame}>\n                    <p className={styles.name}>{name}</p>\n                    <p className={styles.location}><span>&#8226;</span> {locationDetail}</p>\n                </box> \n                <box className={styles.frame}>\n                    <p className={styles.location}>Posted {timeVal} ago</p>\n                </box> \n                <div className={styles.row}>\n                    <ImageViewer imagesList={imagesList}/>\n                </div> \n                <div className={styles.paragraph}>\n                    {/* <form>\n                        <label for=\"SubmitContractorId\">Assign Job to:</label>\n                        <input id= \"SubmitContractorId\" placeholder=\"Enter Contractor ID\" defaultValue={userId.contractorId} onKeyUp={keyPressed} />\n                        <button style={{width:60,height:20}} onClick={handleOnSubmit}>Assign</button>\n                    </form> */}\n                    <FormControl className={classes.formControl}>\n                        <InputLabel id=\"inputLabel\">Select Contractor</InputLabel>\n                        <Select\n                            labelId=\"selectLabel\"\n                            id=\"assignForm\"\n                            value={jobsId}\n                            onChange={handleChange}\n                            >\n                            <MenuItem value=\"\">\n                                <em>None</em>\n                            </MenuItem>\n                            {rendercontractorList()}\n                        </Select>\n                        <FormHelperText>Assign Job to a Contractor</FormHelperText>\n                        <button onClick={handleOnSubmit} className={classes.buttonForm} style={{height:30, width:120}}>Assign</button>\n                    </FormControl>\n                    <hr className={styles.hr1}/>  \n\n                    <h2 className={styles.header2}>About the job</h2>\n                    <p className={styles.about}>{jobDetails}</p>\n                    <hr className={styles.hr2}/>  \n                </div> \n            </div>\n        )};\n    function Tags(props) {\n        if (!props.tagname) return null;\n        return (\n            <box className={styles2.tag}>\n                <p className={styles2.tagfont}>{props.tagname}</p>\n            </box>\n        )\n    };\n    const renderSTags = () => {\n        let i = 0;\n        let services = unassignedJob.serviceTypeList;\n        let tagsCount = services.length;\n        let tempTags = [];\n        while (i < tagsCount) {\n            tempTags.push(<Tags className={styles2.tag} tagname={services[i]} />);\n            i += 1;\n        };\n        return tempTags;\n    };\n    const renderLTags = () => {\n        let i = 0;\n        let lang = unassignedJob.languageList;\n        for(var j = 0 ; j < lang.length ; j++){\n            let temp= lang[j].toLowerCase()\n            lang[j] = temp.charAt(0).toUpperCase() + temp.substr(1);\n        }\n        let tagsCount = lang.length;\n        let tempTags = [];\n        while (i < tagsCount) {\n            tempTags.push(<Tags className={styles2.tag} tagname={lang[i]} />);\n            i += 1;\n        };\n        return tempTags;\n    };\n    if (loading) {\n        return <LoadingView/>;\n        }\n    return (   \n        <div className={styles.posting}>\n            <box className={styles.postingbox}>\n                {renderTitle()}\n                <div className={styles.skillsbox}>\n                    <h1 className={styles.header2}>Required Skills</h1>\n                    <box className={styles2.servicetagbox}>\n                        {renderSTags()}\n                    </box>        \n                    <h1 className={styles.header2}>Required Languages</h1>\n                    <box className={styles2.servicetagbox}>\n                        {renderLTags()}\n                    </box> \n                </div>\n            </box>\n            <NotFound setOpen={setOpen} open={open}/>\n\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}