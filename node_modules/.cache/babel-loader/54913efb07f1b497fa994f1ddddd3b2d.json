{"ast":null,"code":"import _slicedToArray from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import styles from'../PostingPage/posting.module.css';import ArrowBackIcon from'@material-ui/icons/ArrowBack';import{useHistory}from'react-router-dom';import{withStyles}from'@material-ui/core/styles';import api from'../api/api';import Button from'@material-ui/core/Button';import Popup from\"reactjs-popup\";import Review from\"../Review\";import ImageViewer from'../ImageViewer';import SimpleMenu from'./dropDown';import styles2 from'../ContractorActiveJobsPage/styles.module.css';import swal from'sweetalert';import{Grid}from'@material-ui/core';import ReviewCard from'../ProfileView/reviews';import moment from'moment';import NotFound from'../ResuableComponents/404';import LoadingView from'../ResuableComponents/loadingView';var CompleteButton=withStyles(function(theme){return{root:{borderRadius:44,backgroundColor:'#eeeeee',border:'1px solid #2B64D2',height:'50px',fontSize:'15px',fontWeight:'550',width:'100%',maxWidth:'413px',minWidth:'200px','&:hover':{backgroundColor:'#2B64D2',color:'white'},marginLeft:0}};})(Button);export default function ActiveBody(props){var history=useHistory();var handleOnClick=function handleOnClick(event){event.preventDefault();history.goBack();};var _useState=useState({downloadurl:[],serviceTypeList:[],languageList:[]}),_useState2=_slicedToArray(_useState,2),singleCompletedJob=_useState2[0],setSingleCompletedJob=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var jobId={};jobId['id']=props.id;var getSingleCompletedJob=function getSingleCompletedJob(){api.getSingleCompletedJob(jobId).then(function(res){console.log(\"Job loaded successfully\");console.log(res);setSingleCompletedJob(res.data);setLoading(false);}).catch(function(err){console.log(err);setLoading(false);setOpen(true);});};var jobTitle=singleCompletedJob.title;var jobDetails=singleCompletedJob.jobDetails;var locationDetail=singleCompletedJob.locationDetail;var imagesList=singleCompletedJob.downloadurl;var handleLink=function handleLink(event){event.preventDefault();if(localStorage.getItem('usertype')==='Contractor'){history.push({pathname:'/ClientProfile/'+singleCompletedJob.clientId.toString()});}else{history.push({pathname:'/profile/'+singleCompletedJob.contractorId.toString()});};};var name=\"\";var userID=\"\";if(localStorage.getItem('usertype')=='Contractor'){name=singleCompletedJob.clientFirstName+\" \"+singleCompletedJob.clientLastName;userID=singleCompletedJob.clientId;}else{name=singleCompletedJob.contractorFirstName+\" \"+singleCompletedJob.contractorLastName;userID=singleCompletedJob.contractorId;}var handleSubmit=function handleSubmit(event){event.preventDefault();history.push({pathname:'/invoice/'+props.id.toString()});};var handleInvoice=function handleInvoice(event){event.preventDefault();swal({title:\"Downloaded!\",text:\"Invoice successfully downloaded!\",icon:\"success\",button:\"OK\"});window.open(singleCompletedJob.invoices[-0],\"_blank\");};var ts=moment(singleCompletedJob.dateCompleted);var timeVal;if(moment().diff(ts,'minutes')<60){timeVal=String(moment().diff(ts,'minutes'))+'m';}else if(moment().diff(ts,'hours')<24){timeVal=String(moment().diff(ts,'hours'))+'h';}else if(moment().diff(ts,'days')<24){timeVal=String(moment().diff(ts,'days'))+'d';}else{timeVal=String(moment().diff(ts,'weeks'))+'w';}var renderTitle=function renderTitle(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:styles.headerDiv},/*#__PURE__*/React.createElement(ArrowBackIcon,{style:{height:25,cursor:\"pointer\"},onClick:handleOnClick}),/*#__PURE__*/React.createElement(\"h1\",{className:styles.header1},\" \",jobTitle,\" \"),/*#__PURE__*/React.createElement(SimpleMenu,{id:props.id,contractorId:userID,name:name})),/*#__PURE__*/React.createElement(\"box\",{className:styles.frame},/*#__PURE__*/React.createElement(\"p\",{className:styles.name,onClick:handleLink},name),/*#__PURE__*/React.createElement(\"p\",{className:styles.location},/*#__PURE__*/React.createElement(\"span\",null,\"\\u2022\"),\" \",locationDetail)),/*#__PURE__*/React.createElement(\"box\",{className:styles.frame},/*#__PURE__*/React.createElement(\"p\",{className:styles.location},\"Completed \",timeVal,\" ago\")));};function Tags(props){if(!props.tagname)return null;return/*#__PURE__*/React.createElement(\"box\",{className:styles2.tag},/*#__PURE__*/React.createElement(\"p\",{className:styles2.tagfont},props.tagname));};var renderTags=function renderTags(){var i=0;var services=singleCompletedJob.serviceTypeList;var tagsCount=services.length;var tempTags=[];while(i<tagsCount){tempTags.push(/*#__PURE__*/React.createElement(Tags,{className:styles2.tag,tagname:services[i]}));i+=1;};return tempTags;};var renderLTags=function renderLTags(){var i=0;var lang=singleCompletedJob.languageList;// for(var j = 0 ; j < lang.length ; j++){\n//     let temp= lang[j].toLowerCase()\n//     lang[j] = temp.charAt(0).toUpperCase() + temp.substr(1);\n// }\nvar tagsCount=lang.length;var tempTags=[];while(i<tagsCount){tempTags.push(/*#__PURE__*/React.createElement(Tags,{className:styles2.tag,tagname:lang[i]}));i+=1;};return tempTags;};//Code for Contractor review\nvar _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),contractorReview=_useState8[0],setContractorReview=_useState8[1];var profileId={};profileId.id=singleCompletedJob.contractorId;var getContractorReview=function getContractorReview(){api.getContractorReview(profileId).then(function(res){console.log(\"Review loaded successfully\");console.log(res);setContractorReview(res.data);}).catch(function(err){return console.log(err);});};useEffect(function(){setLoading(true);getSingleCompletedJob();},[]);useEffect(function(){getContractorReview();},[singleCompletedJob]);var renderReviews=function renderReviews(){// let i = 0;\n// let reviewsCount = contractorReview.length;\nvar tempJobs=[];var i;for(i in contractorReview){var review=contractorReview[i];if(review.clientId===singleCompletedJob.clientId&&review.contractorId===singleCompletedJob.contractorId&&review.completedJobId.toString()===props.id){var title=review.clientFirstName+\" \"+review.clientLastName;var reviewDate=review.reviewDate;var reviewBody=review.reviewContent;var avatar=review.downloadurl;var reviewTitle=review.reviewTitle;var reviewRating=review.reviewRating;tempJobs.push(/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:4},/*#__PURE__*/React.createElement(ReviewCard,{reviewRating:reviewRating,reviewTitle:reviewTitle,avatar:avatar,clientId:review.clientId,id:review.id,title:title,subheader:reviewDate,body:reviewBody})));}}return tempJobs;};var reviews=renderReviews();if(loading){return/*#__PURE__*/React.createElement(LoadingView,null);}return/*#__PURE__*/React.createElement(\"div\",{className:styles.posting},/*#__PURE__*/React.createElement(\"box\",{className:styles.postingbox},renderTitle(),/*#__PURE__*/React.createElement(\"div\",{className:styles.row},/*#__PURE__*/React.createElement(ImageViewer,{imagesList:imagesList})),/*#__PURE__*/React.createElement(\"div\",{className:styles.paragraph},/*#__PURE__*/React.createElement(\"div\",{className:styles.buttonsII},localStorage.getItem('usertype')==='Client'&&localStorage.getItem('client_id')===singleCompletedJob.clientId?/*#__PURE__*/React.createElement(\"div\",null,reviews.length===0?/*#__PURE__*/React.createElement(Popup,{trigger:/*#__PURE__*/React.createElement(CompleteButton,{className:styles.completeButton},\"Review Contractor\"),modal:true,contentStyle:contentStyle},function(close){return/*#__PURE__*/React.createElement(Review,{close:close,name:singleCompletedJob.contractorFirstName+\" \"+singleCompletedJob.contractorLastName,jobId:singleCompletedJob.id,contractorId:singleCompletedJob.contractorId});}):/*#__PURE__*/React.createElement(CompleteButton,{className:styles.completeButton,disabled:true},\"\\u2714 Contractor Reviewed\"),singleCompletedJob.invoices.length===0?null:/*#__PURE__*/React.createElement(CompleteButton,{className:styles.completeButton,onClick:handleInvoice},\"Download Invoice\")):localStorage.getItem('usertype')==='Contractor'&&localStorage.getItem('contractor_id')===singleCompletedJob.contractorId?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CompleteButton,{className:styles.completeButton,onClick:handleSubmit},\"Generate Invoice\"),singleCompletedJob.invoices.length===0?null:/*#__PURE__*/React.createElement(CompleteButton,{className:styles.completeButton,onClick:handleInvoice},\"Download Invoice\")):null),/*#__PURE__*/React.createElement(\"p\",{className:styles.downloadAppText},\"Please download our app from here or browse from desktop to generate receipt or review contractors and for better experience.\"),/*#__PURE__*/React.createElement(\"hr\",{className:styles.hr1}),/*#__PURE__*/React.createElement(\"h2\",{className:styles.header2},\"About the job\"),/*#__PURE__*/React.createElement(\"p\",{className:styles.about},jobDetails),/*#__PURE__*/React.createElement(\"hr\",{className:styles.hr2}),/*#__PURE__*/React.createElement(\"div\",{className:styles.skillsbox},/*#__PURE__*/React.createElement(\"h1\",{className:styles.header2},\"Required Skills\"),/*#__PURE__*/React.createElement(\"box\",{className:styles2.servicetagbox},renderTags()),/*#__PURE__*/React.createElement(\"h1\",{className:styles.header2},\"Required Languages\"),/*#__PURE__*/React.createElement(\"box\",{className:styles2.servicetagbox},renderLTags()),/*#__PURE__*/React.createElement(\"h1\",{className:styles.header2},\"Review\"),/*#__PURE__*/React.createElement(\"box\",{className:styles2.servicetagbox},reviews.length>0?/*#__PURE__*/React.createElement(Grid,{className:styles.gridContainer,container:true,spacing:reviews.length>0?4:0,justify:\"center\"},reviews):/*#__PURE__*/React.createElement(\"p\",null,\"It seems like this job doesn't have any reviews\"))))),/*#__PURE__*/React.createElement(NotFound,{setOpen:setOpen,open:open}));}var contentStyle={width:'1100px',height:'850px',background:'#FFFFFF',borderRadius:'16px',zIndex:'9999999'};","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/PostingPage_Completed/body.js"],"names":["React","useEffect","useState","styles","ArrowBackIcon","useHistory","withStyles","api","Button","Popup","Review","ImageViewer","SimpleMenu","styles2","swal","Grid","ReviewCard","moment","NotFound","LoadingView","CompleteButton","theme","root","borderRadius","backgroundColor","border","height","fontSize","fontWeight","width","maxWidth","minWidth","color","marginLeft","ActiveBody","props","history","handleOnClick","event","preventDefault","goBack","downloadurl","serviceTypeList","languageList","singleCompletedJob","setSingleCompletedJob","open","setOpen","loading","setLoading","jobId","id","getSingleCompletedJob","then","res","console","log","data","catch","err","jobTitle","title","jobDetails","locationDetail","imagesList","handleLink","localStorage","getItem","push","pathname","clientId","toString","contractorId","name","userID","clientFirstName","clientLastName","contractorFirstName","contractorLastName","handleSubmit","handleInvoice","text","icon","button","window","invoices","ts","dateCompleted","timeVal","diff","String","renderTitle","headerDiv","cursor","header1","frame","location","Tags","tagname","tag","tagfont","renderTags","i","services","tagsCount","length","tempTags","renderLTags","lang","contractorReview","setContractorReview","profileId","getContractorReview","renderReviews","tempJobs","review","completedJobId","reviewDate","reviewBody","reviewContent","avatar","reviewTitle","reviewRating","reviews","posting","postingbox","row","paragraph","buttonsII","completeButton","contentStyle","close","downloadAppText","hr1","header2","about","hr2","skillsbox","servicetagbox","gridContainer","background","zIndex"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport styles from '../PostingPage/posting.module.css'; \nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { useHistory} from 'react-router-dom';\nimport { withStyles} from '@material-ui/core/styles';\nimport api from '../api/api';\nimport Button from '@material-ui/core/Button';\nimport Popup from \"reactjs-popup\";\nimport Review from \"../Review\";\nimport ImageViewer from '../ImageViewer';\nimport SimpleMenu from './dropDown';\nimport styles2 from '../ContractorActiveJobsPage/styles.module.css';\nimport swal from 'sweetalert';\nimport { Grid } from '@material-ui/core';\nimport ReviewCard from '../ProfileView/reviews';\nimport moment from 'moment';\nimport NotFound from '../ResuableComponents/404';\nimport LoadingView from '../ResuableComponents/loadingView';\n\nconst CompleteButton = withStyles((theme) => ({\n  root: {\n    borderRadius:44,\n    backgroundColor: '#eeeeee',\n    border: '1px solid #2B64D2',\n    height:'50px',\n    fontSize: '15px',\n    fontWeight:'550',\n    width:'100%',\n    maxWidth:'413px',\n    minWidth:'200px',\n    '&:hover': {\n      backgroundColor: '#2B64D2',\n      color:'white',\n    },\n    marginLeft: 0,\n  },\n}))(Button);\n\nexport default function  ActiveBody(props) {\n    const history = useHistory();\n    const handleOnClick = (event) => {\n        event.preventDefault();\n        history.goBack()\n    }\n    const [singleCompletedJob, setSingleCompletedJob] = useState({downloadurl:[],serviceTypeList:[],languageList:[]});\n    const [open, setOpen] = useState(false);\n    const [loading, setLoading] = useState(false);\n    var jobId= {};\n    jobId['id'] = props.id;\n    const getSingleCompletedJob = () => {\n        api.getSingleCompletedJob(jobId).then(res => {\n            console.log(\"Job loaded successfully\");\n            console.log(res);\n            setSingleCompletedJob(res.data);\n            setLoading(false); \n        }).catch(err => {console.log(err); setLoading(false); setOpen(true)})\n        }\n\n    let jobTitle = singleCompletedJob.title\n    let jobDetails = singleCompletedJob.jobDetails\n    let locationDetail = singleCompletedJob.locationDetail\n    let imagesList = singleCompletedJob.downloadurl\n    const handleLink = (event) =>{\n        event.preventDefault();\n        if (localStorage.getItem('usertype') === 'Contractor'){\n            history.push({\n                pathname: '/ClientProfile/' + singleCompletedJob.clientId.toString(),\n                });\n            }\n            else{\n            history.push({\n                pathname: '/profile/' + singleCompletedJob.contractorId.toString(),\n                })};\n    }\n    let name = \"\"\n    let userID=\"\"\n    if (localStorage.getItem('usertype') == 'Contractor'){\n        name = singleCompletedJob.clientFirstName + \" \" + singleCompletedJob.clientLastName\n        userID=singleCompletedJob.clientId\n        }\n        else{\n        name = singleCompletedJob.contractorFirstName + \" \" + singleCompletedJob.contractorLastName\n        userID=singleCompletedJob.contractorId\n        }\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        history.push({\n            pathname: '/invoice/' + props.id.toString(),\n        });\n    }\n    const handleInvoice = (event) => {\n        event.preventDefault();\n        swal({\n            title: \"Downloaded!\",\n            text: \"Invoice successfully downloaded!\",\n            icon: \"success\",\n            button: \"OK\",\n        });\n        window.open(singleCompletedJob.invoices[-0], \"_blank\");\n    }\n    const ts = moment(singleCompletedJob.dateCompleted);\n    let timeVal;\n    if (moment().diff(ts, 'minutes')<60){\n        timeVal = String(moment().diff(ts, 'minutes')) + 'm' \n    }else if(moment().diff(ts, 'hours')<24){\n        timeVal = String(moment().diff(ts, 'hours')) + 'h' \n    }else if(moment().diff(ts, 'days')<24){\n        timeVal = String(moment().diff(ts, 'days')) + 'd' \n    }else{\n        timeVal = String(moment().diff(ts, 'weeks')) + 'w' \n    }\n    const renderTitle = () => {\n        return(\n            <div>\n                <div className={styles.headerDiv}>\n                    <ArrowBackIcon  style={{height:25, cursor:\"pointer\"}} onClick={handleOnClick}/>\n                    <h1 className={styles.header1}> {jobTitle} </h1>\n                    <SimpleMenu id={props.id} contractorId={userID} name={name}/>\n                </div>\n                <box className={styles.frame}>\n                    <p className={styles.name} onClick={handleLink}>{name}</p>\n                    <p className={styles.location}><span>&#8226;</span> {locationDetail}</p>\n                </box> \n                <box className={styles.frame}>\n                    <p className={styles.location}>Completed {timeVal} ago</p>\n                </box>\n            </div>\n        )\n        };\n    function Tags(props) {\n        if (!props.tagname) return null;\n        return (\n            <box className={styles2.tag}>\n                <p className={styles2.tagfont}>{props.tagname}</p>\n            </box>\n        )\n    };\n    const renderTags = () => {\n        let i = 0;\n        let services = singleCompletedJob.serviceTypeList;\n        let tagsCount = services.length;\n        let tempTags = [];\n        while (i < tagsCount) {\n            tempTags.push(<Tags className={styles2.tag} tagname={services[i]} />);\n            i += 1;\n        };\n        return tempTags;\n    };\n    const renderLTags = () => {\n        let i = 0;\n        let lang = singleCompletedJob.languageList;\n        // for(var j = 0 ; j < lang.length ; j++){\n        //     let temp= lang[j].toLowerCase()\n        //     lang[j] = temp.charAt(0).toUpperCase() + temp.substr(1);\n        // }\n        let tagsCount = lang.length;\n        let tempTags = [];\n        while (i < tagsCount) {\n            tempTags.push(<Tags className={styles2.tag} tagname={lang[i]} />);\n            i += 1;\n        };\n        return tempTags;\n    };\n    //Code for Contractor review\n    const [contractorReview, setContractorReview] = useState([]);\n    var profileId = {};\n    profileId.id = singleCompletedJob.contractorId;\n    const getContractorReview = () => {\n        api.getContractorReview(profileId).then(res => {\n            console.log(\"Review loaded successfully\");\n            console.log(res);\n            setContractorReview(res.data);\n        }).catch(err => console.log(err));\n    };\n\n    useEffect(() => {\n        setLoading(true);\n        getSingleCompletedJob();\n    },[]);\n    useEffect(() => {\n        getContractorReview();\n    },[singleCompletedJob]);\n    const renderReviews = () => {\n        // let i = 0;\n        // let reviewsCount = contractorReview.length;\n        let tempJobs = [];\n        var i;\n        for (i in contractorReview) {\n            let review = contractorReview[i];\n            if(review.clientId === singleCompletedJob.clientId && review.contractorId === singleCompletedJob.contractorId && review.completedJobId.toString() === props.id){\n                let title = review.clientFirstName + \" \" + review.clientLastName\n                let reviewDate = review.reviewDate\n                let reviewBody = review.reviewContent\n                let avatar = review.downloadurl\n                let reviewTitle = review.reviewTitle\n                let reviewRating = review.reviewRating\n                tempJobs.push(\n                <Grid item xs={12} sm={6} md={4}  >\n                    <ReviewCard reviewRating={reviewRating} reviewTitle={reviewTitle} avatar={avatar} clientId={review.clientId} id={review.id} title={title} subheader={reviewDate} body={reviewBody} />\n                </Grid>\n                )\n            }\n        }\n        return tempJobs;\n    }; \n    let reviews = renderReviews();\n    if (loading) {\n        return <LoadingView/>;\n        }\n    return (   \n        <div className={styles.posting}>\n            <box className={styles.postingbox}>\n                    {renderTitle()}\n                <div className={styles.row}>\n                    <ImageViewer imagesList={imagesList}/>\n                </div>\n                <div className={styles.paragraph}>\n                    <div className={styles.buttonsII}>\n                        {localStorage.getItem('usertype') === 'Client' && localStorage.getItem('client_id') === singleCompletedJob.clientId\n                        ?\n                        <div>\n                            {reviews.length === 0?\n                            <Popup trigger={\n                                <CompleteButton className={styles.completeButton}> \n                                    Review Contractor\n                                </CompleteButton>\n                                } \n                                modal contentStyle={contentStyle}>\n                                {close => \n                                    <Review close={close} \n                                        name={singleCompletedJob.contractorFirstName + \" \" + singleCompletedJob.contractorLastName} \n                                        jobId={singleCompletedJob.id} \n                                        contractorId={singleCompletedJob.contractorId} \n                                    />\n                                }\n                            </Popup>\n                            :<CompleteButton className={styles.completeButton} disabled> \n                                &#10004; Contractor Reviewed\n                            </CompleteButton>\n                            }\n                            {singleCompletedJob.invoices.length===0 ?null\n                                :<CompleteButton className={styles.completeButton} onClick={handleInvoice}> \n                                    Download Invoice\n                                </CompleteButton>}\n                        </div>\n                        :localStorage.getItem('usertype') === 'Contractor' && localStorage.getItem('contractor_id') === singleCompletedJob.contractorId\n                        ?<div>\n                            <CompleteButton className={styles.completeButton} onClick={handleSubmit}> \n                                Generate Invoice\n                            </CompleteButton>  \n                            {singleCompletedJob.invoices.length===0 ?null\n                                :<CompleteButton className={styles.completeButton} onClick={handleInvoice}> \n                                    Download Invoice\n                            </CompleteButton>}\n                        </div>\n                        :null\n                        }\n                    </div>\n                    <p className={styles.downloadAppText}>Please download our app from here or browse from desktop to generate receipt or review contractors and for better experience.</p>\n                    <hr className={styles.hr1}/>  \n                    <h2 className={styles.header2}>About the job</h2>\n                    <p className={styles.about}>{jobDetails}</p>\n                    <hr className={styles.hr2}/>\n                    <div className={styles.skillsbox}>\n                        <h1 className={styles.header2}>Required Skills</h1>\n                        <box className={styles2.servicetagbox}>\n                            {renderTags()}\n                        </box>        \n                        <h1 className={styles.header2}>Required Languages</h1>\n                        <box className={styles2.servicetagbox}>\n                            {renderLTags()}\n                        </box> \n                        <h1 className={styles.header2}>Review</h1>\n                        <box className={styles2.servicetagbox}>\n                        {reviews.length>0?\n                            <Grid className={styles.gridContainer} container  spacing={reviews.length>0?4:0} justify={\"center\"}>\n                                {reviews}\n                            </Grid>\n                            : <p>It seems like this job doesn't have any reviews</p>}\n                        </box> \n                    </div>\n                </div>\n            </box>\n            <NotFound setOpen={setOpen} open={open}/>\n        </div>\n    );\n}\n\nconst contentStyle = {\n    width: '1100px',\n    height: '850px',\n    background: '#FFFFFF',\n    borderRadius: '16px',\n    zIndex:'9999999'\n};"]},"metadata":{},"sourceType":"module"}