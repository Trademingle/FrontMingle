{"ast":null,"code":"import _slicedToArray from\"/Users/nandupokhrel/Desktop/BookTrades/trademingle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import styles from'./styles.module.css';import CloseOutlinedIcon from'@material-ui/icons/CloseOutlined';import ArrowBackIcon from'@material-ui/icons/ArrowBack';// import VerifyEmail from \"./SignUpFlow/VerifyEmail\";\nimport UserTypePage from\"./SignUpFlow/UserTypePage\";import InformationForm from\"./SignUpFlow/InformationForm\";import AddImage from\"./SignUpFlow/AddImage\";import ChooseWork from'./SignUpFlow/chooseWork';import ChosenWork from'./SignUpFlow/chosenWork';import ChooseLanguage from'./SignUpFlow/chooseLanguage';import SignUpMain from'./EmailSignup';import Firebase from'../Firebase/firebase';import api from'../api/api';import{makeStyles}from'@material-ui/core/styles';import CircularProgress from'@material-ui/core/CircularProgress';import Popup from'reactjs-popup';import SignIn from'../Login';var useStyles=makeStyles(function(theme){return{root:{textAlign:'center'}};});function LoadingView(){var classes=useStyles();return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(CircularProgress,null));}var SignUpPage=function SignUpPage(props){var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),stateCode=_React$useState2[0],setStateCode=_React$useState2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var information={};var _React$useState3=React.useState(information),_React$useState4=_slicedToArray(_React$useState3,2),informationState=_React$useState4[0],setInformationState=_React$useState4[1];var backClicked=function backClicked(){if(stateCode===0){props.setOpen(false);}else{setStateCode(stateCode-1);}};var redirectToLanding=function redirectToLanding(val){if(val['usertype']==='Contractor'){window.location.href='/contractorexplore';}else{window.location.href='/homeownerexplore';}};var setToken=function setToken(){setLoading(true);Firebase.auth.currentUser.getIdToken(/* forceRefresh */true).then(function(idToken){// Send token to your backend via HTTPS\n// ...\ninformationState['id_token']=idToken;api.signUp(informationState,redirectToLanding,function(error){// Handle error\nsetLoading(false);setStateCode(9);console.log(error);});}).catch(function(error){// Handle error\nsetLoading(false);setStateCode(9);console.log(error);});};var closePage=function closePage(){if(stateCode>0){Firebase.auth.currentUser.getIdToken(/* forceRefresh */true).then(function(idToken){// Send token to your backend via HTTPS\n// ...\nvar information={'id_token':idToken};api.cancelSignUp(information);props.setOpen(false);}).catch(function(error){// Handle error\nsetStateCode(9);console.log(error);});}else{props.setOpen(false);}};var emailClicked=function emailClicked(code){// if (stateCode == 0){\n// }\nif(stateCode===7){//firebase token retrieval\nsetToken();}else{setStateCode(stateCode+1);}};if(loading){return/*#__PURE__*/React.createElement(LoadingView,null);}var renderSwitch=function renderSwitch(){switch(stateCode){case 0:return/*#__PURE__*/React.createElement(SignUpMain,{setOpen:setOpen,onEmailClick:emailClicked,information:informationState});case 1:setStateCode(stateCode+1);return;case 2:return/*#__PURE__*/React.createElement(UserTypePage,{onDecision:emailClicked,information:informationState});case 3:return/*#__PURE__*/React.createElement(InformationForm,{onDecision:emailClicked,information:informationState});case 4:return/*#__PURE__*/React.createElement(AddImage,{onDecision:emailClicked,information:informationState});case 5:if(informationState['usertype']=='client'){setStateCode(stateCode+1);return;}return/*#__PURE__*/React.createElement(ChooseWork,{onDecision:emailClicked,information:informationState});case 6:return/*#__PURE__*/React.createElement(ChooseLanguage,{onDecision:emailClicked,information:informationState});case 7:return/*#__PURE__*/React.createElement(ChosenWork,{onDecision:emailClicked,information:informationState});case 9:return/*#__PURE__*/React.createElement(ErrorView,null);}};var contentStyle3={width:'702px',height:'700px',background:'#FFFFFF',borderRadius:'16px'};return/*#__PURE__*/React.createElement(Popup,{open:props.open,modal:true,contentStyle:contentStyle3},/*#__PURE__*/React.createElement(\"div\",{className:styles.box},/*#__PURE__*/React.createElement(CloseOutlinedIcon,{style:{height:40,width:40},className:styles.cross,onClick:closePage}),stateCode>0?/*#__PURE__*/React.createElement(ArrowBackIcon,{style:{height:40,width:40},className:styles.back,onClick:backClicked}):null,renderSwitch()),/*#__PURE__*/React.createElement(SignIn,{setOpen:setOpen,open:open}));};var ErrorView=function ErrorView(props){return/*#__PURE__*/React.createElement(\"div\",{className:styles.loginContainer},/*#__PURE__*/React.createElement(\"p\",{className:styles.para},\"Oops, there has been an error. But don't worry, we are taking a look into it!\"));};export default SignUpPage;","map":{"version":3,"sources":["/Users/nandupokhrel/Desktop/BookTrades/trademingle/src/components/SignUp/index.js"],"names":["React","useState","styles","CloseOutlinedIcon","ArrowBackIcon","UserTypePage","InformationForm","AddImage","ChooseWork","ChosenWork","ChooseLanguage","SignUpMain","Firebase","api","makeStyles","CircularProgress","Popup","SignIn","useStyles","theme","root","textAlign","LoadingView","classes","SignUpPage","props","stateCode","setStateCode","open","setOpen","loading","setLoading","information","informationState","setInformationState","backClicked","redirectToLanding","val","window","location","href","setToken","auth","currentUser","getIdToken","then","idToken","signUp","error","console","log","catch","closePage","cancelSignUp","emailClicked","code","renderSwitch","contentStyle3","width","height","background","borderRadius","box","cross","back","ErrorView","loginContainer","para"],"mappings":"yKAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,kCAA9B,CACA,MAAOC,CAAAA,aAAP,KAA0B,8BAA1B,CACA;AACA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CACA,MAAOC,CAAAA,eAAP,KAA4B,8BAA5B,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAQC,CAAAA,UAAR,KAAwB,yBAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAQC,CAAAA,cAAR,KAA4B,6BAA5B,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,sBAArB,CACA,MAAOC,CAAAA,GAAP,KAAgB,YAAhB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oCAA7B,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CAEA,GAAMC,CAAAA,SAAS,CAAGJ,UAAU,CAAC,SAACK,KAAD,QAAY,CACvCC,IAAI,CAAE,CACJC,SAAS,CAAC,QADN,CADiC,CAAZ,EAAD,CAA5B,CAKA,QAASC,CAAAA,WAAT,EAAuB,CACrB,GAAMC,CAAAA,OAAO,CAAGL,SAAS,EAAzB,CAEA,mBACE,2BAAK,SAAS,CAAEK,OAAO,CAACH,IAAxB,eACE,oBAAC,gBAAD,MADF,CADF,CAKD,CACD,GAAMI,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAW,CAC5B,oBAAgCzB,KAAK,CAACC,QAAN,CAAe,CAAf,CAAhC,oDAAKyB,SAAL,qBAAgBC,YAAhB,qBACA,cAAwB1B,QAAQ,CAAC,KAAD,CAAhC,wCAAO2B,IAAP,eAAaC,OAAb,eACA,eAA8B5B,QAAQ,CAAC,KAAD,CAAtC,yCAAO6B,OAAP,eAAgBC,UAAhB,eACA,GAAMC,CAAAA,WAAW,CAAG,EAApB,CACA,qBAA8ChC,KAAK,CAACC,QAAN,CAAe+B,WAAf,CAA9C,qDAAKC,gBAAL,qBAAuBC,mBAAvB,qBACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,GAAIT,SAAS,GAAK,CAAlB,CAAoB,CAClBD,KAAK,CAACI,OAAN,CAAc,KAAd,EACD,CAFD,IAEK,CACHF,YAAY,CAACD,SAAS,CAAC,CAAX,CAAZ,CACD,CACF,CAND,CAOA,GAAMU,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,GAAD,CAAS,CACjC,GAAIA,GAAG,CAAC,UAAD,CAAH,GAAoB,YAAxB,CAAqC,CACnCC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,oBAArB,CACD,CAFD,IAEK,CACHF,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,mBAArB,CACD,CACF,CAND,CAOA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrBV,UAAU,CAAC,IAAD,CAAV,CACAnB,QAAQ,CAAC8B,IAAT,CAAcC,WAAd,CAA0BC,UAA1B,CAAqC,kBAAmB,IAAxD,EAA8DC,IAA9D,CAAmE,SAASC,OAAT,CAAkB,CACnF;AACA;AACAb,gBAAgB,CAAC,UAAD,CAAhB,CAA+Ba,OAA/B,CACAjC,GAAG,CAACkC,MAAJ,CAAWd,gBAAX,CAA4BG,iBAA5B,CAA+C,SAACY,KAAD,CAAS,CACtD;AACAjB,UAAU,CAAC,KAAD,CAAV,CACAJ,YAAY,CAAC,CAAD,CAAZ,CACAsB,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CALD,EAMD,CAVD,EAUGG,KAVH,CAUS,SAASH,KAAT,CAAgB,CACvB;AACAjB,UAAU,CAAC,KAAD,CAAV,CACAJ,YAAY,CAAC,CAAD,CAAZ,CACAsB,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAfD,EAgBD,CAlBD,CAmBA,GAAMI,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,GAAI1B,SAAS,CAAG,CAAhB,CAAkB,CAChBd,QAAQ,CAAC8B,IAAT,CAAcC,WAAd,CAA0BC,UAA1B,CAAqC,kBAAmB,IAAxD,EAA8DC,IAA9D,CAAmE,SAASC,OAAT,CAAkB,CACnF;AACA;AACA,GAAMd,CAAAA,WAAW,CAAG,CAAC,WAAYc,OAAb,CAApB,CACAjC,GAAG,CAACwC,YAAJ,CAAiBrB,WAAjB,EACAP,KAAK,CAACI,OAAN,CAAc,KAAd,EACD,CAND,EAMGsB,KANH,CAMS,SAASH,KAAT,CAAgB,CACvB;AACArB,YAAY,CAAC,CAAD,CAAZ,CACAsB,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAVD,EAWD,CAZD,IAYK,CACHvB,KAAK,CAACI,OAAN,CAAc,KAAd,EACD,CACF,CAhBD,CAiBA,GAAMyB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,IAAD,CAAU,CAC7B;AACA;AACA,GAAI7B,SAAS,GAAK,CAAlB,CAAoB,CAClB;AACAe,QAAQ,GAET,CAJD,IAIK,CACHd,YAAY,CAACD,SAAS,CAAC,CAAX,CAAZ,CACD,CACF,CAVD,CAWA,GAAII,OAAJ,CAAa,CACX,mBAAO,oBAAC,WAAD,MAAP,CACD,CACD,GAAM0B,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,OAAQ9B,SAAR,EACE,IAAK,EAAL,CACE,mBAAO,oBAAC,UAAD,EAAY,OAAO,CAAEG,OAArB,CAA8B,YAAY,CAAEyB,YAA5C,CAA0D,WAAW,CAAErB,gBAAvE,EAAP,CACF,IAAK,EAAL,CACEN,YAAY,CAACD,SAAS,CAAC,CAAX,CAAZ,CACA,OACF,IAAK,EAAL,CACE,mBAAO,oBAAC,YAAD,EAAc,UAAU,CAAE4B,YAA1B,CAAwC,WAAW,CAAErB,gBAArD,EAAP,CACF,IAAK,EAAL,CACE,mBAAO,oBAAC,eAAD,EAAiB,UAAU,CAAEqB,YAA7B,CAA2C,WAAW,CAAErB,gBAAxD,EAAP,CACF,IAAK,EAAL,CACE,mBAAO,oBAAC,QAAD,EAAU,UAAU,CAAEqB,YAAtB,CAAoC,WAAW,CAAErB,gBAAjD,EAAP,CACF,IAAK,EAAL,CACE,GAAIA,gBAAgB,CAAC,UAAD,CAAhB,EAAgC,QAApC,CAA6C,CAC3CN,YAAY,CAACD,SAAS,CAAC,CAAX,CAAZ,CACA,OACD,CACD,mBAAO,oBAAC,UAAD,EAAY,UAAU,CAAE4B,YAAxB,CAAsC,WAAW,CAAErB,gBAAnD,EAAP,CACF,IAAK,EAAL,CACE,mBAAO,oBAAC,cAAD,EAAgB,UAAU,CAAEqB,YAA5B,CAA0C,WAAW,CAAErB,gBAAvD,EAAP,CACF,IAAK,EAAL,CACE,mBAAO,oBAAC,UAAD,EAAY,UAAU,CAAEqB,YAAxB,CAAsC,WAAW,CAAErB,gBAAnD,EAAP,CACF,IAAK,EAAL,CACE,mBAAO,oBAAC,SAAD,MAAP,CAvBJ,CAyBD,CA1BD,CA2BA,GAAMwB,CAAAA,aAAa,CAAG,CACpBC,KAAK,CAAE,OADa,CAEpBC,MAAM,CAAE,OAFY,CAGpBC,UAAU,CAAE,SAHQ,CAIpBC,YAAY,CAAE,MAJM,CAAtB,CAMA,mBACE,oBAAC,KAAD,EAAO,IAAI,CAAEpC,KAAK,CAACG,IAAnB,CAAyB,KAAK,KAA9B,CAA+B,YAAY,CAAE6B,aAA7C,eACE,2BAAK,SAAS,CAAEvD,MAAM,CAAC4D,GAAvB,eACE,oBAAC,iBAAD,EAAmB,KAAK,CAAE,CAAEH,MAAM,CAAE,EAAV,CAAcD,KAAK,CAAE,EAArB,CAA1B,CAAqD,SAAS,CAAExD,MAAM,CAAC6D,KAAvE,CAA8E,OAAO,CAAEX,SAAvF,EADF,CAEI1B,SAAS,CAAC,CAAV,cACC,oBAAC,aAAD,EAAe,KAAK,CAAE,CAAEiC,MAAM,CAAE,EAAV,CAAcD,KAAK,CAAE,EAArB,CAAtB,CAAiD,SAAS,CAAExD,MAAM,CAAC8D,IAAnE,CAAyE,OAAO,CAAE7B,WAAlF,EADD,CAEC,IAJL,CAKGqB,YAAY,EALf,CADF,cAQE,oBAAC,MAAD,EAAQ,OAAO,CAAE3B,OAAjB,CAA0B,IAAI,CAAED,IAAhC,EARF,CADF,CAYD,CAnHD,CAqHA,GAAMqC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACxC,KAAD,CAAW,CAC3B,mBACE,2BAAK,SAAS,CAAEvB,MAAM,CAACgE,cAAvB,eACE,yBAAG,SAAS,CAAEhE,MAAM,CAACiE,IAArB,kFADF,CADF,CAKD,CAND,CASA,cAAe3C,CAAAA,UAAf","sourcesContent":["import React, {useState} from 'react';\nimport styles from './styles.module.css';\nimport CloseOutlinedIcon from '@material-ui/icons/CloseOutlined';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\n// import VerifyEmail from \"./SignUpFlow/VerifyEmail\";\nimport UserTypePage from \"./SignUpFlow/UserTypePage\";\nimport InformationForm from \"./SignUpFlow/InformationForm\";\nimport AddImage from \"./SignUpFlow/AddImage\";\nimport  ChooseWork from './SignUpFlow/chooseWork'\nimport ChosenWork from './SignUpFlow/chosenWork'\nimport  ChooseLanguage from './SignUpFlow/chooseLanguage'\nimport SignUpMain from './EmailSignup'\nimport Firebase from '../Firebase/firebase';\nimport api from '../api/api';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Popup from 'reactjs-popup';\nimport SignIn from '../Login';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    textAlign:'center'\n  },\n}));\nfunction LoadingView() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <CircularProgress />\n    </div>\n  );\n}\nconst SignUpPage = (props) => {\n  let [stateCode, setStateCode] = React.useState(0);\n  const [open, setOpen] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const information = {};\n  let [informationState, setInformationState] = React.useState(information);\n  const backClicked = () => {\n    if (stateCode === 0){\n      props.setOpen(false)\n    }else{\n      setStateCode(stateCode-1);\n    }\n  }\n  const redirectToLanding = (val) => {\n    if (val['usertype'] === 'Contractor'){\n      window.location.href='/contractorexplore'\n    }else{\n      window.location.href='/homeownerexplore'\n    }\n  }\n  const setToken = () => {\n    setLoading(true)\n    Firebase.auth.currentUser.getIdToken(/* forceRefresh */ true).then(function(idToken) {\n      // Send token to your backend via HTTPS\n      // ...\n      informationState['id_token'] = idToken;\n      api.signUp(informationState,redirectToLanding, (error)=>{\n        // Handle error\n        setLoading(false);\n        setStateCode(9);\n        console.log(error);\n      })\n    }).catch(function(error) {\n      // Handle error\n      setLoading(false);\n      setStateCode(9);\n      console.log(error);\n    });\n  }\n  const closePage = () => {\n    if (stateCode > 0){\n      Firebase.auth.currentUser.getIdToken(/* forceRefresh */ true).then(function(idToken) {\n        // Send token to your backend via HTTPS\n        // ...\n        const information = {'id_token': idToken}\n        api.cancelSignUp(information)\n        props.setOpen(false)\n      }).catch(function(error) {\n        // Handle error\n        setStateCode(9);\n        console.log(error);\n      });\n    }else{\n      props.setOpen(false)\n    }\n  }\n  const emailClicked = (code) => {\n    // if (stateCode == 0){\n    // }\n    if (stateCode === 7){\n      //firebase token retrieval\n      setToken();\n     \n    }else{\n      setStateCode(stateCode+1)\n    }\n  }\n  if (loading) {\n    return <LoadingView/>;\n  }\n  const renderSwitch = () => {\n    switch (stateCode) {\n      case 0:\n        return <SignUpMain setOpen={setOpen} onEmailClick={emailClicked} information={informationState}></SignUpMain>\n      case 1:\n        setStateCode(stateCode+1)\n        return\n      case 2:\n        return <UserTypePage onDecision={emailClicked} information={informationState}></UserTypePage>\n      case 3:\n        return <InformationForm onDecision={emailClicked} information={informationState}></InformationForm>\n      case 4:\n        return <AddImage onDecision={emailClicked} information={informationState} ></AddImage>\n      case 5:\n        if (informationState['usertype'] == 'client'){\n          setStateCode(stateCode+1)\n          return\n        }\n        return <ChooseWork onDecision={emailClicked} information={informationState}></ChooseWork>\n      case 6:\n        return <ChooseLanguage onDecision={emailClicked} information={informationState}></ChooseLanguage>\n      case 7:\n        return <ChosenWork onDecision={emailClicked} information={informationState}></ChosenWork>\n      case 9:\n        return <ErrorView />\n    }\n  }\n  const contentStyle3 = {\n    width: '702px',\n    height: '700px',\n    background: '#FFFFFF',\n    borderRadius: '16px',\n  };\n  return(\n    <Popup open={props.open} modal contentStyle={contentStyle3}>\n      <div className={styles.box}>\n        <CloseOutlinedIcon style={{ height: 40, width: 40 }} className={styles.cross} onClick={closePage}/>\n        { stateCode>0\n         ? <ArrowBackIcon style={{ height: 40, width: 40 }} className={styles.back} onClick={backClicked}/>\n         : null}\n        {renderSwitch()}\n      </div>\n      <SignIn setOpen={setOpen} open={open}/>\n    </Popup>\n  );\n};\n \nconst ErrorView = (props) => { \n  return(\n    <div className={styles.loginContainer}>\n      <p className={styles.para}>Oops, there has been an error. But don't worry, we are taking a look into it!</p>\n    </div>\n  )\n}\n\n\nexport default SignUpPage;\n"]},"metadata":{},"sourceType":"module"}